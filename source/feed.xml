<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet href="rss.xsl" type="text/xsl"?>
<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"
     xmlns:itunes="http://www.itunes.com/dtds/podcast-1.0.dtd">
    <channel>
            <title><![CDATA[John Bi's Blog]]></title>
            <link>https://bxb100.github.io</link>
        <atom:link href="https://bxb100.github.io/feed.xml" rel="self" type="application/rss+xml" />
            <description><![CDATA[RSS feed of John Bi's bxb100.github.io]]></description>
        <generator>IssueBlogAction</generator>
        <webMaster>bxb100@outlook.com (@bxb100)</webMaster>
            <itunes:author>bxb100</itunes:author>
                <itunes:explicit>no</itunes:explicit>
                <itunes:image href="https://cdn.jsdelivr.net/gh/bxb100/bxb100@master/png2.png" />
            <language>zh-cn</language>
            <image>
                <url>https://cdn.jsdelivr.net/gh/bxb100/bxb100@master/png2.png</url>
                    <title><![CDATA[John Bi's Blog]]></title>
                <link>https://bxb100.github.io</link>
            </image>
        <lastBuildDate>Sun, 15 Jan 2023 03:34:40 GMT</lastBuildDate>
            <item>
                <title><![CDATA[Java Fluent API è®¾è®¡é€Ÿæˆ]]></title>
                    <description><![CDATA[<blockquote>
<p>è¯‘ <a href="https://blog.jooq.org/the-java-fluent-api-designer-crash-course/" rel="nofollow">https://blog.jooq.org/the-java-fluent-api-designer-crash-course/</a></p>
</blockquote>
<p>è‡ªä» <a href="http://martinfowler.com/bliki/FluentInterface.html" rel="nofollow">Martin Fowler è°ˆè®ºæµç•…çš„æ¥å£</a>ä»¥æ¥ï¼Œäººä»¬å¼€å§‹åˆ°å¤„<a href="https://stackoverflow.com/questions/1103985/method-chaining-why-is-it-a-good-practice-or-not/8745227" rel="nofollow">é“¾å¼æ–¹æ³•</a>ï¼Œä¸ºæ¯ä¸ªå¯èƒ½çš„ç”¨ä¾‹åˆ›å»ºæµç•…çš„ APIï¼ˆæˆ– <a href="https://en.wikipedia.org/wiki/Domain-specific_language" rel="nofollow">DSLs</a>ï¼‰ã€‚åŸåˆ™ä¸Šï¼Œå‡ ä¹æ‰€æœ‰ç±»å‹çš„ DSL éƒ½å¯ä»¥æ˜ å°„åˆ° Javaã€‚è®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•åšåˆ°è¿™ä¸€ç‚¹</p>
<h2><a id="user-content-dsl-è§„åˆ™" class="anchor" aria-hidden="true" href="#dsl-è§„åˆ™"><span aria-hidden="true" class="octicon octicon-link"></span></a>DSL è§„åˆ™</h2>
<p>DSLï¼ˆé¢†åŸŸç‰¹å®šè¯­è¨€ï¼‰é€šå¸¸æ˜¯æ ¹æ®å¤§è‡´å¦‚ä¸‹çš„è§„åˆ™æ„å»ºçš„</p>
<pre><code>1. SINGLE-WORD
2. PARAMETERISED-WORD parameter
3. WORD1 [ OPTIONAL-WORD ]
4. WORD2 { WORD-CHOICE-A | WORD-CHOICE-B }
5. WORD3 [ , WORD3 ... ]
</code></pre>
<p>æˆ–è€…ï¼Œä½ ä¹Ÿå¯ä»¥åƒè¿™æ ·å£°æ˜è¯­æ³•ï¼ˆç”± <a href="http://www.bottlecaps.de/rr/ui" rel="nofollow">Railroad Diagrams ç«™ç‚¹</a> æ”¯æŒï¼‰</p>
<pre><code>Grammar ::= ( 
  'SINGLE-WORD' | 
  'PARAMETERISED-WORD' '('[A-Z]+')' |
  'WORD1' 'OPTIONAL-WORD'? | 
  'WORD2' ( 'WORD-CHOICE-A' | 'WORD-CHOICE-B' ) | 
  'WORD3'+ 
)
</code></pre>
<p>æ¢å¥è¯è¯´ï¼Œä½ æœ‰ä¸€ä¸ªå¼€å§‹æ¡ä»¶æˆ–çŠ¶æ€ï¼Œåœ¨è¾¾åˆ°ç»“æŸæ¡ä»¶æˆ–çŠ¶æ€ä¹‹å‰ï¼Œä½ å¯ä»¥ä»ä¸­é€‰æ‹©ä¸€äº›ä½ çš„è¯­è¨€çš„å•è¯ã€‚å®ƒå°±åƒä¸€ä¸ªçŠ¶æ€æœºï¼Œå› æ­¤å¯ä»¥ç”»æˆè¿™æ ·çš„å›¾ï¼š</p>

  <p><a target="_blank" rel="noopener noreferrer nofollow" href="https://user-images.githubusercontent.com/20685961/212459554-d1b333ef-6d35-4bdb-bcae-bfefa24b296e.png"><img src="https://user-images.githubusercontent.com/20685961/212459554-d1b333ef-6d35-4bdb-bcae-bfefa24b296e.png" alt="image" style="max-width: 100%;"></a></p>
  ç”¨ <a href="http://www.bottlecaps.de/rr/ui" rel="nofollow">http://www.bottlecaps.de/rr/ui</a> åˆ›å»º

<h2><a id="user-content-java-å®ç°è¿™äº›è§„åˆ™" class="anchor" aria-hidden="true" href="#java-å®ç°è¿™äº›è§„åˆ™"><span aria-hidden="true" class="octicon octicon-link"></span></a>Java å®ç°è¿™äº›è§„åˆ™</h2>
<p>ä½¿ç”¨ Java æ¥å£ï¼Œå¯¹ä¸Šè¿° DSL è¿›è¡Œå»ºæ¨¡éå¸¸ç®€å•ã€‚æœ¬è´¨ä¸Šï¼Œä½ å¿…é¡»éµå¾ªä»¥ä¸‹è½¬æ¢è§„åˆ™ï¼š</p>
<ul>
<li>æ¯ä¸ª DSL <strong>keyword</strong> éƒ½å˜æˆäº†ä¸€ä¸ª Java method</li>
<li>æ¯ä¸ª DSL <strong>connection</strong> éƒ½å˜æˆäº†ä¸€ä¸ªæ¥å£</li>
<li>å½“ä½ æœ‰ä¸€ä¸ª <strong>mandatory</strong> é€‰æ‹©æ—¶ï¼ˆä½ ä¸èƒ½è·³è¿‡ä¸‹ä¸€ä¸ªå…³é”®å­—ï¼‰ï¼Œé‚£ä¸ªé€‰æ‹©çš„æ¯ä¸ªå…³é”®å­—éƒ½æ˜¯å½“å‰æ¥å£ä¸­çš„ä¸€ä¸ªæ–¹æ³•ã€‚å¦‚æœåªæœ‰ä¸€ä¸ªå…³é”®å­—å¯èƒ½ï¼Œé‚£ä¹ˆå°±åªæœ‰ä¸€ç§æ–¹æ³•</li>
<li>å½“ä½ æœ‰ä¸€ä¸ª <strong>optional</strong> å…³é”®å­—æ—¶ï¼Œå½“å‰æ¥å£æ‰©å±•ä¸‹ä¸€ä¸ªæ¥å£ï¼ˆåŠå…¶æ‰€æœ‰ keyword/methodsï¼‰</li>
<li>å½“ä½ æœ‰ä¸€ä¸ª <strong>repetition</strong> çš„å…³é”®å­—æ—¶ï¼Œè¡¨ç¤ºå¯é‡å¤å…³é”®å­—çš„æ–¹æ³•è¿”å›æ¥å£æœ¬èº«ï¼Œè€Œä¸æ˜¯ä¸‹ä¸€ä¸ªæ¥å£</li>
<li>æ¯ä¸ª DSL <strong>å­å®šä¹‰</strong> éƒ½æˆä¸ºä¸€ä¸ªå‚æ•°ã€‚è¿™å°†å…è®¸é€’å½’</li>
</ul>
<p>è¯·æ³¨æ„ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ç±»è€Œä¸æ˜¯æ¥å£å¯¹ä¸Šè¿° DSL è¿›è¡Œå»ºæ¨¡ã€‚ä½†æ˜¯ä¸€æ—¦ä½ æƒ³é‡ç”¨ç›¸ä¼¼çš„å…³é”®å­—ï¼Œæ–¹æ³•çš„å¤šé‡ç»§æ‰¿å¯èƒ½ä¼šæ´¾ä¸Šç”¨åœºï¼Œä½ å¯èƒ½æœ€å¥½ä½¿ç”¨æ¥å£ã€‚</p>
<p>è®¾ç½®å¥½è¿™äº›è§„åˆ™åï¼Œæ‚¨å¯ä»¥éšæ„é‡å¤å®ƒä»¬ä»¥åˆ›å»ºä»»æ„å¤æ‚åº¦çš„ DSLï¼Œä¾‹å¦‚ <a href="https://www.jooq.org/" rel="nofollow">jOOQ</a>ã€‚å½“ç„¶ï¼Œæ‚¨å¿…é¡»ä»¥æŸç§æ–¹å¼å®ç°æ‰€æœ‰æ¥å£ï¼Œä½†é‚£æ˜¯å¦ä¸€å›äº‹äº†ã€‚</p>
<p>ä»¥ä¸‹æ˜¯å°†ä¸Šè¿°è§„åˆ™è½¬æ¢ä¸º Java çš„æ–¹å¼ï¼š</p>
<div class="highlight highlight-source-java"><pre><span class="pl-c">// åˆå§‹æ¥å£ï¼ŒDSL çš„å…¥å£ç‚¹</span>
<span class="pl-c">// æ ¹æ®DSLçš„æ€§è´¨ï¼Œè¿™ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå¸¦æœ‰é™æ€æ–¹æ³•çš„ç±»</span>
<span class="pl-c">// è¿™æ ·å¯ä»¥è®©ä½ çš„ DSL æ›´åŠ æ‰å¹³(fluent)</span>
<span class="pl-k">interface</span> <span class="pl-smi">Start</span> {
	<span class="pl-smi">End</span> <span class="pl-en">singleWord</span>();
	<span class="pl-smi">End</span> <span class="pl-en">parameterisedWord</span>(<span class="pl-smi">String</span> <span class="pl-s1">parameter</span>);
	<span class="pl-smi">Intermediate1</span> <span class="pl-en">word1</span>();
	<span class="pl-smi">Intermediate2</span> <span class="pl-en">word2</span>();
	<span class="pl-smi">Intermediate3</span> <span class="pl-en">word3</span>();
}

<span class="pl-c">// ç»ˆæ­¢æ¥å£ï¼Œä¹Ÿå¯ä»¥åŒ…å«æ–¹æ³• execute();</span>
<span class="pl-k">interface</span> <span class="pl-smi">End</span> {
	<span class="pl-smi">void</span> <span class="pl-en">end</span>();
}
<span class="pl-c">// æ‹“å±•ä¸­é—´ DSL "step" å¯ä»¥ç”±æ–¹æ³• optionalWord() è¿”å›</span>
<span class="pl-c">// è®©è¿™ä¸ªæ–¹æ³• "optional"</span>
<span class="pl-k">interface</span> <span class="pl-smi">Intermediate1</span> <span class="pl-k">extends</span> <span class="pl-smi">End</span> {
	<span class="pl-smi">End</span> <span class="pl-en">optionalWord</span>();
}

<span class="pl-c">// ä¸­é—´ DSL "step" æä¾›äº†å‡ ä¸ªé€‰æ‹©(ç±»ä¼¼äº Start)</span>
<span class="pl-k">interface</span> <span class="pl-smi">Intermediate2</span> {
	<span class="pl-smi">End</span> <span class="pl-en">wordChoiceA</span>();
	<span class="pl-smi">End</span> <span class="pl-en">wordChoiceB</span>();
}

<span class="pl-c">// ä¸­é—´æ¥å£ç”± word3() è¿”å›è‡ªå·±, ä»¥å…è®¸é‡å¤è°ƒç”¨.</span>
<span class="pl-c">// é‡å¤è°ƒç”¨å¯ä»¥åœ¨ä»»æ„æ—¶é—´ç»“æŸ, å› ä¸ºå®ƒç»§æ‰¿è‡ª End</span>
<span class="pl-k">interface</span> <span class="pl-smi">Intermediate3</span> <span class="pl-k">extends</span> <span class="pl-smi">End</span> {
	<span class="pl-smi">Intermediate3</span> <span class="pl-en">word3</span>();
}</pre></div>
<p>å®šä¹‰äº†ä¸Šè¿°è¯­æ³•åï¼Œæˆ‘ä»¬ç°åœ¨å¯ä»¥ç›´æ¥åœ¨ Java ä¸­ä½¿ç”¨æ­¤ DSLã€‚ä»¥ä¸‹æ˜¯æ‰€æœ‰å¯èƒ½çš„ç»“æ„ï¼š</p>
<div class="highlight highlight-source-java"><pre><span class="pl-smi">Start</span> <span class="pl-s1">start</span> = <span class="pl-k">new</span> <span class="pl-smi">StartImpl</span>();<span class="pl-c">// ...</span>

<span class="pl-s1">start</span>.<span class="pl-en">singleWord</span>().<span class="pl-en">end</span>();
<span class="pl-s1">start</span>.<span class="pl-en">parameterisedWord</span>(<span class="pl-s">"abc"</span>).<span class="pl-en">end</span>();

<span class="pl-s1">start</span>.<span class="pl-en">word1</span>().<span class="pl-en">end</span>();
<span class="pl-s1">start</span>.<span class="pl-en">word1</span>().<span class="pl-en">optionalWord</span>().<span class="pl-en">end</span>();

<span class="pl-s1">start</span>.<span class="pl-en">word2</span>().<span class="pl-en">wordChoiceA</span>().<span class="pl-en">end</span>();
<span class="pl-s1">start</span>.<span class="pl-en">word2</span>().<span class="pl-en">wordChoiceB</span>().<span class="pl-en">end</span>();

<span class="pl-s1">start</span>.<span class="pl-en">word3</span>().<span class="pl-en">end</span>();
<span class="pl-s1">start</span>.<span class="pl-en">word3</span>().<span class="pl-en">word3</span>().<span class="pl-en">end</span>();
<span class="pl-s1">start</span>.<span class="pl-en">word3</span>().<span class="pl-en">word3</span>().<span class="pl-en">word3</span>().<span class="pl-en">end</span>();</pre></div>
<p>æœ€æ£’çš„æ˜¯ï¼Œæ‚¨çš„ DSL ç›´æ¥ç”¨ Java ç¼–è¯‘ï¼ä½ å¾—åˆ°ä¸€ä¸ªå…è´¹çš„è§£æå™¨ã€‚æ‚¨è¿˜å¯ä»¥åœ¨ Scalaï¼ˆæˆ– Groovyï¼‰ä¸­ä½¿ç”¨ç›¸åŒçš„è¡¨ç¤ºæ³•æˆ–åœ¨ Scala ä¸­ä½¿ç”¨ç•¥æœ‰ä¸åŒçš„è¡¨ç¤ºæ³•ï¼ˆçœç•¥ç‚¹ <code>.</code> å’Œæ‹¬å· <code>()</code>ï¼‰é‡æ–°ä½¿ç”¨æ­¤ DSLï¼š</p>
<div class="highlight highlight-source-scala"><pre><span class="pl-k">val</span> <span class="pl-smi">start</span> <span class="pl-k">=</span> <span class="pl-c"><span class="pl-c">//</span> ...Â </span>

(start singleWord) end;
(start parameterisedWord <span class="pl-s"><span class="pl-pds">"</span>abc<span class="pl-pds">"</span></span>) end;Â 

(start word1) end;
((start word1) optionalWord) end;Â 

((start word2) wordChoiceA) end;
((start word2) wordChoiceB) end;

(start word3) end;
((start word3) word3) end;
(((start word3) word3) word3) end;</pre></div>
<h2><a id="user-content-å®ä¾‹" class="anchor" aria-hidden="true" href="#å®ä¾‹"><span aria-hidden="true" class="octicon octicon-link"></span></a>å®ä¾‹</h2>
<p>åœ¨ jOOQ æ–‡æ¡£å’Œä»£ç åº“ä¸­å¯ä»¥çœ‹åˆ°ä¸€äº›çœŸå®ä¸–ç•Œçš„ä¾‹å­ã€‚è¿™æ˜¯ä»<a href="https://blog.jooq.org/jooq-meta-a-hard-core-sql-proof-of-concept/" rel="nofollow">ä»¥å‰çš„ä¸€ç¯‡æ–‡ç« </a>ä¸­æ‘˜å½•çš„ä½¿ç”¨ jOOQ åˆ›å»ºçš„ç›¸å½“å¤æ‚çš„ SQL æŸ¥è¯¢ï¼š</p>
<div class="highlight highlight-source-java"><pre><span class="pl-en">create</span>().<span class="pl-en">select</span>(
	<span class="pl-s1">r1</span>.<span class="pl-c1">ROUTINE_NAME</span>,
	<span class="pl-s1">r1</span>.<span class="pl-c1">SPECIFIC_NAME</span>,
	<span class="pl-en">decode</span>()
			.<span class="pl-en">when</span>(<span class="pl-en">exists</span>(<span class="pl-en">create</span>()
				.<span class="pl-en">selectOne</span>()
				.<span class="pl-en">from</span>(<span class="pl-c1">PARAMETERS</span>)
				.<span class="pl-en">where</span>(<span class="pl-smi">PARAMETERS</span>.<span class="pl-c1">SPECIFIC_SCHEMA</span>.<span class="pl-en">equal</span>(<span class="pl-s1">r1</span>.<span class="pl-c1">SPECIFIC_SCHEMA</span>))
				.<span class="pl-en">and</span>(<span class="pl-smi">PARAMETERS</span>.<span class="pl-c1">SPECIFIC_NAME</span>.<span class="pl-en">equal</span>(<span class="pl-s1">r1</span>.<span class="pl-c1">SPECIFIC_NAME</span>))
				.<span class="pl-en">and</span>(<span class="pl-en">upper</span>(<span class="pl-smi">PARAMETERS</span>.<span class="pl-c1">PARAMETER_MODE</span>).<span class="pl-en">notEqual</span>(<span class="pl-s">"IN"</span>))),
					<span class="pl-en">val</span>(<span class="pl-s">"void"</span>))
			.<span class="pl-en">otherwise</span>(<span class="pl-s1">r1</span>.<span class="pl-c1">DATA_TYPE</span>).<span class="pl-en">as</span>(<span class="pl-s">"data_type"</span>),
	<span class="pl-s1">r1</span>.<span class="pl-c1">NUMERIC_PRECISION</span>,
	<span class="pl-s1">r1</span>.<span class="pl-c1">NUMERIC_SCALE</span>,
	<span class="pl-s1">r1</span>.<span class="pl-c1">TYPE_UDT_NAME</span>,
	<span class="pl-en">decode</span>().<span class="pl-en">when</span>(
	<span class="pl-en">exists</span>(
		<span class="pl-en">create</span>().<span class="pl-en">selectOne</span>()
				.<span class="pl-en">from</span>(<span class="pl-s1">r2</span>)
				.<span class="pl-en">where</span>(<span class="pl-s1">r2</span>.<span class="pl-c1">ROUTINE_SCHEMA</span>.<span class="pl-en">equal</span>(<span class="pl-en">getSchemaName</span>()))
				.<span class="pl-en">and</span>(<span class="pl-s1">r2</span>.<span class="pl-c1">ROUTINE_NAME</span>.<span class="pl-en">equal</span>(<span class="pl-s1">r1</span>.<span class="pl-c1">ROUTINE_NAME</span>))
				.<span class="pl-en">and</span>(<span class="pl-s1">r2</span>.<span class="pl-c1">SPECIFIC_NAME</span>.<span class="pl-en">notEqual</span>(<span class="pl-s1">r1</span>.<span class="pl-c1">SPECIFIC_NAME</span>))),
		<span class="pl-en">create</span>().<span class="pl-en">select</span>(<span class="pl-en">count</span>())
				.<span class="pl-en">from</span>(<span class="pl-s1">r2</span>)
				.<span class="pl-en">where</span>(<span class="pl-s1">r2</span>.<span class="pl-c1">ROUTINE_SCHEMA</span>.<span class="pl-en">equal</span>(<span class="pl-en">getSchemaName</span>()))
				.<span class="pl-en">and</span>(<span class="pl-s1">r2</span>.<span class="pl-c1">ROUTINE_NAME</span>.<span class="pl-en">equal</span>(<span class="pl-s1">r1</span>.<span class="pl-c1">ROUTINE_NAME</span>))
				.<span class="pl-en">and</span>(<span class="pl-s1">r2</span>.<span class="pl-c1">SPECIFIC_NAME</span>.<span class="pl-en">lessOrEqual</span>(<span class="pl-s1">r1</span>.<span class="pl-c1">SPECIFIC_NAME</span>)).<span class="pl-en">asField</span>())
	.<span class="pl-en">as</span>(<span class="pl-s">"overload"</span>))
.<span class="pl-en">from</span>(<span class="pl-s1">r1</span>)
.<span class="pl-en">where</span>(<span class="pl-s1">r1</span>.<span class="pl-c1">ROUTINE_SCHEMA</span>.<span class="pl-en">equal</span>(<span class="pl-en">getSchemaName</span>()))
.<span class="pl-en">orderBy</span>(<span class="pl-s1">r1</span>.<span class="pl-c1">ROUTINE_NAME</span>.<span class="pl-en">asc</span>())
.<span class="pl-en">fetch</span>()</pre></div>
<p>è¿™æœ‰å¦ä¸€ä¸ªä¾‹å­ï¼Œçœ‹èµ·æ¥å¯¹æˆ‘å¾ˆæœ‰å¸å¼•åŠ›ã€‚å®ƒç§°ä¸º jRTFï¼Œç”¨äºä»¥ fluent çš„é£æ ¼åœ¨ Java ä¸­åˆ›å»º RTF æ–‡æ¡£ï¼š</p>
<div class="highlight highlight-source-java"><pre><span class="pl-en">rtf</span>()
	.<span class="pl-en">header</span>(
			<span class="pl-en">color</span>( <span class="pl-c1">0xff</span>, <span class="pl-c1">0</span>, <span class="pl-c1">0</span> ).<span class="pl-en">at</span>( <span class="pl-c1">0</span> ),
			<span class="pl-en">color</span>( <span class="pl-c1">0</span>, <span class="pl-c1">0xff</span>, <span class="pl-c1">0</span> ).<span class="pl-en">at</span>( <span class="pl-c1">1</span> ),
			<span class="pl-en">color</span>( <span class="pl-c1">0</span>, <span class="pl-c1">0</span>, <span class="pl-c1">0xff</span> ).<span class="pl-en">at</span>( <span class="pl-c1">2</span> ),
			<span class="pl-en">font</span>( <span class="pl-s">"Calibri"</span> ).<span class="pl-en">at</span>( <span class="pl-c1">0</span> ) )
	.<span class="pl-en">section</span>(
			<span class="pl-en">p</span>( <span class="pl-en">font</span>( <span class="pl-c1">1</span>, <span class="pl-s">"Second paragraph"</span> ) ),
			<span class="pl-en">p</span>( <span class="pl-en">color</span>( <span class="pl-c1">1</span>, <span class="pl-s">"green"</span> ) )
	)
).<span class="pl-s1">out</span>( <span class="pl-s1">out</span> );</pre></div>
<h2><a id="user-content-æ€»ç»“" class="anchor" aria-hidden="true" href="#æ€»ç»“"><span aria-hidden="true" class="octicon octicon-link"></span></a>æ€»ç»“</h2>
<p>åœ¨è¿‡å»çš„ 7 å¹´é‡Œï¼ŒFluent API ä¸€ç›´æ˜¯ä¸€ç§ç‚’ä½œã€‚ Martin Fowler å·²ç»æˆä¸ºä¸€ä¸ªè¢«å¤§é‡å¼•ç”¨çš„äººå¹¶è·å¾—äº†å¤§éƒ¨åˆ†çš„è£èª‰ï¼Œå³ä½¿ä»¥å‰æœ‰ fluent APIsã€‚åœ¨ <code>java.lang.StringBuffer</code> ä¸­å¯ä»¥çœ‹åˆ° Java æœ€å¤è€çš„ fluent API ä¹‹ä¸€ï¼Œå®ƒå…è®¸å°†ä»»æ„å¯¹è±¡é™„åŠ åˆ°å­—ç¬¦ä¸²ã€‚ä½†æ˜¯ fluent API çš„æœ€å¤§å¥½å¤„æ˜¯å®ƒèƒ½å¤Ÿè½»æ¾åœ°å°† <strong>external DSL</strong> æ˜ å°„åˆ° Java å¹¶å°†å®ƒä»¬å®ç°ä¸ºä»»æ„å¤æ‚åº¦çš„ <strong>internal DSL</strong> ã€‚</p>
]]></description>
                    <pubDate>Sun, 15 Jan 2023 03:34:25 GMT</pubDate>
                        <guid isPermaLink="false">/2023/01/30</guid>
                <link>/2023/01/30</link>
                    <author><![CDATA[bxb100]]></author>
                        <category>DEV</category>
            </item>
            <item>
                <title><![CDATA[éº¦å½“åŠ³çš„äº‹ä»¶é©±åŠ¨æ¶æ„]]></title>
                    <description><![CDATA[<blockquote>
<p>è¯‘ <a href="https://blog.quastor.org/p/mcdonalds-uses-event-driven-architectures" rel="nofollow">https://blog.quastor.org/p/mcdonalds-uses-event-driven-architectures</a></p>
</blockquote>
<p>è¿‡å»å‡ å¹´, éº¦å½“åŠ³ä¸€ç›´å¤§åŠ›æŠ•èµ„æ„å»ºå’Œæ¨å¹¿ä»–ä»¬çš„ APP; é¡¾å®¢å¯ä»¥é€šè¿‡å®ƒæ¥ä¸‹å•, è·å–ä¼˜æƒ åˆ¸, æŸ¥çœ‹è¥å…»ä¿¡æ¯ç­‰.</p>
<p>å› æ­¤, éº¦å½“åŠ³ 2021 å¹´æœ‰è¶…è¿‡ 2400 ä¸‡æ¬¡ä¸‹è½½é‡, æˆä¸ºç¾å›½ä¸‹è½½é‡æœ€å¤šçš„é¤å…ç±» app. æ˜Ÿå·´å…‹ç´§éšå…¶å, å»å¹´ä¸‹è½½é‡ä¸º 1200 ä¸‡æ¬¡.</p>
<p>éº¦å½“åŠ³ä¾èµ–äº‹ä»¶é©±åŠ¨æ¶æ„ (EDAs) æ¥æ”¯æŒä»–ä»¬åç«¯çš„ä¼—å¤šæœåŠ¡. æ¯”å¦‚è¯´, å‘é€è¥é”€ä¿¡æ¯ (äº¤æ˜“æˆ–ä¿ƒé”€) æˆ–è€…æä¾›æ‰‹æœºè®¢å•çš„å¤„ç†è¿›åº¦.</p>
<p>éº¦å½“åŠ³è¿‡å»é‡åˆ°çš„ä¸€ä¸ªé—®é¢˜æ˜¯ç¼ºä¹åˆ›å»º EDA çš„æ ‡å‡†æ–¹æ³•(æœ€ä½³å®è·µ). ä»–ä»¬çœ‹åˆ°äº†ä¸åŒå›¢é˜Ÿä½¿ç”¨çš„å„ç§æŠ€æœ¯å’Œæ¨¡å¼, å¯¼è‡´ä¸ä¸€è‡´å’Œä¸å¿…è¦çš„å¤æ‚æ€§.</p>
<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜, å·¥ç¨‹å¸ˆåˆ›å»ºäº†ç»Ÿä¸€äº‹ä»¶å¹³å° (unified eventing platform), å…¬å¸å†…çš„ä¸åŒç»„ç»‡èƒ½å¤Ÿåœ¨æ­¤ä¹‹ä¸Šæ„å»ºè‡ªå·±çš„äº‹ä»¶ç³»ç»Ÿ. è¿™é™ä½äº†å¯åŠ¨å’Œç»´æŠ¤è¿™äº›æœåŠ¡çš„å®æ–½å’Œæ“ä½œå¤æ‚æ€§, åŒæ—¶è¿˜ç¡®ä¿äº†ä¸€è‡´æ€§.</p>
<p>Vamshi Krishna Komuravalli æ˜¯éº¦å½“åŠ³çš„é¦–å¸­æ¶æ„å¸ˆ, ä»–å†™äº†ä¸€ç¯‡å…³äºéº¦å½“åŠ³ç»Ÿä¸€äº‹ä»¶å¹³å°æ¶æ„çš„ç²¾å½©åšæ–‡</p>
<h2><a id="user-content-æ€»ç»“" class="anchor" aria-hidden="true" href="#æ€»ç»“"><span aria-hidden="true" class="octicon octicon-link"></span></a>æ€»ç»“</h2>
<p>éº¦å½“åŠ³æƒ³è¦æ„å»ºç»Ÿä¸€çš„äº‹ä»¶å¹³å°æ¥ç®¡ç†å…¬å¸å†…ä¸åŒç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ä¹‹é—´çš„é€šä¿¡.</p>
<p>ä»–ä»¬å¸Œæœ›è¿™ä¸ªå¹³å°æ˜¯å¯å‡ç¼©çš„, é«˜å¯ç”¨, æ€§èƒ½å¥½, å®‰å…¨å’Œå¯é çš„. ä»–ä»¬è¿˜å¸Œæœ›åœ¨å¦‚ä½•å®Œæˆé”™è¯¯å¤„ç†ã€ç›‘æ§å’Œæ¢å¤ç­‰äº‹æƒ…ä¸Šä¿æŒä¸€è‡´.</p>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/f5f73fb6188f5738aa628ff9405eddcbef2d5ce222cf0cba74f7c3d9bfb84c67/68747470733a2f2f6d656469612e626565686969762e636f6d2f63646e2d6367692f696d6167652f666f726d61743d6175746f2c6f6e6572726f723d72656469726563742f75706c6f6164732f61737365742f66696c652f64633535393235652d626132312d343738622d393631612d6661346531316433366238382f315f726e6c6b3536444e376f665f6159377550665a6a63512e706e67"><img src="https://camo.githubusercontent.com/f5f73fb6188f5738aa628ff9405eddcbef2d5ce222cf0cba74f7c3d9bfb84c67/68747470733a2f2f6d656469612e626565686969762e636f6d2f63646e2d6367692f696d6167652f666f726d61743d6175746f2c6f6e6572726f723d72656469726563742f75706c6f6164732f61737365742f66696c652f64633535393235652d626132312d343738622d393631612d6661346531316433366238382f315f726e6c6b3536444e376f665f6159377550665a6a63512e706e67" alt="f1" data-canonical-src="https://media.beehiiv.com/cdn-cgi/image/format=auto,onerror=redirect/uploads/asset/file/dc55925e-ba21-478b-961a-fa4e11d36b88/1_rnlk56DN7of_aY7uPfZjcQ.png" style="max-width: 100%;"></a></p>
<p>è¿™æ˜¯ä»–ä»¬ä¸ºäº†å¤„ç†è¿™äº›æ„å»ºçš„ç»Ÿä¸€äº‹ä»¶å¹³å°çš„æ¶æ„å›¾:</p>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/c6c04fc0fc40388ae060698ac32416d8fb935b4751669539ff287e5498c6905f/68747470733a2f2f6d69726f2e6d656469756d2e636f6d2f6d61782f313430302f312a67434f6e6d4871346a584e6a5358384a70304e674f412e77656270"><img src="https://camo.githubusercontent.com/c6c04fc0fc40388ae060698ac32416d8fb935b4751669539ff287e5498c6905f/68747470733a2f2f6d69726f2e6d656469756d2e636f6d2f6d61782f313430302f312a67434f6e6d4871346a584e6a5358384a70304e674f412e77656270" alt="f2" data-canonical-src="https://miro.medium.com/max/1400/1*gCOnmHq4jXNjSX8Jp0NgOA.webp" style="max-width: 100%;"></a></p>
<ul>
<li>
<strong>Event Broker</strong>: å®ƒæ˜¯å¹³å°çš„æ ¸å¿ƒ, è´Ÿè´£ç®¡ç†ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ä¹‹é—´çš„é€šä¿¡. éº¦å½“åŠ³ä½¿ç”¨ AWS, å› æ­¤ä»–ä»¬ä½¿ç”¨ AWS Managed Streaming for Kafka (MSK) ä½œä¸ºäº‹ä»¶ä»£ç†.</li>
<li>
<strong>Schema Registry</strong>: å·¥ç¨‹å¸ˆå¸Œæœ›ä¸ºäº‹ä»¶å®æ–½ç»Ÿä¸€çš„æ¶æ„, ä»¥ç¡®ä¿ä¸‹æ¸¸æ¶ˆè´¹è€…çš„æ•°æ®è´¨é‡. Schema Registry åŒ…å«æ‰€æœ‰äº‹ä»¶æ¨¡å¼, ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…å°†åœ¨å‘å¸ƒ/æ¶ˆè´¹æ—¶æ£€æŸ¥æ³¨å†Œè¡¨ä»¥éªŒè¯äº‹ä»¶.</li>
<li>
<strong>Standby Event Store</strong>: å¦‚æœ kafka æ— æ³•ä½¿ç”¨, ç”Ÿäº§è€…å°†ä¼šå‘é€ä»–ä»¬çš„äº‹ä»¶åˆ°å¤‡ç”¨äº‹ä»¶å­˜å‚¨åº“ä¸­(DynamoDB). ä¸€ä¸ª AWS çš„ Lambda function å°†ä¼šä»ä¸­å°è¯•é‡æ–°å‘é€æˆ–å‘å¸ƒåˆ° kafka.</li>
<li>
<strong>Custom SDKs</strong>: æƒ³è¦ä½¿ç”¨ Eventing Platform çš„å·¥ç¨‹å¸ˆå¯ä»¥ä½¿ç”¨ SDK. äº‹ä»¶å¹³å°å›¢é˜Ÿä¸ºç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…æ„å»ºäº†ç‰¹å®šè¯­è¨€çš„åº“æ¥ç¼–å†™å’Œè¯»å–äº‹ä»¶. æ‰§è¡Œæ¨¡å¼éªŒè¯ã€é‡è¯•å’Œé”™è¯¯å¤„ç†æ˜¯é€šè¿‡ SDK æŠ½è±¡å‡ºæ¥çš„.</li>
</ul>
<p>åœ¨äº‹ä»¶å¹³å°ä¸­äº‹ä»¶æ´»åŠ¨çš„å·¥ä½œæµç¨‹</p>
<ol>
<li>å·¥ç¨‹å¸ˆå®šä¹‰äº‹ä»¶çš„æ¨¡å¼å¹¶å°†å…¶æ³¨å†Œåˆ°æ¨¡å¼æ³¨å†Œè¡¨ä¸­</li>
<li>éœ€è¦ç”Ÿäº§äº‹ä»¶çš„åº”ç”¨ä½¿ç”¨ç”Ÿäº§è€…SDKå‘å¸ƒäº‹ä»¶</li>
<li>SDK æ‰§è¡Œæ¶æ„éªŒè¯ä»¥ç¡®ä¿äº‹ä»¶éµå¾ªæ¶æ„</li>
<li>å¦‚æœéªŒè¯é€šè¿‡, SDK ä¼šå°†äº‹ä»¶å‘å¸ƒåˆ°ä¸»è¦ topic ä¸­</li>
<li>å¦‚æœ SDK åœ¨å‘å¸ƒåˆ°ä¸»è¦ topic æ—¶é‡åˆ°é”™è¯¯, åˆ™ä¼šå°†äº‹ä»¶è·¯ç”±åˆ°è¯¥ç”Ÿäº§è€…çš„ <a href="https://en.wikipedia.org/wiki/Dead_letter_queue" rel="nofollow">dead-letter topic</a>. ä¸€ä¸ªç®¡ç†ç¨‹åºå…è®¸å·¥ç¨‹å¸ˆä¿®å¤è¿™äº›äº‹ä»¶çš„ä»»ä½•é”™è¯¯(<code>å¦‚ä½•ä¿®å¤?</code>).</li>
<li>å¦‚æœ SDK é‡åˆ° Kafka é”™è¯¯, åˆ™äº‹ä»¶å°†å†™å…¥ DynamoDB æ•°æ®åº“ä¸­. Lambda å‡½æ•°ç¨åå°†é‡è¯•å°†è¿™äº›äº‹ä»¶å‘é€åˆ° Kafka.</li>
<li>æ¶ˆè´¹è€…æ¶ˆè´¹æ¥è‡ª Kafka çš„äº‹ä»¶</li>
</ol>
<h2><a id="user-content-schema-registry" class="anchor" aria-hidden="true" href="#schema-registry"><span aria-hidden="true" class="octicon octicon-link"></span></a>Schema Registry</h2>
<p>ä¸ºäº†ç¡®ä¿æ•°æ®å®Œæ•´æ€§, éº¦å½“åŠ³ä¾é æ¨¡å¼æ³¨å†Œè¡¨å¯¹äº‹ä»¶å¹³å°å‘å¸ƒå’Œæ¶ˆè´¹çš„æ‰€æœ‰äº‹ä»¶å¼ºåˆ¶æ‰§è¡Œæ•°æ®å¥‘çº¦.</p>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/8f1cddbc07599a742d819338c0feeb091c06dbf5b83ea0daf0622e0d23630e45/68747470733a2f2f6d69726f2e6d656469756d2e636f6d2f6d61782f313430302f312a4c7656324a3670634e64536a526630675341347941772e77656270"><img src="https://camo.githubusercontent.com/8f1cddbc07599a742d819338c0feeb091c06dbf5b83ea0daf0622e0d23630e45/68747470733a2f2f6d69726f2e6d656469756d2e636f6d2f6d61782f313430302f312a4c7656324a3670634e64536a526630675341347941772e77656270" alt="f3" data-canonical-src="https://miro.medium.com/max/1400/1*LvV2J6pcNdSjRf0gSA4yAw.webp" style="max-width: 100%;"></a></p>
<p>å½“ç”Ÿäº§è€…å‘å¸ƒæ¶ˆæ¯, æ¶ˆæ¯åœ¨å¼€å¤´åŒ…å«ç‰ˆæœ¬çš„å­—ç¬¦ä¿¡æ¯.</p>
<p>ä¹‹å, å½“æ¶ˆæ¯è¢«æ¶ˆè´¹æ—¶, æ¶ˆè´¹è€…å¯ä»¥é€šè¿‡å­—ç¬¦æ¥å†³å®šä»€ä¹ˆç‰ˆæœ¬çš„æ¨¡å¼åº”å½“è¢«éµå¾ª.</p>
<h2><a id="user-content-åŸºäºåŸŸçš„åˆ†ç‰‡å’Œè‡ªåŠ¨ç¼©æ”¾" class="anchor" aria-hidden="true" href="#åŸºäºåŸŸçš„åˆ†ç‰‡å’Œè‡ªåŠ¨ç¼©æ”¾"><span aria-hidden="true" class="octicon octicon-link"></span></a>åŸºäºåŸŸçš„åˆ†ç‰‡å’Œè‡ªåŠ¨ç¼©æ”¾</h2>
<p>äº‹ä»¶æ ¹æ®å…¶åŸŸè¢«åˆ†ç‰‡åˆ°ä¸åŒçš„ MSK é›†ç¾¤ä¸­. è¿™ä½¿å¾—è‡ªåŠ¨ç¼©æ”¾æ›´å®¹æ˜“, å› ä¸ºä½ å¯ä»¥ä¸ºè´Ÿè½½è¾ƒé‡çš„åŸŸç¼©å¢åŠ é›†ç¾¤.</p>
<p>ä¸ºäº†åº”å¯¹è¯»/å†™è´Ÿè½½çš„å¢åŠ , äº‹ä»¶å¹³å°å›¢é˜Ÿæ·»åŠ äº†é€»è¾‘æ¥ç›‘è§† MSK çš„ CPU æŒ‡æ ‡, å¹¶è§¦å‘è‡ªåŠ¨ç¼©æ”¾åŠŸèƒ½ä»¥åœ¨è´Ÿè½½è¿‡é«˜æ—¶å‘é›†ç¾¤æ·»åŠ é¢å¤–çš„ broker æœºå™¨. ä¸ºäº†å¢åŠ ç£ç›˜ç©ºé—´ï¼ŒMSK å…·æœ‰è‡ªåŠ¨ç¼©æ”¾å­˜å‚¨çš„<a href="https://docs.aws.amazon.com/msk/latest/developerguide/msk-autoexpand.html" rel="nofollow">å†…ç½®åŠŸèƒ½</a>.</p>
<p>æŸ¥çœ‹æ›´å¤šä¿¡æ¯, ä½ å¯ä»¥é˜…è¯»å®Œæ•´çš„æ–‡ç« : <a href="https://medium.com/mcdonalds-technical-blog/behind-the-scenes-mcdonalds-event-driven-architecture-51a6542c0d86" rel="nofollow">è¿™é‡Œ</a> å’Œ <a href="https://medium.com/mcdonalds-technical-blog/mcdonalds-event-driven-architecture-the-data-journey-and-how-it-works-4591d108821f" rel="nofollow">è¿™é‡Œ</a></p>
]]></description>
                    <pubDate>Sat, 14 Jan 2023 07:12:19 GMT</pubDate>
                        <guid isPermaLink="false">/2022/12/27</guid>
                <link>/2022/12/27</link>
                    <author><![CDATA[bxb100]]></author>
                        <category>DEV</category>
                        <category>quastor</category>
            </item>
            <item>
                <title><![CDATA[Remember, Although life ignore you, I still love you]]></title>
                    <description><![CDATA[<p>æ€æƒ³æ˜¯åˆ«äººçš„æ„è§, ç”Ÿæ´»æ˜¯åˆ«äººçš„æ¨¡ä»¿, æƒ…æ„Ÿæ˜¯åˆ«äººçš„å¼•è¿°.  --- å¥§æ–¯å¡Â·ç‹å°”å¾·</p>
]]></description>
                    <pubDate>Mon, 09 Jan 2023 11:00:41 GMT</pubDate>
                        <guid isPermaLink="false">/2021/12/3</guid>
                <link>/2021/12/3</link>
                    <author><![CDATA[bxb100]]></author>
                        <category>æ‘˜å½•</category>
            </item>
            <item>
                <title><![CDATA[ç³»ç»Ÿè®¾è®¡]]></title>
                    <description><![CDATA[ç³»ç»Ÿè®¾è®¡]]></description>
                    <pubDate>Sat, 07 Jan 2023 16:51:39 GMT</pubDate>
                        <guid isPermaLink="false">/2023/01/29</guid>
                <link>/2023/01/29</link>
                    <author><![CDATA[bxb100]]></author>
                        <category>Horizon</category>
            </item>
            <item>
                <title><![CDATA[ä¸€å¥]]></title>
                    <description><![CDATA[<p>æ‰ä¸è¶³åˆ™å¤šè°‹ï¼Œè¯†ä¸è¶³åˆ™å¤šè™‘ï¼Œ
å¨ä¸è¶³åˆ™å¤šæ€’ï¼Œä¿¡ä¸è¶³åˆ™å¤šè¨€ï¼Œ
å‹‡ä¸è¶³åˆ™å¤šåŠ³ï¼Œæ˜ä¸è¶³åˆ™å¤šå¯Ÿï¼Œ
ç†ä¸è¶³åˆ™å¤šè¾©ï¼Œæƒ…ä¸è¶³åˆ™å¤šä»ªã€‚</p>
<p align="right">- é™ˆå®è°‹ã€Šå…»æ­£é—è§„ã€‹ </p>
]]></description>
                    <pubDate>Wed, 04 Jan 2023 10:28:41 GMT</pubDate>
                        <guid isPermaLink="false">/2022/08/22</guid>
                <link>/2022/08/22</link>
                    <author><![CDATA[bxb100]]></author>
                        <category>æ‘˜å½•</category>
            </item>
            <item>
                <title><![CDATA[Java generics with overloading]]></title>
                    <description><![CDATA[<p>The scenario:</p>
<div class="highlight highlight-source-java"><pre>    <span class="pl-k">public</span> <span class="pl-k">static</span> <span class="pl-smi">void</span> <span class="pl-s1">test1</span>(<span class="pl-smi">Object</span>... <span class="pl-s1">args</span>) {

    }

    <span class="pl-k">public</span> <span class="pl-k">static</span> <span class="pl-smi">void</span> <span class="pl-s1">test1</span>(<span class="pl-smi">List</span>&lt;<span class="pl-smi">Object</span>&gt; <span class="pl-s1">args</span>) {

    }</pre></div>
<p>there are two overloading method, but when you're using</p>
<div class="highlight highlight-source-java"><pre> <span class="pl-smi">List</span>&lt;<span class="pl-smi">Long</span>&gt; <span class="pl-s1">list1</span> = <span class="pl-k">new</span> <span class="pl-smi">ArrayList</span>&lt;&gt; <span class="pl-s1">test1</span>(<span class="pl-s1">objects</span>);
 <span class="pl-en">test1</span>(<span class="pl-s1">list1</span>);</pre></div>
<p>It's always using the first method <code>test1(Object... args)</code>, but when using <code>List&lt;Object&gt; list2</code> the executor is different, It's too wired</p>
<hr>
<p>Some document identified</p>
<blockquote>
<p>The example above shows why generics and arrays don't mix well together. <strong>An array is what is called reifiable type -- a type where full type information is available during run-time.</strong> It is because Java array is reifiable that the Java run-time can check what we store into the array matches the type of the array and throw an <code>ArrayStoreException </code> at us if there is a mismatch. <strong>Java generics, however, is not reifiable due to type erasure</strong>. Java designers have decided not to mix the two.<sup><a href="#fn-1" id="user-content-fnref-1" data-footnote-ref="">1</a></sup></p>
</blockquote>
<blockquote>
<p>the <code>List&lt;?&gt;</code> means you can assign any type of List to it and <code>List&lt;Object&gt;</code> means you can store any type of object into it.<sup><a href="#fn-2" id="user-content-fnref-2" data-footnote-ref="">2</a></sup></p>
</blockquote>
<p>Sure, it's not the same question, but I think some conception can go to the same destination</p>
<p>I think the runtime compiler design to obey this:</p>
<ol>
<li>
<code>List</code> same as <code>List&lt;Object&gt;</code>
</li>
<li>
<code>List&lt;Type&gt; list1</code> with generics can accept any type</li>
<li>
<code>List&lt;Object&gt;</code> means just accept <code>List&lt;Object&gt;</code> or <code>List</code>
</li>
<li>
<code>List&lt;T&gt; list1</code> calling varargs method equals <code>new Object[]{ list1 }</code>
</li>
<li>Using <code>test1(Collections.singletonList(x))</code> equals <code>test1(new ArrayList&lt;Object&gt;())</code>
</li>
</ol>
<hr>
<p>So this is the check trick problem</p>
<section data-footnotes="">
<ol>
<li id="user-content-fn-1">
<p><a href="https://nus-cs2030s.github.io/2021-s2/21-erasure.html" rel="nofollow">https://nus-cs2030s.github.io/2021-s2/21-erasure.html</a> <a href="#fnref-1" data-footnote-backref="" aria-label="Back to content"><g-emoji class="g-emoji" alias="leftwards_arrow_with_hook" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/21a9.png">â†©</g-emoji></a></p>
</li>
<li id="user-content-fn-2">
<p><a href="https://www.java67.com/2021/08/real-difference-between-list-and-list.html" rel="nofollow">https://www.java67.com/2021/08/real-difference-between-list-and-list.html</a> <a href="#fnref-2" data-footnote-backref="" aria-label="Back to content"><g-emoji class="g-emoji" alias="leftwards_arrow_with_hook" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/21a9.png">â†©</g-emoji></a></p>
</li>
</ol>
</section>
]]></description>
                    <pubDate>Tue, 13 Dec 2022 03:46:04 GMT</pubDate>
                        <guid isPermaLink="false">/2022/07/20</guid>
                <link>/2022/07/20</link>
                    <author><![CDATA[bxb100]]></author>
                        <category>Archive</category>
                        <category>DEV</category>
            </item>
            <item>
                <title><![CDATA[ä½¿ç”¨ N_m3u8DL-CLI ç®€åŒ–ä¸‹è½½ m3u8 æµç¨‹]]></title>
                    <description><![CDATA[<p><a href="https://github.com/nilaoda/N_m3u8DL-CLI">N_m3u8DL-CLI</a> æ˜¯ä¸€ä¸ªæ¯”è¾ƒå¥½ç”¨çš„ m3u8 ä¸‹è½½å·¥å…·, ä½†æ˜¯å®ƒæ˜¯ NET å†™æˆçš„, æˆ‘æ‡’å¾—æ”¹æˆ JAVA, æƒ³ç€ç™½å«– GitHub Action æ¥ä¸­è½¬ä¸‹è½½</p>
<p>å†™äº†ä¸ªè„šæœ¬ç›´æ¥ re é¡µé¢ä¸­ m3u8 åç¼€è¿æ¥, ç„¶åè°ƒç”¨ CLI ä¸‹è½½, å¯ä»¥ç›´æ¥æ”¾åœ¨ release ä¸­æˆ–è€…ä¼ åˆ° webdav ä¸­, æ„Ÿè§‰æ›´å®‰å…¨äº† <g-emoji class="g-emoji" alias="rofl" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f923.png">ğŸ¤£</g-emoji></p>
<p>å½“ç„¶, å¦‚æœæ˜¯åœ¨ win æœºä¸Š, é‚£ä¹ˆç›´æ¥ execute ps1 æ›´ç®€å•</p>
<p><a href="https://github.com/bxb100/OSS-Config/blob/main/Win/execute.ps1"><g-emoji class="g-emoji" alias="point_right" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f449.png">ğŸ‘‰</g-emoji> è„šæœ¬åœ°å€</a></p>
<p>å‚æ•°:</p>
<ol>
<li>
<code>-URI</code>: å‚æ•°å”¯ä¸€, é»˜è®¤ä¸º URI, å¦‚æœå‚æ•°ä¸ºç©º, é»˜è®¤ä» env ç¯å¢ƒå˜é‡ä¸­å–å€¼, æ‰€ä»¥å¡å€¼çš„æ—¶å€™éœ€è¦ <code>$env:xxx</code>
</li>
<li>
<code>-Proxy</code>: ä»£ç†åœ°å€</li>
<li>
<code>-Extra</code>: N_m3u8DL-CLI å…¶å®ƒå‚æ•°, å½¢å¦‚ <code>'--saveName filename --timeOut 1000'</code> æ³¨æ„å•å¼•å·å­—ç¬¦ä¸²ä¼ å…¥</li>
</ol>
]]></description>
                    <pubDate>Thu, 13 Oct 2022 11:10:23 GMT</pubDate>
                        <guid isPermaLink="false">/2022/04/13</guid>
                <link>/2022/04/13</link>
                    <author><![CDATA[bxb100]]></author>
            </item>
            <item>
                <title><![CDATA[github action ç›¸å…³ä¿¡æ¯]]></title>
                    <description><![CDATA[<ul>
<li><a href="https://docs.github.com/en/repositories/releasing-projects-on-github/automatically-generated-release-notes">ç”Ÿæˆ release log automatically-generated-release-notes</a></li>
<li><a href="#issuecomment-1008555315">Anyway to check the error message and retry?</a></li>
<li><a href="#issuecomment-1008555105">è¾“å…¥è¾“å‡ºå¤šè¡Œ</a></li>
<li><a href="#issuecomment-1275587834">å¦‚ä½•ä¸Šä¼ å¯æ‰§è¡Œæ–‡ä»¶åˆ° release ä¸­ (draft)</a></li>
<li>action ä¸å†å…è®¸ if ä¸­ä½¿ç”¨ secrets å‚æ•°è¿›è¡Œåˆ¤æ–­<sup><a href="#fn-1" id="user-content-fnref-1" data-footnote-ref="">1</a></sup><sup><a href="#fn-2" id="user-content-fnref-2" data-footnote-ref="">2</a></sup>
</li>
</ul>
<section data-footnotes="">
<ol>
<li id="user-content-fn-1">
<p><a href="https://docs.github.com/en/actions/security-guides/encrypted-secrets#:~:text=Secrets%20cannot%20be%20directly%20referenced%20in%20if%3A%20conditionals.%20Instead%2C%20consider%20setting%20secrets%20as%20job%2Dlevel%20environment%20variables%2C%20then%20referencing%20the%20environment%20variables%20to%20conditionally%20run%20steps%20in%20the%20job">https://docs.github.com/en/actions/security-guides/encrypted-secrets#:~:text=Secrets%20cannot%20be%20directly%20referenced%20in%20if%3A%20conditionals.%20Instead%2C%20consider%20setting%20secrets%20as%20job%2Dlevel%20environment%20variables%2C%20then%20referencing%20the%20environment%20variables%20to%20conditionally%20run%20steps%20in%20the%20job</a>. <a href="#fnref-1" data-footnote-backref="" aria-label="Back to content"><g-emoji class="g-emoji" alias="leftwards_arrow_with_hook" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/21a9.png">â†©</g-emoji></a></p>
</li>
<li id="user-content-fn-2">
<p><a href="https://docs.github.com/en/actions/using-workflows/workflow-syntax-for-github-actions#example-using-secrets">https://docs.github.com/en/actions/using-workflows/workflow-syntax-for-github-actions#example-using-secrets</a> <a href="#fnref-2" data-footnote-backref="" aria-label="Back to content"><g-emoji class="g-emoji" alias="leftwards_arrow_with_hook" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/21a9.png">â†©</g-emoji></a></p>
</li>
</ol>
</section>
]]></description>
                    <pubDate>Wed, 12 Oct 2022 05:05:49 GMT</pubDate>
                        <guid isPermaLink="false">/2021/12/7</guid>
                <link>/2021/12/7</link>
                    <author><![CDATA[bxb100]]></author>
                        <category>API</category>
            </item>
            <item>
                <title><![CDATA[NIO å’Œ Reactor ç†è§£(å¾…è¡¥å……)]]></title>
                    <description><![CDATA[<p>NIO: NIO stands for non-blocking I/O</p>
<p>It work looks like this:
<a target="_blank" rel="noopener noreferrer nofollow" href="https://user-images.githubusercontent.com/20685961/192730676-ea8e3234-4b51-4b16-8dcd-27a70c669a45.png"><img src="https://user-images.githubusercontent.com/20685961/192730676-ea8e3234-4b51-4b16-8dcd-27a70c669a45.png" alt="image" style="max-width: 100%;"></a></p>
<p>NIO è¿™æ˜¯ä¸ªçº¿ç¨‹æ¨¡å‹, é€šå¸¸ç”¨äº socket è¿æ¥, å‡å°‘çº¿ç¨‹æ•°é‡</p>
<p>Reactor åº“çš„è®¾è®¡ç›®çš„å°±æ˜¯åœ¨æ„å»ºå¼‚æ­¥ç®¡é“æ—¶é¿å…<strong>å›è°ƒåœ°ç‹±</strong>å’Œ<strong>æ·±å±‚åµŒå¥—ä»£ç </strong>, å±äº NIO çš„æ‹“å±•</p>
<p>å¯¹äº Loom å‡ºæ¥å, è¿™äº›éƒ½æ˜¯å¯ä»¥å¿½ç•¥çš„</p>
<h3><a id="user-content-reference" class="anchor" aria-hidden="true" href="#reference"><span aria-hidden="true" class="octicon octicon-link"></span></a>Reference</h3>
<ul>
<li>
<p><a href="https://www.baeldung.com/spring-webflux-concurrency" rel="nofollow">https://www.baeldung.com/spring-webflux-concurrency</a></p>
</li>
<li>
<p><a href="https://stackoverflow.com/questions/70174468/project-loom-what-happens-when-virtual-thread-makes-a-blocking-system-call" rel="nofollow">https://stackoverflow.com/questions/70174468/project-loom-what-happens-when-virtual-thread-makes-a-blocking-system-call</a></p>
</li>
<li>
<p><a href="https://www.infoq.com/articles/java-virtual-threads/" rel="nofollow">https://www.infoq.com/articles/java-virtual-threads/</a> è™šæ‹Ÿçº¿ç¨‹æ›´é€‚åˆ IO å¯†é›†å‹çš„ä»»åŠ¡</p>
</li>
</ul>
]]></description>
                    <pubDate>Fri, 30 Sep 2022 17:43:27 GMT</pubDate>
                        <guid isPermaLink="false">/2022/09/26</guid>
                <link>/2022/09/26</link>
                    <author><![CDATA[bxb100]]></author>
                        <category>DEV</category>
            </item>
            <item>
                <title><![CDATA[ä½¿ç”¨ MutationObserver å†™æ³•æ¥è·å–é¡µé¢å…ƒç´ ]]></title>
                    <description><![CDATA[<p>ä¹‹å‰ä¸€ç›´ä½¿ç”¨ <code>DOMContentLoaded</code> æ¥æ•æ‰ DOM æ ‘çš„å˜åŒ–, å†™çš„æ¸£ä»£ç éœ€è¦åˆ¤æ–­, ç„¶åè¿˜è¦ <code>Promise setTimeout</code> è¿™ç§å½¢å¼æ¥ <code>sleep</code> (ä¸èƒ½ç›´æ¥ç”¨ <code>setTimeout</code> æ˜¯ js è¿è¡Œçš„ eventLoop ä¼šåœ¨æœ€åæ‰æ‰§è¡Œ)</p>
<p>ä½†æ˜¯å½“ä½¿ç”¨ <a href="https://stackoverflow.com/questions/5525071/how-to-wait-until-an-element-exists" rel="nofollow">https://stackoverflow.com/questions/5525071/how-to-wait-until-an-element-exists</a> æ‰€è¿°çš„ä»£ç </p>
<div class="highlight highlight-source-js"><pre><span class="pl-k">function</span> <span class="pl-en">waitForElm</span><span class="pl-kos">(</span><span class="pl-s1">selector</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
    <span class="pl-k">return</span> <span class="pl-k">new</span> <span class="pl-v">Promise</span><span class="pl-kos">(</span><span class="pl-s1">resolve</span> <span class="pl-c1">=&gt;</span> <span class="pl-kos">{</span>
        <span class="pl-k">if</span> <span class="pl-kos">(</span><span class="pl-smi">document</span><span class="pl-kos">.</span><span class="pl-en">querySelector</span><span class="pl-kos">(</span><span class="pl-s1">selector</span><span class="pl-kos">)</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
            <span class="pl-k">return</span> <span class="pl-en">resolve</span><span class="pl-kos">(</span><span class="pl-smi">document</span><span class="pl-kos">.</span><span class="pl-en">querySelector</span><span class="pl-kos">(</span><span class="pl-s1">selector</span><span class="pl-kos">)</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
        <span class="pl-kos">}</span>

        <span class="pl-k">const</span> <span class="pl-s1">observer</span> <span class="pl-c1">=</span> <span class="pl-k">new</span> <span class="pl-v">MutationObserver</span><span class="pl-kos">(</span><span class="pl-s1">mutations</span> <span class="pl-c1">=&gt;</span> <span class="pl-kos">{</span>
            <span class="pl-k">if</span> <span class="pl-kos">(</span><span class="pl-smi">document</span><span class="pl-kos">.</span><span class="pl-en">querySelector</span><span class="pl-kos">(</span><span class="pl-s1">selector</span><span class="pl-kos">)</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
                <span class="pl-en">resolve</span><span class="pl-kos">(</span><span class="pl-smi">document</span><span class="pl-kos">.</span><span class="pl-en">querySelector</span><span class="pl-kos">(</span><span class="pl-s1">selector</span><span class="pl-kos">)</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
                <span class="pl-s1">observer</span><span class="pl-kos">.</span><span class="pl-en">disconnect</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
            <span class="pl-kos">}</span>
        <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

        <span class="pl-s1">observer</span><span class="pl-kos">.</span><span class="pl-en">observe</span><span class="pl-kos">(</span><span class="pl-smi">document</span><span class="pl-kos">.</span><span class="pl-c1">body</span><span class="pl-kos">,</span> <span class="pl-kos">{</span>
            <span class="pl-c1">childList</span>: <span class="pl-c1">true</span><span class="pl-kos">,</span>
            <span class="pl-c1">subtree</span>: <span class="pl-c1">true</span>
        <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
    <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-kos">}</span></pre></div>
<p>ç›´æ¥å°† <code>MutationObserver</code> å’Œ <code>Promise</code> ç»“åˆèµ·æ¥, è¿™æ ·å¯ä»¥ç›´æ¥ç”¨ <code>Promise.then</code> æ¥é“¾å¼è°ƒç”¨, å¹¶ä¸”ä¹Ÿå¯ä»¥å¤ç”¨ js ä¸­ <code>Promise</code> ç›¸å…³ä¼˜ç§€çš„ç‰¹æ€§, æ¯”å¦‚ <code>race</code> , <code>any</code> ç­‰</p>
<p>å½“ç„¶æœ‰ç‚¹éœ€è¦æ³¨æ„, æ„é€ æ–¹æ³•ä¸­çš„ callback è¿”å›çš„æ˜¯æ‰€æœ‰æ›´æ–°çš„ <code>MutationRecord</code> æ•°ç»„, æ‰€ä»¥æ²¡æ³•ç®€å•çš„ä½¿ç”¨ <code>mutations.addedNodes.find(node =&gt; node.matches("..."))</code>, åŸå›ç­”çš„è§£æ³•ç›®å‰çœ‹æ¥æœ€ç®€å•ä¸”ä¼˜é›…</p>
]]></description>
                    <pubDate>Fri, 23 Sep 2022 09:55:03 GMT</pubDate>
                        <guid isPermaLink="false">/2022/09/24</guid>
                <link>/2022/09/24</link>
                    <author><![CDATA[bxb100]]></author>
                        <category>DEV</category>
            </item>
            <item>
                <title><![CDATA[OAuth 2.0 å®¢æˆ·ç«¯è®¤è¯çš„å‡ ç§æ–¹å¼]]></title>
                    <description><![CDATA[<p>å…¨æ–‡æ‘˜æŠ„ <a href="https://darutk.medium.com/oauth-2-0-client-authentication-4b5f929305d4" rel="nofollow">https://darutk.medium.com/oauth-2-0-client-authentication-4b5f929305d4</a></p>
<blockquote>
<p>OAuth å¯¹èµ„æºæ‰€æœ‰è€…å’Œç”¨æˆ·æ¥è¯´æ˜¯æˆæƒåè®®, ä¸æ˜¯éªŒè¯åè®®</p>
</blockquote>
<hr>
<h1><a id="user-content-client_secret_post" class="anchor" aria-hidden="true" href="#client_secret_post"><span aria-hidden="true" class="octicon octicon-link"></span></a>client_secret_post</h1>
<p>(<a href="https://openid.net/specs/openid-connect-core-1_0.html" rel="nofollow">OIDC Core</a>, <a href="https://openid.net/specs/openid-connect-core-1_0.html#ClientAuthentication" rel="nofollow">9. Client Authentication</a>)</p>
<p>ä¼ ç»Ÿçš„æ–¹å¼ä¸­, æˆæƒæœåŠ¡å™¨æå‰ç»™ä¸å®¢æˆ·ç«¯ä¸€å¯¹ <code>ID</code> å’Œ <code>Secrect</code></p>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://user-images.githubusercontent.com/20685961/187720742-9dfc502f-6740-4da1-b8f9-d03b9de68902.png"><img src="https://user-images.githubusercontent.com/20685961/187720742-9dfc502f-6740-4da1-b8f9-d03b9de68902.png" alt="image" style="max-width: 100%;"></a></p>
<p>ç„¶åå†å‘é€ <strong>POST</strong> è¯·æ±‚ token çš„æ—¶å€™é™„åŠ è¿™å¯¹ä¿¡æ¯</p>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://user-images.githubusercontent.com/20685961/187721042-1763b2ce-f8e9-4bc9-9660-982236605b04.png"><img src="https://user-images.githubusercontent.com/20685961/187721042-1763b2ce-f8e9-4bc9-9660-982236605b04.png" alt="image" style="max-width: 100%;"></a></p>
<h1><a id="user-content-client_secret_basic" class="anchor" aria-hidden="true" href="#client_secret_basic"><span aria-hidden="true" class="octicon octicon-link"></span></a>client_secret_basic</h1>
<p>(<a href="https://openid.net/specs/openid-connect-core-1_0.html" rel="nofollow">OIDC Core</a>, <a href="https://openid.net/specs/openid-connect-core-1_0.html#ClientAuthentication" rel="nofollow">9. Client Authentication</a>)</p>
<p>åœ¨è·å– token è¯·æ±‚ä¸­åŒ…å« <code>ID</code> å’Œ <code>Secret</code> ä½¿ç”¨ Basic Authentication (<a href="https://tools.ietf.org/html/rfc7617" rel="nofollow">RFC 7617</a>)</p>
<p>é¦–å…ˆä½¿ç”¨å†’å·å°†äºŒè€…æ‹¼æ¥</p>
<pre><code>{Client ID}:{Client Secret}
</code></pre>
<p>ç„¶å <code>Base64</code> åæ”¾å…¥ <code>Authorization</code> è¯·æ±‚å¤´ä¸­</p>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://user-images.githubusercontent.com/20685961/187723378-28acd3ac-c411-4919-8117-4c1b721f460f.png"><img src="https://user-images.githubusercontent.com/20685961/187723378-28acd3ac-c411-4919-8117-4c1b721f460f.png" alt="image" style="max-width: 100%;"></a></p>
<blockquote>
<p><code>client_secret_post</code> å’Œ <code>client_secret_basic</code> æ˜¯ <a href="https://tools.ietf.org/html/rfc6749" rel="nofollow">RFC 6749</a>, <a href="https://tools.ietf.org/html/rfc6749#section-2.3.1" rel="nofollow">2.3.1. Client Password</a> æè¿°çš„ä¸¤ç§å®¢æˆ·ç«¯éªŒè¯æ–¹æ¡ˆ</p>
</blockquote>
<h1><a id="user-content-client_secret_jwt" class="anchor" aria-hidden="true" href="#client_secret_jwt"><span aria-hidden="true" class="octicon octicon-link"></span></a>client_secret_jwt</h1>
<p>(<a href="https://openid.net/specs/openid-connect-core-1_0.html" rel="nofollow">OIDC Core</a>, <a href="https://openid.net/specs/openid-connect-core-1_0.html#ClientAuthentication" rel="nofollow">9. Client Authentication</a>)</p>
<p>åœ¨è¯·æ±‚ token çš„æ—¶å€™, å¯¹æ•°æ®ä½¿ç”¨ <code>Secret</code> æ¥ç”Ÿæˆç­¾å <a href="https://tools.ietf.org/html/rfc7515" rel="nofollow">RFC 7515</a> (JSON Web Signature) ç”Ÿæˆ JWT (<a href="https://tools.ietf.org/html/rfc7519" rel="nofollow">RFC 7519</a>) ä¼ ç»™æˆæƒæœåŠ¡å™¨</p>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://user-images.githubusercontent.com/20685961/187724256-735fab63-644b-4749-9e7d-b4c30888518f.png"><img src="https://user-images.githubusercontent.com/20685961/187724256-735fab63-644b-4749-9e7d-b4c30888518f.png" alt="image" style="max-width: 100%;"></a></p>
<p>JWT payload æ ¼å¼å®šä¹‰åœ¨ <a href="https://tools.ietf.org/html/rfc7523" rel="nofollow">RFC 7523</a>, <a href="https://tools.ietf.org/html/rfc7523#section-2.2" rel="nofollow">2.2. Using JWTs for Client Authentication</a></p>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://user-images.githubusercontent.com/20685961/187724284-19a1f92e-c5cd-4cff-bdce-bd805984c122.png"><img src="https://user-images.githubusercontent.com/20685961/187724284-19a1f92e-c5cd-4cff-bdce-bd805984c122.png" alt="image" style="max-width: 100%;"></a></p>
<p>è¿™ä¸ª JWT ç§°ä¸ºå®¢æˆ·ç«¯æ–­è¨€ (OAuth In Action ä¹Ÿç¿»è¯‘ä¸ºæ–­è¨€, å§‘ä¸”ç§°ä¹‹)</p>
<p>è¯·æ±‚ Token æ—¶, <strong>å®¢æˆ·ç«¯æ–­è¨€</strong> ç½®äº <code>client_assertion</code> è¯·æ±‚å‚æ•°ä¸Š, <code>client_assertion_type</code> æ˜¯å›ºå®šå€¼: <code>urn:ietf:params:oauth:client-assertion-type:jwt-bearer</code></p>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://user-images.githubusercontent.com/20685961/187724309-52b3ece2-2edc-435a-a4bb-801d91633b4f.png"><img src="https://user-images.githubusercontent.com/20685961/187724309-52b3ece2-2edc-435a-a4bb-801d91633b4f.png" alt="image" style="max-width: 100%;"></a></p>
<h1><a id="user-content-private_key_jwt" class="anchor" aria-hidden="true" href="#private_key_jwt"><span aria-hidden="true" class="octicon octicon-link"></span></a>private_key_jwt</h1>
<p>(<a href="https://openid.net/specs/openid-connect-core-1_0.html" rel="nofollow">OIDC Core</a>, <a href="https://openid.net/specs/openid-connect-core-1_0.html#ClientAuthentication" rel="nofollow">9. Client Authentication</a>)</p>
<p>æ—¢ç„¶ä¸Šé¢æ˜¯ç”¨å¯¹ç§°åŠ å¯†, é‚£ä¹ˆå°±ä¸€å®šä¼šå‡ºç°ä¸å¯¹ç§°åŠ å¯† (å…¬é’¥åˆ†äº«ä½¿ç”¨è¯¸å¦‚ <code>jwks</code> æˆ– <code>jwks_uri</code> client metadata)</p>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://user-images.githubusercontent.com/20685961/187727532-611eb102-69e6-41d7-b6aa-6701bfc9a635.png"><img src="https://user-images.githubusercontent.com/20685961/187727532-611eb102-69e6-41d7-b6aa-6701bfc9a635.png" alt="image" style="max-width: 100%;"></a></p>
]]></description>
                    <pubDate>Wed, 31 Aug 2022 16:16:22 GMT</pubDate>
                        <guid isPermaLink="false">/2022/08/23</guid>
                <link>/2022/08/23</link>
                    <author><![CDATA[bxb100]]></author>
            </item>
            <item>
                <title><![CDATA[QNAP æŠ€å·§åˆ†äº«]]></title>
                    <description><![CDATA[<ol>
<li>é»˜è®¤çš„ 8080 ç«¯å£æ— æ³•åœ¨å…¬ç½‘ç¯å¢ƒä¸‹è®¿é—®ï¼Œå¯ä»¥ä½¿ç”¨<a href="#issuecomment-1017306273">åå‘ä»£ç†æ¥è®¾ç½®</a>
</li>
<li><a href="#issuecomment-1017428570">ä½¿ç”¨ Cloudflare Worker &amp; KV æ¥åš DDNS</a></li>
<li>ä½¿ç”¨ <a href="https://tailscale.com/" rel="nofollow">tailscale</a> æ¥è¿æ¥ WebDAV</li>
</ol>
]]></description>
                    <pubDate>Wed, 10 Aug 2022 07:29:32 GMT</pubDate>
                        <guid isPermaLink="false">/2022/01/9</guid>
                <link>/2022/01/9</link>
                    <author><![CDATA[bxb100]]></author>
                        <category>Horizon</category>
            </item>
            <item>
                <title><![CDATA[How to add auth for Cloudflare Page]]></title>
                    <description><![CDATA[<ol>
<li>Add routes for domain, see the <a href="https://403.ie/how-to-use-cloudflare-to-enable-basic-auth-on-a-subdirectory" rel="nofollow">link</a>
</li>
</ol>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://user-images.githubusercontent.com/20685961/183259715-0e2f24d5-4b45-4a36-8f34-631b87e6e564.png"><img width="1418" alt="image" src="https://user-images.githubusercontent.com/20685961/183259715-0e2f24d5-4b45-4a36-8f34-631b87e6e564.png" style="max-width: 100%;"></a></p>
<ol start="2">
<li>Using Zero Trust</li>
</ol>
<ul>
<li>Set subdomain empty to protect all pages.dev, there are no other way to disable this link</li>
</ul>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://user-images.githubusercontent.com/20685961/183259760-1b0a2197-682b-4a33-ad68-f460cbb18171.png"><img width="1083" alt="image" src="https://user-images.githubusercontent.com/20685961/183259760-1b0a2197-682b-4a33-ad68-f460cbb18171.png" style="max-width: 100%;"></a></p>
<ul>
<li>Same for your domain</li>
</ul>
]]></description>
                    <pubDate>Sat, 06 Aug 2022 17:36:33 GMT</pubDate>
                        <guid isPermaLink="false">/2022/08/21</guid>
                <link>/2022/08/21</link>
                    <author><![CDATA[bxb100]]></author>
                        <category>Horizon</category>
                        <category>DEV</category>
                        <category>å°±æ˜¯ç©</category>
            </item>
            <item>
                <title><![CDATA[ä½¿ç”¨ charles çš„ rootCA  ä»£ç†åç«¯ API]]></title>
                    <description><![CDATA[<h2><a id="user-content-å‰æƒ…" class="anchor" aria-hidden="true" href="#å‰æƒ…"><span aria-hidden="true" class="octicon octicon-link"></span></a>å‰æƒ…</h2>
<p>æŸæ—¥æˆ‘å„¿ï¼ˆå‰ç«¯ ios ä½¿ç”¨ https ä½†æ˜¯æ²¡æœ‰å¼ºåˆ¶ï¼‰é—®æˆ‘å¦‚ä½•åˆ©ç”¨ charles æ¥ä»£ç†åç«¯<strong>æœ¬åœ°</strong> API æµ‹è¯•ï¼Œæˆ‘ç›´æ¥ç”©ç»™ä»– <code>map remote</code> å¤§æ³• ï¼ˆfrom https to httpï¼‰ï¼Œè§£å†³ã€‚</p>
<h2><a id="user-content-æ€è€ƒ" class="anchor" aria-hidden="true" href="#æ€è€ƒ"><span aria-hidden="true" class="octicon octicon-link"></span></a>æ€è€ƒ</h2>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://user-images.githubusercontent.com/20685961/153456893-60900373-e67b-4134-813b-8eb1156a4b0d.png"><img width="432" alt="image" align="right" src="https://user-images.githubusercontent.com/20685961/153456893-60900373-e67b-4134-813b-8eb1156a4b0d.png" style="max-width: 100%;"></a></p>
<p>è¿™æ—¶å€™æˆ‘è§‰å¾— charles ç±»ä¼¼ QuantumultX ç›´æ¥é‡å†™å“åº” payloadï¼Œä½†æ˜¯çœ‹äº† doc ä¹‹åå‘ç°ä»…ä»…åªæ˜¯è½¬å‘ã€‚ç„¶åæˆ‘é—®äº†ä¸‹æˆ‘å„¿ï¼Œä»–è¯´ä»–å®¢æˆ·ç«¯æ²¡åš ssl æ ¡éªŒï¼Œé‚£ä¹ˆä¹‹åæ’æœŸåšäº†æ ¡éªŒè¿™ç§æ–¹å¼å¯èƒ½ä¼šæœ‰é—®é¢˜ã€‚
è¿™æ—¶æˆ‘å°±æƒ³åˆ°èƒ½å¦åˆ©ç”¨ charles çš„ rootCA æ¥è‡ªç­¾ï¼Œè¿™æ ·çš„è¯é…åˆ DNS å’Œä¸€äº› web server åå‘ä»£ç†å°±èƒ½åšåˆ°ç›´æ¥æœ¬åœ° https çº¿ä¸ŠåŸŸåè®¿é—®äº†ï¼ˆå½“ç„¶ client æ·»åŠ å…¬é’¥è¿™ç§é—®é¢˜å°±ä¸åœ¨è¿™é‡Œèµ˜è¿°äº†ï¼‰ã€‚
<br></p>
<h2><a id="user-content-å®éªŒ" class="anchor" aria-hidden="true" href="#å®éªŒ"><span aria-hidden="true" class="octicon octicon-link"></span></a>å®éªŒ</h2>
<p>é¦–å…ˆå…ˆå¯¼å‡º charles çš„ CA å’Œ ç§é’¥</p>
<p><strong>Help</strong> &gt;  <strong>SSL Proxying</strong> &gt;  <strong>Export Charles Root Certificate and Private Key...</strong></p>
<p>ç„¶åè½¬æˆ <code>PEM</code><sup><a href="#fn-1" id="user-content-fnref-1" data-footnote-ref="">1</a></sup> (<em><code>charles-ssl-proxying.p12</code> <code>newfile.xx.pem</code> æŒ‰å®é™…æƒ…å†µå¡«å†™</em>ï¼‰</p>
<div class="highlight highlight-source-shell"><pre>openssl pkcs12 -in charles-ssl-proxying.p12 -out newfile.crt.pem -clcerts -nokeys
openssl pkcs12 -in charles-ssl-proxying.p12 -out newfile.key.pem -nocerts -nodes </pre></div>
<p>ç„¶åå‚è€ƒ</p>
<ul>
<li><a href="https://github.com/kingkool68/generate-ssl-certs-for-local-development">https://github.com/kingkool68/generate-ssl-certs-for-local-development</a></li>
<li><a href="https://github.com/dakshshah96/local-cert-generator">https://github.com/dakshshah96/local-cert-generator</a></li>
</ul>
<p>åˆ›å»ºï¼ˆè¿™é‡Œå‡å¦‚ä½¿ç”¨çš„æ˜¯ example.com ç½‘ç«™ï¼‰
1ã€server.csr.cnf</p>
<pre><code>[req]
default_bits = 2048
prompt = no
default_md = sha256
distinguished_name = dn

[dn]
C=US
ST=RandomState
L=RandomCity
O=RandomOrganization
OU=RandomOrganizationUnit
emailAddress=hello@example.com
CN = example.com
</code></pre>
<p>2ã€v3.ext</p>
<pre><code>authorityKeyIdentifier=keyid,issuer
basicConstraints=CA:FALSE
keyUsage = digitalSignature, nonRepudiation, keyEncipherment, dataEncipherment
subjectAltName = @alt_names

[alt_names]
DNS.1 = example.com
</code></pre>
<p>æ‰§è¡Œ</p>
<pre><code>openssl req -new -sha256 -nodes -out server.csr -newkey rsa:2048 -keyout server.key -config server.csr.cnf

openssl x509 -req -in server.csr -CA newfile.crt.pem -CAkey newfile.key.pem -CAcreateserial -out server.crt -days 825 -sha256 -extfile v3.ext
</code></pre>
<p>è·å¾—</p>
<ul>
<li>server.key</li>
<li>server.crt</li>
</ul>
<p>ä½¿ç”¨ caddy ç®€å•åšä¸€ä¸ªåå‘ä»£ç†</p>
<pre><code>example.com {

tls ~/server.crt ~/server.key

reverse_proxy localhost:2022
}

:2022 {
respond "&lt;h1&gt;Hello, world!&lt;/h1&gt;"
}
</code></pre>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://user-images.githubusercontent.com/20685961/153470943-e0fbf171-01a9-440a-9a08-baa22c43a9a5.png"><img width="540" alt="image" align="right" src="https://user-images.githubusercontent.com/20685961/153470943-e0fbf171-01a9-440a-9a08-baa22c43a9a5.png" style="max-width: 100%;"></a></p>
<p>ç„¶ååœ¨ charles ä¸­é…ç½®</p>
<p><strong>Tools</strong> &gt; <strong>DNS Spoofing</strong></p>
<p>å°† <code>example.com</code>æŒ‡å‘æœ¬åœ° caddyï¼Œè¿™æ ·å°±èƒ½ç›´æ¥è¯·æ±‚äº† (å½“ç„¶ç›´æ¥æ”¹ host ä¹Ÿæ˜¯å¯ä»¥çš„)</p>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<hr>
<p>PC:
<a target="_blank" rel="noopener noreferrer nofollow" href="https://user-images.githubusercontent.com/20685961/153471370-988fe1a9-0291-46dd-8df4-88792c54011f.png"><img alt="image" src="https://user-images.githubusercontent.com/20685961/153471370-988fe1a9-0291-46dd-8df4-88792c54011f.png" style="max-width: 100%;"></a></p>
<p>Android:
<a target="_blank" rel="noopener noreferrer nofollow" href="https://user-images.githubusercontent.com/20685961/153471869-0b564770-f138-42bb-9dca-0d476194a929.jpg"><img src="https://user-images.githubusercontent.com/20685961/153471869-0b564770-f138-42bb-9dca-0d476194a929.jpg" style="max-width: 100%;"></a></p>
<section data-footnotes="">
<ol>
<li id="user-content-fn-1">
<p><a href="https://stackoverflow.com/questions/15144046/converting-pkcs12-certificate-into-pem-using-openssl" rel="nofollow">https://stackoverflow.com/questions/15144046/converting-pkcs12-certificate-into-pem-using-openssl</a> <a href="#fnref-1" data-footnote-backref="" aria-label="Back to content"><g-emoji class="g-emoji" alias="leftwards_arrow_with_hook" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/21a9.png">â†©</g-emoji></a></p>
</li>
</ol>
</section>
]]></description>
                    <pubDate>Tue, 02 Aug 2022 17:33:35 GMT</pubDate>
                        <guid isPermaLink="false">/2022/02/10</guid>
                <link>/2022/02/10</link>
                    <author><![CDATA[bxb100]]></author>
                        <category>Horizon</category>
            </item>
            <item>
                <title><![CDATA[Amazon SP API è·å– listing item çš„æ­£ç¡®æ–¹å¼]]></title>
                    <description><![CDATA[<ul>
<li>download <code>GET_MERCHANT_LISTINGS_ALL_DATA</code> report (fr region does not contain <code>ASIN</code>)</li>
<li>download <code>GET_FLAT_FILE_OPEN_LISTINGS_DATA</code> report (get missing <code>ASIN</code>)</li>
<li>Get the main picture and variations ASIN with the CatalogItems API</li>
</ul>
<p>source: <a href="https://medium.com/@nassuf/how-to-get-a-sellers-listings-using-amazon-sp-api-475771d3754c" rel="nofollow">https://medium.com/@nassuf/how-to-get-a-sellers-listings-using-amazon-sp-api-475771d3754c</a></p>
]]></description>
                    <pubDate>Wed, 20 Jul 2022 04:04:53 GMT</pubDate>
                        <guid isPermaLink="false">/2022/07/19</guid>
                <link>/2022/07/19</link>
                    <author><![CDATA[bxb100]]></author>
                        <category>DEV</category>
            </item>
            <item>
                <title><![CDATA[è®°ä¸€æ¬¡ Win Docker æ— æ³•åœ¨å±€åŸŸç½‘å†…è¿æ¥çš„è§£å†³æ–¹æ¡ˆ]]></title>
                    <description><![CDATA[<p>æˆ‘å‡ºç°çš„é—®é¢˜æ˜¯ docker firewall UAC å¼¹çª—çš„æ—¶å€™åªå…è®¸äº† public è¿æ¥ï¼Œç„¶åç½‘ç»œå˜æˆ private å¯¼è‡´æ— æ³•è¿æ¥</p>
<div class="highlight highlight-source-shell"><pre>Get-NetFirewallRule <span class="pl-k">|</span> where { <span class="pl-smi">$_</span>.Name -like <span class="pl-s"><span class="pl-pds">"</span>*docker*<span class="pl-pds">"</span></span> } <span class="pl-k">|</span> ft</pre></div>
<p>è¿›å…¥ <code>Control Panel\System and Security\Windows Defender Firewall\Allowed apps</code> æ·»åŠ  private æƒé™å³å¯</p>
<p>ç›¸å…³æ–‡ç« å‚è€ƒ
<a href="https://blog.miniasp.com/post/2021/06/14/Docker-Desktop-for-Windows-Windows-Firewall-Issues" rel="nofollow">https://blog.miniasp.com/post/2021/06/14/Docker-Desktop-for-Windows-Windows-Firewall-Issues</a></p>
]]></description>
                    <pubDate>Sat, 09 Jul 2022 07:35:57 GMT</pubDate>
                        <guid isPermaLink="false">/2022/06/18</guid>
                <link>/2022/06/18</link>
                    <author><![CDATA[bxb100]]></author>
                        <category>Horizon</category>
                        <category>å°±æ˜¯ç©</category>
            </item>
            <item>
                <title><![CDATA[Dropover è‡ªå®šä¹‰æ“ä½œçš„ä¸€äº› Tips]]></title>
                    <description><![CDATA[<ol>
<li>æ”¾åœ¨ <code>Application Scripts</code> æ–‡ä»¶å¤¹æ—¶å€™æ³¨æ„ç»™<strong>æƒé™,</strong> å¦åˆ™ä¼šæŠ¥æ ¼å¼å¼‚å¸¸é”™è¯¯</li>
<li>ä¼°è®¡ä½œè€…è°ƒç”¨ unix script çš„æ—¶å€™æ²¡æœ‰ç»™å…¶å®ƒ path çš„æ‰§è¡Œç¯å¢ƒ, å¯¼è‡´åªèƒ½ç”¨ <code>user/bin</code> ä¸‹é¢çš„å‘½ä»¤, ç±»ä¼¼ <code>execve</code> ? ï¼ˆä¸è¿‡è¿™é‡Œå¯ä»¥ç”¨å…¨è·¯å¾„å…ˆç”¨ç€ï¼‰</li>
<li>å¦‚æœæ²¡æœ‰è¾“å‡ºæœ‰çš„æ—¶å€™å°±æ˜¯ <code>2</code> å¯¼è‡´çš„åŸå› </li>
</ol>
]]></description>
                    <pubDate>Fri, 01 Jul 2022 17:19:03 GMT</pubDate>
                        <guid isPermaLink="false">/2022/01/8</guid>
                <link>/2022/01/8</link>
                    <author><![CDATA[bxb100]]></author>
                        <category>Horizon</category>
            </item>
            <item>
                <title><![CDATA[Amazon SP program signature problem]]></title>
                    <description><![CDATA[<h2><a id="user-content-case" class="anchor" aria-hidden="true" href="#case"><span aria-hidden="true" class="octicon octicon-link"></span></a>Case</h2>
<p>When us project execute <a href="https://developer-docs.amazon.com/sp-api/docs/listings-items-api-v2021-08-01-reference#getlistingsitem" rel="nofollow">getListingsItem</a>, using SKU name 'FBA XXX XX 300g', but Amazon returns 403 error. At first, we don't get message body like below, we just know it's not successful.</p>
<div class="highlight highlight-source-json"><pre>{
  <span class="pl-ent">"errors"</span>: [
    {
      <span class="pl-ent">"message"</span>: <span class="pl-ii">"The request signature we calculated does not match the signature you provided. Check your AWS Secret Access Key and signing method. Consult the service documentation for details.</span>

<span class="pl-ii">...</span></pre></div>
<h2><a id="user-content-using-charles-to-debug" class="anchor" aria-hidden="true" href="#using-charles-to-debug"><span aria-hidden="true" class="octicon octicon-link"></span></a>Using Charles to debug</h2>
<p>I suppose the HTTP protocol sends the right query param and uses the right path, but I don't know yet, so I choose using Charles to get information. First disable the SSL certificate verifier, and then add Charles proxy.</p>
<div class="highlight highlight-source-java"><pre><span class="pl-k">private</span> <span class="pl-k">static</span> <span class="pl-smi">OkHttpClient</span> <span class="pl-s1">getUnsafeOkHttpClient</span>() {
        <span class="pl-k">try</span> {
            <span class="pl-c">// Create a trust manager that does not validate certificate chains</span>
            <span class="pl-k">final</span> <span class="pl-smi">TrustManager</span>[] <span class="pl-s1">trustAllCerts</span> = <span class="pl-k">new</span> <span class="pl-smi">TrustManager</span>[]{
                <span class="pl-k">new</span> <span class="pl-smi">X509TrustManager</span>() {
                    <span class="pl-c1">@</span><span class="pl-c1">Override</span>
                    <span class="pl-k">public</span> <span class="pl-smi">void</span> <span class="pl-en">checkClientTrusted</span>(<span class="pl-smi">java</span>.<span class="pl-smi">security</span>.<span class="pl-smi">cert</span>.<span class="pl-smi">X509Certificate</span>[] <span class="pl-s1">chain</span>, <span class="pl-smi">String</span> <span class="pl-s1">authType</span>) <span class="pl-k">throws</span> <span class="pl-smi">CertificateException</span> {
                    }

                    <span class="pl-c1">@</span><span class="pl-c1">Override</span>
                    <span class="pl-k">public</span> <span class="pl-smi">void</span> <span class="pl-en">checkServerTrusted</span>(<span class="pl-smi">java</span>.<span class="pl-smi">security</span>.<span class="pl-smi">cert</span>.<span class="pl-smi">X509Certificate</span>[] <span class="pl-s1">chain</span>, <span class="pl-smi">String</span> <span class="pl-s1">authType</span>) <span class="pl-k">throws</span> <span class="pl-smi">CertificateException</span> {
                    }

                    <span class="pl-c1">@</span><span class="pl-c1">Override</span>
                    <span class="pl-k">public</span> <span class="pl-smi">java</span>.<span class="pl-smi">security</span>.<span class="pl-smi">cert</span>.<span class="pl-smi">X509Certificate</span>[] <span class="pl-en">getAcceptedIssuers</span>() {
                        <span class="pl-k">return</span> <span class="pl-k">new</span> <span class="pl-smi">java</span>.<span class="pl-smi">security</span>.<span class="pl-smi">cert</span>.<span class="pl-smi">X509Certificate</span>[]{};
                    }
                }
            };

            <span class="pl-c">// Install the all-trusting trust manager</span>
            <span class="pl-k">final</span> <span class="pl-smi">SSLContext</span> <span class="pl-s1">sslContext</span> = <span class="pl-c1">SSLContext</span>.<span class="pl-en">getInstance</span>(<span class="pl-s">"SSL"</span>);
            <span class="pl-s1">sslContext</span>.<span class="pl-en">init</span>(<span class="pl-c1">null</span>, <span class="pl-s1">trustAllCerts</span>, <span class="pl-k">new</span> <span class="pl-smi">java</span>.<span class="pl-smi">security</span>.<span class="pl-smi">SecureRandom</span>());
            <span class="pl-c">// Create an ssl socket factory with our all-trusting manager</span>
            <span class="pl-k">final</span> <span class="pl-smi">SSLSocketFactory</span> <span class="pl-s1">sslSocketFactory</span> = <span class="pl-s1">sslContext</span>.<span class="pl-en">getSocketFactory</span>();

            <span class="pl-smi">OkHttpClient</span> <span class="pl-s1">client</span> = <span class="pl-k">new</span> <span class="pl-smi">OkHttpClient</span>();
            <span class="pl-s1">client</span>.<span class="pl-en">setSslSocketFactory</span>(<span class="pl-s1">sslSocketFactory</span>);
            <span class="pl-s1">client</span>.<span class="pl-en">setHostnameVerifier</span>(<span class="pl-k">new</span> <span class="pl-smi">HostnameVerifier</span>() {
                <span class="pl-c1">@</span><span class="pl-c1">Override</span>
                <span class="pl-k">public</span> <span class="pl-smi">boolean</span> <span class="pl-en">verify</span>(<span class="pl-smi">String</span> <span class="pl-s1">hostname</span>, <span class="pl-smi">SSLSession</span> <span class="pl-s1">session</span>) {
                    <span class="pl-k">return</span> <span class="pl-c1">true</span>;
                }
            });
            <span class="pl-s1">client</span>.<span class="pl-en">setProxy</span>(<span class="pl-k">new</span> <span class="pl-smi">Proxy</span>(<span class="pl-smi">Proxy</span>.<span class="pl-s1">Type</span>.<span class="pl-c1">HTTP</span>, <span class="pl-k">new</span> <span class="pl-smi">InetSocketAddress</span>(<span class="pl-s">"127.0.0.1"</span>, <span class="pl-c1">9090</span>)));
            <span class="pl-k">return</span> <span class="pl-s1">client</span>;
        } <span class="pl-k">catch</span> (<span class="pl-smi">Exception</span> <span class="pl-s1">e</span>) {
            <span class="pl-k">throw</span> <span class="pl-k">new</span> <span class="pl-smi">RuntimeException</span>(<span class="pl-s1">e</span>);
        }
    }</pre></div>
<p>and then to execute method get error like this</p>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://user-images.githubusercontent.com/20685961/173632004-2312ee7a-5cb0-4d43-b2c0-8b533b19b17f.png"><img src="https://user-images.githubusercontent.com/20685961/173632004-2312ee7a-5cb0-4d43-b2c0-8b533b19b17f.png" alt="image" style="max-width: 100%;"></a></p>
<p>It's easy to know the problem occupy in the AWS signer, but why? The path is encoded (compared with postman data), and the signer is double encoding the path variable <sup><a href="#fn-1" id="user-content-fnref-1" data-footnote-ref="">1</a></sup> (<code>urlEncode</code> default is <code>true</code>)</p>
<div class="highlight highlight-source-java"><pre><span class="pl-k">protected</span> <span class="pl-smi">String</span> <span class="pl-s1">getCanonicalizedResourcePath</span>(<span class="pl-smi">String</span> <span class="pl-s1">resourcePath</span>, <span class="pl-smi">boolean</span> <span class="pl-s1">urlEncode</span>) {
        <span class="pl-smi">String</span> <span class="pl-s1">value</span> = <span class="pl-s1">resourcePath</span>;
        <span class="pl-k">if</span> (<span class="pl-s1">urlEncode</span>) {
            <span class="pl-s1">value</span> = <span class="pl-c1">SdkHttpUtils</span>.<span class="pl-en">urlEncode</span>(<span class="pl-s1">resourcePath</span>, <span class="pl-c1">true</span>);

            <span class="pl-smi">URI</span> <span class="pl-s1">normalize</span> = <span class="pl-c1">URI</span>.<span class="pl-en">create</span>(<span class="pl-s1">value</span>).<span class="pl-en">normalize</span>();
            <span class="pl-s1">value</span> = <span class="pl-s1">normalize</span>.<span class="pl-en">getRawPath</span>();

            <span class="pl-c">// Normalization can leave a trailing slash at the end of the resource path,</span>
            <span class="pl-c">// even if the input path doesn't end with one. Example input: /foo/bar/.</span>
            <span class="pl-c">// Remove the trailing slash if the input path doesn't end with one.</span>
            <span class="pl-k">if</span> (!<span class="pl-s1">resourcePath</span>.<span class="pl-en">endsWith</span>(<span class="pl-s">"/"</span>) &amp;&amp; <span class="pl-s1">value</span>.<span class="pl-en">endsWith</span>(<span class="pl-s">"/"</span>)) {
                <span class="pl-s1">value</span> = <span class="pl-s1">value</span>.<span class="pl-en">substring</span>(<span class="pl-c1">0</span>, <span class="pl-s1">value</span>.<span class="pl-en">length</span>() - <span class="pl-c1">1</span>);
            }
        }
        <span class="pl-k">if</span> (!<span class="pl-s1">value</span>.<span class="pl-en">startsWith</span>(<span class="pl-s">"/"</span>)) {
            <span class="pl-s1">value</span> = <span class="pl-s">"/"</span> + <span class="pl-s1">value</span>;
        }
        <span class="pl-k">return</span> <span class="pl-s1">value</span>;
    }</pre></div>
<p>Obviously, the code is right, it must be some places give the wrong parameter.</p>
<h2><a id="user-content-debug" class="anchor" aria-hidden="true" href="#debug"><span aria-hidden="true" class="octicon octicon-link"></span></a>Debug</h2>
<p>The best way to pinpoint the breakpoints is the line where the nearest the mistake.
So, give the <code>AWSSigV4Signer#sign</code> one, and start debug session, take a deep look. few methods passed, suddenly I found the <code>path</code> in <code>createCanonicalRequest</code> not right, it's just a plain text of the test sets.</p>
<p>Why?</p>
<p>You know the <code>createCanonicalRequest</code> is the first step, they need encode twice, if you passed a path without encode, then the <code>aws-sdk</code> maximum encode once.</p>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://user-images.githubusercontent.com/20685961/173635120-5dffa3d0-5046-4bce-b6e4-9df1fd6092c3.png"><img src="https://user-images.githubusercontent.com/20685961/173635120-5dffa3d0-5046-4bce-b6e4-9df1fd6092c3.png" alt="image" style="max-width: 100%;"></a></p>
<p>Now, you can clearly find the problem is <code>request.getResourcePath()</code></p>
<div class="highlight highlight-source-java"><pre>  <span class="pl-c1">@</span><span class="pl-c1">Override</span>
  <span class="pl-k">public</span> <span class="pl-smi">String</span> <span class="pl-s1">getResourcePath</span>() {
    <span class="pl-k">try</span> {
      <span class="pl-k">return</span> <span class="pl-s1">originalRequest</span>.<span class="pl-en">url</span>().<span class="pl-en">toURI</span>().<span class="pl-en">getPath</span>();
    } <span class="pl-k">catch</span> (<span class="pl-smi">URISyntaxException</span> <span class="pl-s1">e</span>) {
      <span class="pl-k">throw</span> <span class="pl-k">new</span> <span class="pl-smi">RuntimeException</span>(<span class="pl-s1">e</span>);
    }
  }</pre></div>
<p>and</p>
<div class="highlight highlight-source-java"><pre>    <span class="pl-c">/**</span>
<span class="pl-c">     * Returns the decoded path component of this URI.</span>
<span class="pl-c">     *</span>
<span class="pl-c">     * &lt;p&gt; The string returned by this method is equal to that returned by the</span>
<span class="pl-c">     * {@link #getRawPath() getRawPath} method except that all sequences of</span>
<span class="pl-c">     * escaped octets are &lt;a href="#decode"&gt;decoded&lt;/a&gt;.  &lt;/p&gt;</span>
<span class="pl-c">     *</span>
<span class="pl-c">     * @return  The decoded path component of this URI,</span>
<span class="pl-c">     *          or {@code null} if the path is undefined</span>
<span class="pl-c">     */</span>
    <span class="pl-k">public</span> <span class="pl-smi">String</span> <span class="pl-s1">getPath</span>() {
        #...
    }</pre></div>
<p>it's so simple, but costed me a bunch of time to solve, feel sad <g-emoji class="g-emoji" alias="cry" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f622.png">ğŸ˜¢</g-emoji></p>
<p>bless me to be better <g-emoji class="g-emoji" alias="crossed_fingers" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f91e.png">ğŸ¤</g-emoji></p>
<section data-footnotes="">
<ol>
<li id="user-content-fn-1">
<p><a href="https://docs.aws.amazon.com/general/latest/gr/sigv4-create-canonical-request.html#:~:text=Each%20path%20segment%20must%20be%20URI%2Dencoded%20twice" rel="nofollow">https://docs.aws.amazon.com/general/latest/gr/sigv4-create-canonical-request.html#:~:text=Each%20path%20segment%20must%20be%20URI%2Dencoded%20twice</a> <a href="#fnref-1" data-footnote-backref="" aria-label="Back to content"><g-emoji class="g-emoji" alias="leftwards_arrow_with_hook" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/21a9.png">â†©</g-emoji></a></p>
</li>
</ol>
</section>
]]></description>
                    <pubDate>Tue, 14 Jun 2022 17:19:04 GMT</pubDate>
                        <guid isPermaLink="false">/2022/06/17</guid>
                <link>/2022/06/17</link>
                    <author><![CDATA[bxb100]]></author>
                        <category>DEV</category>
            </item>
            <item>
                <title><![CDATA[Synergy è¿æ¥å¡é¡¿]]></title>
                    <description><![CDATA[<p>é—®é¢˜ï¼š</p>
<ul>
<li>Clientï¼šå°å¼æœºè¿æ¥ç½‘çº¿</li>
<li>Serverï¼šç¬”è®°æœ¬ WIFI
å¿…ç„¶ç”¨ä¸€æ®µæ—¶é—´å¡é¡¿</li>
</ul>
<p>è§£å†³æ–¹æ³•ï¼š
éƒ½ç”¨ç½‘çº¿è¿æ¥ï¼ŒåŸç†ä¸è¯¦</p>
]]></description>
                    <pubDate>Fri, 10 Jun 2022 08:04:09 GMT</pubDate>
                        <guid isPermaLink="false">/2022/06/16</guid>
                <link>/2022/06/16</link>
                    <author><![CDATA[bxb100]]></author>
                        <category>å°±æ˜¯ç©</category>
            </item>
            <item>
                <title><![CDATA[How to use FluentBit multiline]]></title>
                    <description><![CDATA[<p>One day, my friend asked a question about how to use <a href="https://fluentbit.io/" rel="nofollow">fluentBit </a> (It's popular in k8s <sup><a href="#fn-1" id="user-content-fnref-1" data-footnote-ref="">1</a></sup>) to collect Java application logs. I had no idea how to do this at first, but finally the result seems good, so I want to give this tale to introduce the way I walk pasted.</p>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://user-images.githubusercontent.com/20685961/163699255-57467f29-4d24-4948-aa27-62aa8d3e9b75.png"><img src="https://user-images.githubusercontent.com/20685961/163699255-57467f29-4d24-4948-aa27-62aa8d3e9b75.png" alt="Flow" style="max-width: 100%;"></a></p>
<p align="center"><em>The config visualizes</em></p>
<p>Usually, the log file pattern seems unified, it looks like</p>
<p><code>2022-04-17 03:10:42.381  INFO 28420 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...</code></p>
<p>You can easily use regex to collect each line into a structure. But when the app throws exceptions, you need to use multiline parser <sup><a href="#fn-2" id="user-content-fnref-2" data-footnote-ref="">2</a></sup><sup><a href="#fn-3" id="user-content-fnref-3" data-footnote-ref="">3</a></sup>. Briefly, it's caught raw text read line by line, so each line needs to match <a href="https://docs.fluentbit.io/manual/administration/configuring-fluent-bit/multiline-parsing#rules-definition" rel="nofollow">rule</a>, like this:</p>
<pre lang="conf"><code># rules   |   state name   | regex pattern                   | next state
# --------|----------------|---------------------------------------------
rule         "start_state"   "/(Dec \d+ \d+\:\d+\:\d+)(.*)/"   "cont"
rule         "cont"          "/^\s+at.*/"                      "cont"
</code></pre>
<p align="center">
<a target="_blank" rel="noopener noreferrer nofollow" href="https://user-images.githubusercontent.com/20685961/163700092-d1875099-1775-4c9a-8926-6fa7b6d0b9d0.png"><img src="https://user-images.githubusercontent.com/20685961/163700092-d1875099-1775-4c9a-8926-6fa7b6d0b9d0.png" style="max-width: 100%;"></a>
</p><p align="center"><em>Each line pipeline</em></p>

<pre lang="log"><code>2022-04-17 03:10:43.578 ERROR 28420 --- [scheduling-1] o.s.s.s.TaskUtils$LoggingErrorHandler    : Unexpected error occurred in scheduled task.

java.lang.RuntimeException: cs
	at guru.sfg.brewery.config.TaskConfig.throwError(TaskConfig.java:25) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84) ~[spring-context-5.1.6.RELEASE.jar:5.1.6.RELEASE]
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54) ~[spring-context-5.1.6.RELEASE.jar:5.1.6.RELEASE]
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515) ~[na:na]
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305) ~[na:na]
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]

2022-04-17 03:10:43.591  INFO 28420 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path ''
2022-04-17 03:10:43.593  INFO 28420 --- [restartedMain] g.sfg.brewery.SfgBreweryUiApplication    : Started SfgBreweryUiApplication in 2.717 seconds (JVM running for 3.998)
2022-04-17 03:10:43.596  INFO 28420 --- [scheduling-1] o.h.h.i.QueryTranslatorFactoryInitiator  : HHH000397: Using ASTQueryTranslatorFactory
</code></pre>
<p>But how to? The official Doc is good, but in this case, in the default spring logging pattern, log message with break-line, and, in Windows, it's <code>\r\n</code>, Me using windows, so be an attention</p>
<p>So, collusion below (remember when the up satisfied that one can be execute):</p>
<ol>
<li>The start line is simple <code>(\d{4}-\d{2}-\d{2}\s\d+\:\d+\:\d+.\d+)(.*)</code> , <a href="https://rubular.com/r/48Q24T9wXBsle9" rel="nofollow">see</a>
</li>
<li>next is tricky, <a href="https://rubular.com/r/YNoxsscZcVtlbY" rel="nofollow">see</a>
</li>
</ol>
<ul>
<li><code>\r\n</code></li>
<li>
<code>\s</code> + <code>name: default</code>
</li>
</ul>
<ol start="3">
<li>and the next, loop <code>3</code>, <a href="https://rubular.com/r/NXxvOGLOyThUzm" rel="nofollow">see</a>
</li>
</ol>
<ul>
<li>
<code>\s</code> + <code>...]</code>
</li>
<li><code>xxx.xxx.xxException</code></li>
<li>
<code>\s</code> + <code>at XXXX</code>
</li>
</ul>
<p>In the end, the exception snippet will produce a single line, you can use filter to exclude this.</p>
<p>gist: <a href="https://gist.github.com/bxb100/de46e5f708d03d509430d4767806fb14">https://gist.github.com/bxb100/de46e5f708d03d509430d4767806fb14</a></p>
<h2><a id="user-content-other-thing" class="anchor" aria-hidden="true" href="#other-thing"><span aria-hidden="true" class="octicon octicon-link"></span></a>Other thing</h2>
<p>Using docker needs packing by yourself <sup><a href="#fn-4" id="user-content-fnref-4" data-footnote-ref="">4</a></sup>, don't forget it should with ES under same network <sup><a href="#fn-5" id="user-content-fnref-5" data-footnote-ref="">5</a></sup></p>
<ol>
<li>build an image</li>
</ol>
<div class="highlight highlight-source-dockerfile"><pre><span class="pl-k">FROM</span> fluent/fluent-bit:1.9.0
<span class="pl-k">ADD</span> parsers_multiline.conf /fluent-bit/etc/
<span class="pl-k">ADD</span> fluent-bit.conf /fluent-bit/etc/</pre></div>
<p><code>docker build -t fluentbit-cs:sim .</code></p>
<p><code>docker run -id --name fluent -v /e/docker/fluentBit/log:/var/log --network 8x_default fluentbit-cs:sim</code></p>
<ol start="2">
<li>mount config to <code>/fluent-bit/etc</code>
</li>
</ol>
<p><code>docker run -id --name fluent -v /e/docker/fluentBit/log:/var/log -v /e/docker/fluentBit/config:/fluent-bit/etc --network 8x_default fluent/fluent-bit:1.9.0</code></p>
<hr>
<p>If you are missing <code>cont2</code> rule, the ES log will trigger exception like single document, it's not combined with log message</p>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://user-images.githubusercontent.com/20685961/163700773-a1c6520b-4830-4700-ad19-0d100b72db60.png"><img src="https://user-images.githubusercontent.com/20685961/163700773-a1c6520b-4830-4700-ad19-0d100b72db60.png" alt="image" style="max-width: 100%;"></a></p>
<p align="center"><em>Obviously It's not my wanted type</em></p>
<section data-footnotes="">
<ol>
<li id="user-content-fn-1">
<p><a href="https://gist.github.com/StevenACoffman/4e267f0f60c8e7fcb3f77b9e504f3bd7">https://gist.github.com/StevenACoffman/4e267f0f60c8e7fcb3f77b9e504f3bd7</a> fluent-filebeat-comparison <a href="#fnref-1" data-footnote-backref="" aria-label="Back to content"><g-emoji class="g-emoji" alias="leftwards_arrow_with_hook" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/21a9.png">â†©</g-emoji></a></p>
</li>
<li id="user-content-fn-2">
<p><a href="https://docs.fluentbit.io/manual/administration/configuring-fluent-bit/multiline-parsing" rel="nofollow">https://docs.fluentbit.io/manual/administration/configuring-fluent-bit/multiline-parsing</a> <a href="#fnref-2" data-footnote-backref="" aria-label="Back to content"><g-emoji class="g-emoji" alias="leftwards_arrow_with_hook" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/21a9.png">â†©</g-emoji></a></p>
</li>
<li id="user-content-fn-3">
<p><a href="https://docs.fluentbit.io/manual/pipeline/inputs/tail" rel="nofollow">https://docs.fluentbit.io/manual/pipeline/inputs/tail</a> Tail input <a href="#fnref-3" data-footnote-backref="" aria-label="Back to content"><g-emoji class="g-emoji" alias="leftwards_arrow_with_hook" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/21a9.png">â†©</g-emoji></a></p>
</li>
<li id="user-content-fn-4">
<p><a href="https://kevcodez.de/posts/2019-08-10-fluent-bit-docker-logging-driver-elasticsearch/" rel="nofollow">https://kevcodez.de/posts/2019-08-10-fluent-bit-docker-logging-driver-elasticsearch/</a> <a href="#fnref-4" data-footnote-backref="" aria-label="Back to content"><g-emoji class="g-emoji" alias="leftwards_arrow_with_hook" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/21a9.png">â†©</g-emoji></a></p>
</li>
<li id="user-content-fn-5">
<p><a href="https://juejin.cn/post/6844903847383547911" rel="nofollow">https://juejin.cn/post/6844903847383547911</a> <a href="#fnref-5" data-footnote-backref="" aria-label="Back to content"><g-emoji class="g-emoji" alias="leftwards_arrow_with_hook" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/21a9.png">â†©</g-emoji></a></p>
</li>
</ol>
</section>
]]></description>
                    <pubDate>Sun, 17 Apr 2022 08:01:33 GMT</pubDate>
                        <guid isPermaLink="false">/2022/04/15</guid>
                <link>/2022/04/15</link>
                    <author><![CDATA[bxb100]]></author>
                        <category>DEV</category>
            </item>
            <item>
                <title><![CDATA[å®ç° TDD çš„ä¸€äº›æ·å¾„]]></title>
                    <description><![CDATA[<h2><a id="user-content-tools" class="anchor" aria-hidden="true" href="#tools"><span aria-hidden="true" class="octicon octicon-link"></span></a>Tools</h2>
<h3><a id="user-content-idea" class="anchor" aria-hidden="true" href="#idea"><span aria-hidden="true" class="octicon octicon-link"></span></a>idea</h3>
<ul>
<li>æ‰“å¼€ toggle auto-test <a target="_blank" rel="noopener noreferrer nofollow" href="https://user-images.githubusercontent.com/20685961/162027045-d3259d53-70d2-4e48-8e0c-f3a992e180e5.png"><img src="https://user-images.githubusercontent.com/20685961/162027045-d3259d53-70d2-4e48-8e0c-f3a992e180e5.png" width="20" height="20" style="max-width: 100%;"></a>, ç„¶åç”±äºæ˜¯ç¼–è¯‘çš„æ—¶å€™è§¦å‘æ“ä½œ, æ‰€ä»¥å¯ä»¥å–æ¶ˆ save all <code>ctrl + s</code>  å¿«æ·é”®(ä¾èµ–è‡ªåŠ¨ä¿å­˜), ç„¶åå°†å…¶è®¾ç½®åˆ° build project ä¸­.</li>
<li>ä¹Ÿå¯ä»¥æ‰“å¼€ auto compile ä½†æ˜¯å®æµ‹æœ‰å»¶è¿Ÿ, è€Œä¸”ä¼šåŠ é‡å¿ƒæ™ºè´Ÿæ‹…</li>
</ul>
<p align="center">
<a target="_blank" rel="noopener noreferrer nofollow" href="https://user-images.githubusercontent.com/20685961/162026667-654a24f6-8065-430e-aeaa-0b26fc59ab4b.png"><img src="https://user-images.githubusercontent.com/20685961/162026667-654a24f6-8065-430e-aeaa-0b26fc59ab4b.png" style="max-width: 100%;"></a>
</p>
]]></description>
                    <pubDate>Wed, 06 Apr 2022 16:57:40 GMT</pubDate>
                        <guid isPermaLink="false">/2022/04/14</guid>
                <link>/2022/04/14</link>
                    <author><![CDATA[bxb100]]></author>
                        <category>DEV</category>
            </item>
            <item>
                <title><![CDATA[å®‰è¿ªÂ·å¨å°”-æŒ½æ•‘è®¡åˆ’]]></title>
                    <description><![CDATA[<p>æŒ½æ•‘è®¡åˆ’æ˜¯æˆ‘è¿‘æ¥çœ‹çš„æœ€èƒ½äººçœ‹ä¸‹å»çš„ç§‘å¹»å°è¯´, éå¸¸åˆºæ¿€, å¼•äººå…¥èƒœ.</p>
<details>
<summary>===å‰§é€è­¦å‘Š===</summary>
<hr>
<p>ä¸€å¼€å§‹çš„ä»æˆ‘æ˜¯è°é—ªå›è®°å¿†, ä»ä¾§é¢ä»‹ç»äº†æ ¼é›·æ–¯æ€§æ ¼, ä»¥åŠæ•´ä¸ªäº‹ä»¶çš„èµ·å› . åœ¨å®‡å®™çš„å¤§ç¯å¢ƒä¸‹, ç—›å¤±é˜Ÿå‹, å¤±å¿†, ä¸ç¦è®©äººæ€è€ƒè¿™ä¸€è¡Œç¨‹åˆ°åº•æ˜¯æ¥åšä»€ä¹ˆçš„. è¿™æ—¶å€™æˆ‘ä»¥ä¸ºä»–æ˜¯ä¸€ä¸ªç‰ºç‰²å°æˆ‘çš„è‹±é›„, è¿™ä¸ªå’Œåé¢çš„å¡«å‘äº§ç”Ÿä¸€æ³¢å°é«˜æ½®.</p>
<p>æ­¤åæˆ‘ä»¬é€æ­¥äº†è§£åˆ°æ­¤è¡Œæ˜¯ä¸ºäº†è§£å†³å™¬æ˜Ÿä½“å±æœº, è¿™å‡ ç« å†™çš„æœ‰ç‚¹"æ— è¶£".</p>
<p>åé¢é‡åˆ°æ³¢æ±Ÿæ˜ŸäººåŸºå¾·æ— ç–‘æ˜¯ä¸€ä¸ªé«˜æ½®, è¯­è¨€çš„å¯¹æ¥, æ‹¥æœ‰ç›¸åŒçš„ä½¿å‘½, é€æ¸å‘å±•çš„å¤–æ˜Ÿå‹æƒ…, è¿‡ç¨‹ä¸­è§£å†³å±æœºåšå‡ºçš„ä¸€äº›ç†æ€§æ“ä½œä¹Ÿå¾ˆæœ‰è¶£.</p>
<p>æœ€æ£’çš„æ˜¯, å½“æˆ‘ä¸€ç›´ä¸ºæ ¼é›·æ–¯æ— ç§ç‰ºç‰²çš„ç²¾ç¥æ„ŸåŠ¨çš„æ—¶å€™, æ‰å‘ç°ä»–è¢«è¿«å‚ä¸ä»»åŠ¡, ä¹‹å‰çš„å¤±å¿†ä¹Ÿæ˜¯æ³¨å°„è¯ç‰©å¯¼è‡´çš„, ä½†æ˜¯è¿™ä¹Ÿåœ¨åé¢ä¸ºè§£æ•‘å¤–æ˜Ÿå‹äººå‡åäº†å†…æ ¸. ä¹Ÿæè¿°å‡ºäº†å°½ç®¡ä»–ä¹‹å‰é¢å¯¹æ­»äº¡æ˜¯èƒ†æ€¯çš„, ä½†æ˜¯å½“ä»–çœŸæ­£å»é¢å¯¹çš„æ—¶å€™, åˆä¸ä¼šè½»è¨€æ”¾å¼ƒ.</p>
<p>æœ€åVâ„“ç« (æ³¢æ±Ÿæ˜Ÿçºªå¹´), å½“ 53 å²çš„æ ¼é›·æ–¯çŸ¥é“è‡ªå·±å®Œæˆäº†ä½¿å‘½, æ‹¯æ•‘äº†å¤ªé˜³, å›åˆ°æ³¢æ±Ÿåº§æ˜Ÿçš„æ•™å®¤, é¢å¯¹å¹¼å¹´æ³¢æ±Ÿåº§äººè¯´é“</p>
<blockquote>
<p>â€œä½ ä»¬è°èƒ½å‘Šè¯‰æˆ‘å…‰é€Ÿæ˜¯å¤šå°‘ï¼Ÿâ€</p>
<p>12ä¸ªå­©å­ä¸¾èµ·äº†æ‰‹çˆªã€‚â€</p>
</blockquote>
<p>å’Œå‰é¢å‡ ç« ä¾§é¢æå†™é¦–å°¾å‘¼åº”.</p>
<hr>
</details>
<p>äººç±»çš„èµæ­Œæ˜¯å‹‡æ°”é“ºå°±è€Œæˆçš„</p>
]]></description>
                    <pubDate>Mon, 10 Jan 2022 05:45:59 GMT</pubDate>
                        <guid isPermaLink="false">/2021/12/4</guid>
                <link>/2021/12/4</link>
                    <author><![CDATA[bxb100]]></author>
                        <category>è¯»åæ„Ÿ</category>
            </item>
            <item>
                <title><![CDATA[DUNE-0]]></title>
                    <description><![CDATA[Empty]]></description>
                    <pubDate>Sat, 01 Jan 2022 13:35:05 GMT</pubDate>
                        <guid isPermaLink="false">https://github.com/bxb100/bxb100.github.io/releases/tag/DUNE?p&#x3D;0</guid>
                <link>https://github.com/bxb100/bxb100.github.io/releases/tag/DUNE?p&#x3D;0</link>
                        <enclosure url="https://github.com/bxb100/bxb100.github.io/releases/download/DUNE/Dune.-.01-889587703.mp3" length="64683362" type="audio/mpeg" />
                        <itunes:image href="https://cdn.jsdelivr.net/gh/bxb100/bxb100@master/png2.png" />
                    <author><![CDATA[bxb100]]></author>
                    <category>Podcast</category>
            </item>
            <item>
                <title><![CDATA[DUNE-1]]></title>
                    <description><![CDATA[Empty]]></description>
                    <pubDate>Sat, 01 Jan 2022 13:35:04 GMT</pubDate>
                        <guid isPermaLink="false">https://github.com/bxb100/bxb100.github.io/releases/tag/DUNE?p&#x3D;1</guid>
                <link>https://github.com/bxb100/bxb100.github.io/releases/tag/DUNE?p&#x3D;1</link>
                        <enclosure url="https://github.com/bxb100/bxb100.github.io/releases/download/DUNE/Dune.-.02-889587691.mp3" length="72694803" type="audio/mpeg" />
                        <itunes:image href="https://cdn.jsdelivr.net/gh/bxb100/bxb100@master/png2.png" />
                    <author><![CDATA[bxb100]]></author>
                    <category>Podcast</category>
            </item>
            <item>
                <title><![CDATA[DUNE-2]]></title>
                    <description><![CDATA[Empty]]></description>
                    <pubDate>Sat, 01 Jan 2022 13:35:03 GMT</pubDate>
                        <guid isPermaLink="false">https://github.com/bxb100/bxb100.github.io/releases/tag/DUNE?p&#x3D;2</guid>
                <link>https://github.com/bxb100/bxb100.github.io/releases/tag/DUNE?p&#x3D;2</link>
                        <enclosure url="https://github.com/bxb100/bxb100.github.io/releases/download/DUNE/Dune.-.03-889587682.mp3" length="70712841" type="audio/mpeg" />
                        <itunes:image href="https://cdn.jsdelivr.net/gh/bxb100/bxb100@master/png2.png" />
                    <author><![CDATA[bxb100]]></author>
                    <category>Podcast</category>
            </item>
            <item>
                <title><![CDATA[DUNE-3]]></title>
                    <description><![CDATA[Empty]]></description>
                    <pubDate>Sat, 01 Jan 2022 13:35:02 GMT</pubDate>
                        <guid isPermaLink="false">https://github.com/bxb100/bxb100.github.io/releases/tag/DUNE?p&#x3D;3</guid>
                <link>https://github.com/bxb100/bxb100.github.io/releases/tag/DUNE?p&#x3D;3</link>
                        <enclosure url="https://github.com/bxb100/bxb100.github.io/releases/download/DUNE/Dune.-.04-889587673.mp3" length="70724126" type="audio/mpeg" />
                        <itunes:image href="https://cdn.jsdelivr.net/gh/bxb100/bxb100@master/png2.png" />
                    <author><![CDATA[bxb100]]></author>
                    <category>Podcast</category>
            </item>
            <item>
                <title><![CDATA[DUNE-4]]></title>
                    <description><![CDATA[Empty]]></description>
                    <pubDate>Sat, 01 Jan 2022 13:35:01 GMT</pubDate>
                        <guid isPermaLink="false">https://github.com/bxb100/bxb100.github.io/releases/tag/DUNE?p&#x3D;4</guid>
                <link>https://github.com/bxb100/bxb100.github.io/releases/tag/DUNE?p&#x3D;4</link>
                        <enclosure url="https://github.com/bxb100/bxb100.github.io/releases/download/DUNE/Dune.-.05-889587658.mp3" length="67795904" type="audio/mpeg" />
                        <itunes:image href="https://cdn.jsdelivr.net/gh/bxb100/bxb100@master/png2.png" />
                    <author><![CDATA[bxb100]]></author>
                    <category>Podcast</category>
            </item>
            <item>
                <title><![CDATA[DUNE-5]]></title>
                    <description><![CDATA[Empty]]></description>
                    <pubDate>Sat, 01 Jan 2022 13:35:00 GMT</pubDate>
                        <guid isPermaLink="false">https://github.com/bxb100/bxb100.github.io/releases/tag/DUNE?p&#x3D;5</guid>
                <link>https://github.com/bxb100/bxb100.github.io/releases/tag/DUNE?p&#x3D;5</link>
                        <enclosure url="https://github.com/bxb100/bxb100.github.io/releases/download/DUNE/Dune.-.06-889587646.mp3" length="72743705" type="audio/mpeg" />
                        <itunes:image href="https://cdn.jsdelivr.net/gh/bxb100/bxb100@master/png2.png" />
                    <author><![CDATA[bxb100]]></author>
                    <category>Podcast</category>
            </item>
            <item>
                <title><![CDATA[DUNE-6]]></title>
                    <description><![CDATA[Empty]]></description>
                    <pubDate>Sat, 01 Jan 2022 13:34:59 GMT</pubDate>
                        <guid isPermaLink="false">https://github.com/bxb100/bxb100.github.io/releases/tag/DUNE?p&#x3D;6</guid>
                <link>https://github.com/bxb100/bxb100.github.io/releases/tag/DUNE?p&#x3D;6</link>
                        <enclosure url="https://github.com/bxb100/bxb100.github.io/releases/download/DUNE/Dune.-.07-889587631.mp3" length="70060825" type="audio/mpeg" />
                        <itunes:image href="https://cdn.jsdelivr.net/gh/bxb100/bxb100@master/png2.png" />
                    <author><![CDATA[bxb100]]></author>
                    <category>Podcast</category>
            </item>
            <item>
                <title><![CDATA[DUNE-7]]></title>
                    <description><![CDATA[Empty]]></description>
                    <pubDate>Sat, 01 Jan 2022 13:34:58 GMT</pubDate>
                        <guid isPermaLink="false">https://github.com/bxb100/bxb100.github.io/releases/tag/DUNE?p&#x3D;7</guid>
                <link>https://github.com/bxb100/bxb100.github.io/releases/tag/DUNE?p&#x3D;7</link>
                        <enclosure url="https://github.com/bxb100/bxb100.github.io/releases/download/DUNE/Dune.-.08-889587616.mp3" length="73733432" type="audio/mpeg" />
                        <itunes:image href="https://cdn.jsdelivr.net/gh/bxb100/bxb100@master/png2.png" />
                    <author><![CDATA[bxb100]]></author>
                    <category>Podcast</category>
            </item>
            <item>
                <title><![CDATA[DUNE-8]]></title>
                    <description><![CDATA[Empty]]></description>
                    <pubDate>Sat, 01 Jan 2022 13:34:57 GMT</pubDate>
                        <guid isPermaLink="false">https://github.com/bxb100/bxb100.github.io/releases/tag/DUNE?p&#x3D;8</guid>
                <link>https://github.com/bxb100/bxb100.github.io/releases/tag/DUNE?p&#x3D;8</link>
                        <enclosure url="https://github.com/bxb100/bxb100.github.io/releases/download/DUNE/Dune.-.09-889587595.mp3" length="71213974" type="audio/mpeg" />
                        <itunes:image href="https://cdn.jsdelivr.net/gh/bxb100/bxb100@master/png2.png" />
                    <author><![CDATA[bxb100]]></author>
                    <category>Podcast</category>
            </item>
            <item>
                <title><![CDATA[DUNE-9]]></title>
                    <description><![CDATA[Empty]]></description>
                    <pubDate>Sat, 01 Jan 2022 13:34:56 GMT</pubDate>
                        <guid isPermaLink="false">https://github.com/bxb100/bxb100.github.io/releases/tag/DUNE?p&#x3D;9</guid>
                <link>https://github.com/bxb100/bxb100.github.io/releases/tag/DUNE?p&#x3D;9</link>
                        <enclosure url="https://github.com/bxb100/bxb100.github.io/releases/download/DUNE/Dune.-.10-889587586.mp3" length="72066193" type="audio/mpeg" />
                        <itunes:image href="https://cdn.jsdelivr.net/gh/bxb100/bxb100@master/png2.png" />
                    <author><![CDATA[bxb100]]></author>
                    <category>Podcast</category>
            </item>
            <item>
                <title><![CDATA[DUNE-10]]></title>
                    <description><![CDATA[Empty]]></description>
                    <pubDate>Sat, 01 Jan 2022 13:34:55 GMT</pubDate>
                        <guid isPermaLink="false">https://github.com/bxb100/bxb100.github.io/releases/tag/DUNE?p&#x3D;10</guid>
                <link>https://github.com/bxb100/bxb100.github.io/releases/tag/DUNE?p&#x3D;10</link>
                        <enclosure url="https://github.com/bxb100/bxb100.github.io/releases/download/DUNE/Dune.-.11-889587565.mp3" length="72967313" type="audio/mpeg" />
                        <itunes:image href="https://cdn.jsdelivr.net/gh/bxb100/bxb100@master/png2.png" />
                    <author><![CDATA[bxb100]]></author>
                    <category>Podcast</category>
            </item>
            <item>
                <title><![CDATA[DUNE-11]]></title>
                    <description><![CDATA[Empty]]></description>
                    <pubDate>Sat, 01 Jan 2022 13:34:54 GMT</pubDate>
                        <guid isPermaLink="false">https://github.com/bxb100/bxb100.github.io/releases/tag/DUNE?p&#x3D;11</guid>
                <link>https://github.com/bxb100/bxb100.github.io/releases/tag/DUNE?p&#x3D;11</link>
                        <enclosure url="https://github.com/bxb100/bxb100.github.io/releases/download/DUNE/Dune.-.12-889587541.mp3" length="69729801" type="audio/mpeg" />
                        <itunes:image href="https://cdn.jsdelivr.net/gh/bxb100/bxb100@master/png2.png" />
                    <author><![CDATA[bxb100]]></author>
                    <category>Podcast</category>
            </item>
            <item>
                <title><![CDATA[DUNE-12]]></title>
                    <description><![CDATA[Empty]]></description>
                    <pubDate>Sat, 01 Jan 2022 13:34:53 GMT</pubDate>
                        <guid isPermaLink="false">https://github.com/bxb100/bxb100.github.io/releases/tag/DUNE?p&#x3D;12</guid>
                <link>https://github.com/bxb100/bxb100.github.io/releases/tag/DUNE?p&#x3D;12</link>
                        <enclosure url="https://github.com/bxb100/bxb100.github.io/releases/download/DUNE/Dune.-.13-889587511.mp3" length="63116433" type="audio/mpeg" />
                        <itunes:image href="https://cdn.jsdelivr.net/gh/bxb100/bxb100@master/png2.png" />
                    <author><![CDATA[bxb100]]></author>
                    <category>Podcast</category>
            </item>
            <item>
                <title><![CDATA[DUNE-13]]></title>
                    <description><![CDATA[Empty]]></description>
                    <pubDate>Sat, 01 Jan 2022 13:34:52 GMT</pubDate>
                        <guid isPermaLink="false">https://github.com/bxb100/bxb100.github.io/releases/tag/DUNE?p&#x3D;13</guid>
                <link>https://github.com/bxb100/bxb100.github.io/releases/tag/DUNE?p&#x3D;13</link>
                        <enclosure url="https://github.com/bxb100/bxb100.github.io/releases/download/DUNE/Dune.-.14-889587499.mp3" length="57467714" type="audio/mpeg" />
                        <itunes:image href="https://cdn.jsdelivr.net/gh/bxb100/bxb100@master/png2.png" />
                    <author><![CDATA[bxb100]]></author>
                    <category>Podcast</category>
            </item>
            <item>
                <title><![CDATA[DUNE-14]]></title>
                    <description><![CDATA[Empty]]></description>
                    <pubDate>Sat, 01 Jan 2022 13:34:51 GMT</pubDate>
                        <guid isPermaLink="false">https://github.com/bxb100/bxb100.github.io/releases/tag/DUNE?p&#x3D;14</guid>
                <link>https://github.com/bxb100/bxb100.github.io/releases/tag/DUNE?p&#x3D;14</link>
                        <enclosure url="https://github.com/bxb100/bxb100.github.io/releases/download/DUNE/Dune.-.15-889587478.mp3" length="66124067" type="audio/mpeg" />
                        <itunes:image href="https://cdn.jsdelivr.net/gh/bxb100/bxb100@master/png2.png" />
                    <author><![CDATA[bxb100]]></author>
                    <category>Podcast</category>
            </item>
            <item>
                <title><![CDATA[DUNE-15]]></title>
                    <description><![CDATA[Empty]]></description>
                    <pubDate>Sat, 01 Jan 2022 13:34:50 GMT</pubDate>
                        <guid isPermaLink="false">https://github.com/bxb100/bxb100.github.io/releases/tag/DUNE?p&#x3D;15</guid>
                <link>https://github.com/bxb100/bxb100.github.io/releases/tag/DUNE?p&#x3D;15</link>
                        <enclosure url="https://github.com/bxb100/bxb100.github.io/releases/download/DUNE/Dune.-.16-889587466.mp3" length="46723238" type="audio/mpeg" />
                        <itunes:image href="https://cdn.jsdelivr.net/gh/bxb100/bxb100@master/png2.png" />
                    <author><![CDATA[bxb100]]></author>
                    <category>Podcast</category>
            </item>
            <item>
                <title><![CDATA[DUNE-16]]></title>
                    <description><![CDATA[Empty]]></description>
                    <pubDate>Sat, 01 Jan 2022 13:34:49 GMT</pubDate>
                        <guid isPermaLink="false">https://github.com/bxb100/bxb100.github.io/releases/tag/DUNE?p&#x3D;16</guid>
                <link>https://github.com/bxb100/bxb100.github.io/releases/tag/DUNE?p&#x3D;16</link>
                        <enclosure url="https://github.com/bxb100/bxb100.github.io/releases/download/DUNE/Dune.-.17-889587460.mp3" length="71421282" type="audio/mpeg" />
                        <itunes:image href="https://cdn.jsdelivr.net/gh/bxb100/bxb100@master/png2.png" />
                    <author><![CDATA[bxb100]]></author>
                    <category>Podcast</category>
            </item>
            <item>
                <title><![CDATA[DUNE-17]]></title>
                    <description><![CDATA[Empty]]></description>
                    <pubDate>Sat, 01 Jan 2022 13:34:48 GMT</pubDate>
                        <guid isPermaLink="false">https://github.com/bxb100/bxb100.github.io/releases/tag/DUNE?p&#x3D;17</guid>
                <link>https://github.com/bxb100/bxb100.github.io/releases/tag/DUNE?p&#x3D;17</link>
                        <enclosure url="https://github.com/bxb100/bxb100.github.io/releases/download/DUNE/Dune.-.18-889587448.mp3" length="57753599" type="audio/mpeg" />
                        <itunes:image href="https://cdn.jsdelivr.net/gh/bxb100/bxb100@master/png2.png" />
                    <author><![CDATA[bxb100]]></author>
                    <category>Podcast</category>
            </item>
            <item>
                <title><![CDATA[Java ç¨‹åºæ­»é”é—®é¢˜åŸç†åŠè§£å†³æ–¹æ¡ˆ]]></title>
                    <description><![CDATA[<blockquote>
<p>åŸæ–‡: <a href="https://www.ibm.com/developerworks/cn/java/j-lo-deadlock/" rel="nofollow">https://www.ibm.com/developerworks/cn/java/j-lo-deadlock/</a></p>
</blockquote>
<hr>
<p>Java è¯­è¨€é€šè¿‡ synchronized å…³é”®å­—æ¥ä¿è¯åŸå­æ€§ï¼Œè¿™æ˜¯å› ä¸ºæ¯ä¸€ä¸ª Object éƒ½æœ‰ä¸€ä¸ªéšå«çš„é”ï¼Œè¿™ä¸ªä¹Ÿç§°ä½œç›‘è§†å™¨å¯¹è±¡ã€‚åœ¨è¿›å…¥ synchronized ä¹‹å‰è‡ªåŠ¨è·å–æ­¤å†…éƒ¨é”ï¼Œè€Œä¸€æ—¦ç¦»å¼€æ­¤æ–¹å¼ï¼Œæ— è®ºæ˜¯å®Œæˆæˆ–è€…ä¸­æ–­éƒ½ä¼šè‡ªåŠ¨é‡Šæ”¾é”ã€‚æ˜¾ç„¶è¿™æ˜¯ä¸€ä¸ªç‹¬å é”ï¼Œæ¯ä¸ªé”è¯·æ±‚ä¹‹é—´æ˜¯äº’æ–¥çš„ã€‚ç›¸å¯¹äºä¼—å¤šé«˜çº§é” (Lock/ReadWriteLock ç­‰)ï¼Œsynchronized çš„ä»£ä»·éƒ½æ¯”åè€…è¦é«˜ã€‚ä½†æ˜¯ synchronzied çš„è¯­æ³•æ¯”è¾ƒç®€å•ï¼Œè€Œä¸”ä¹Ÿæ¯”è¾ƒå®¹æ˜“ä½¿ç”¨å’Œç†è§£ã€‚Lock ä¸€æ—¦è°ƒç”¨äº† lock() æ–¹æ³•è·å–åˆ°é”è€Œæœªæ­£ç¡®é‡Šæ”¾çš„è¯å¾ˆæœ‰å¯èƒ½é€ æˆæ­»é”ï¼Œæ‰€ä»¥ Lock çš„é‡Šæ”¾æ“ä½œæ€»æ˜¯è·Ÿåœ¨ finally ä»£ç å—é‡Œé¢ï¼Œè¿™åœ¨ä»£ç ç»“æ„ä¸Šä¹Ÿæ˜¯ä¸€æ¬¡è°ƒæ•´å’Œå†—ä½™ã€‚Lock çš„å®ç°å·²ç»å°†ç¡¬ä»¶èµ„æºç”¨åˆ°äº†æè‡´ï¼Œæ‰€ä»¥æœªæ¥å¯ä¼˜åŒ–çš„ç©ºé—´ä¸å¤§ï¼Œé™¤éç¡¬ä»¶æœ‰äº†æ›´é«˜çš„æ€§èƒ½ï¼Œä½†æ˜¯ synchronized åªæ˜¯è§„èŒƒçš„ä¸€ç§å®ç°ï¼Œè¿™åœ¨ä¸åŒçš„å¹³å°ä¸åŒçš„ç¡¬ä»¶è¿˜æœ‰å¾ˆé«˜çš„æå‡ç©ºé—´ï¼Œæœªæ¥ Java é”ä¸Šçš„ä¼˜åŒ–ä¹Ÿä¼šä¸»è¦åœ¨è¿™ä¸Šé¢ã€‚æ—¢ç„¶ synchronzied éƒ½ä¸å¯èƒ½é¿å…æ­»é”äº§ç”Ÿï¼Œé‚£ä¹ˆæ­»é”æƒ…å†µä¼šæ˜¯ç»å¸¸å®¹æ˜“å‡ºç°çš„é”™è¯¯ï¼Œä¸‹é¢å…·ä½“æè¿°æ­»é”å‘ç”Ÿçš„åŸå› åŠè§£å†³æ–¹æ³•ã€‚</p>
<h1><a id="user-content-æ­»é”æè¿°" class="anchor" aria-hidden="true" href="#æ­»é”æè¿°"><span aria-hidden="true" class="octicon octicon-link"></span></a>æ­»é”æè¿°</h1>
<p>æ­»é”æ˜¯æ“ä½œç³»ç»Ÿå±‚é¢çš„ä¸€ä¸ªé”™è¯¯ï¼Œæ˜¯è¿›ç¨‹æ­»é”çš„ç®€ç§°ï¼Œæœ€æ—©åœ¨ 1965 å¹´ç”± Dijkstra åœ¨ç ”ç©¶é“¶è¡Œå®¶ç®—æ³•æ—¶æå‡ºçš„ï¼Œå®ƒæ˜¯è®¡ç®—æœºæ“ä½œç³»ç»Ÿä¹ƒè‡³æ•´ä¸ªå¹¶å‘ç¨‹åºè®¾è®¡é¢†åŸŸæœ€éš¾å¤„ç†çš„é—®é¢˜ä¹‹ä¸€ã€‚</p>
<p>äº‹å®ä¸Šï¼Œè®¡ç®—æœºä¸–ç•Œæœ‰å¾ˆå¤šäº‹æƒ…éœ€è¦å¤šçº¿ç¨‹æ–¹å¼å»è§£å†³ï¼Œå› ä¸ºè¿™æ ·æ‰èƒ½æœ€å¤§ç¨‹åº¦ä¸Šåˆ©ç”¨èµ„æºï¼Œæ‰èƒ½ä½“ç°å‡ºè®¡ç®—çš„é«˜æ•ˆã€‚ä½†æ˜¯ï¼Œå®é™…ä¸Šæ¥è¯´ï¼Œè®¡ç®—æœºç³»ç»Ÿä¸­æœ‰å¾ˆå¤šä¸€æ¬¡åªèƒ½ç”±ä¸€ä¸ªè¿›ç¨‹ä½¿ç”¨çš„èµ„æºçš„æƒ…å†µï¼Œä¾‹å¦‚æ‰“å°æœºï¼ŒåŒæ—¶åªèƒ½æœ‰ä¸€ä¸ªè¿›ç¨‹æ§åˆ¶å®ƒã€‚åœ¨å¤šé€šé“ç¨‹åºè®¾è®¡ç¯å¢ƒä¸­ï¼Œè‹¥å¹²è¿›ç¨‹å¾€å¾€è¦å…±äº«è¿™ç±»èµ„æºï¼Œè€Œä¸”ä¸€ä¸ªè¿›ç¨‹æ‰€éœ€è¦çš„èµ„æºè¿˜å¾ˆæœ‰å¯èƒ½ä¸æ­¢ä¸€ä¸ªã€‚å› æ­¤ï¼Œå°±ä¼šå‡ºç°è‹¥å¹²è¿›ç¨‹ç«äº‰æœ‰é™èµ„æºï¼Œåˆæ¨è¿›é¡ºåºä¸å½“ï¼Œä»è€Œæ„æˆæ— é™æœŸå¾ªç¯ç­‰å¾…çš„å±€é¢ã€‚æˆ‘ä»¬ç§°è¿™ç§çŠ¶æ€ä¸ºæ­»é”ã€‚ç®€å•ä¸€ç‚¹æè¿°ï¼Œæ­»é”æ˜¯æŒ‡å¤šä¸ªè¿›ç¨‹å¾ªç¯ç­‰å¾…å®ƒæ–¹å æœ‰çš„èµ„æºè€Œæ— é™æœŸåœ°åƒµæŒä¸‹å»çš„å±€é¢ã€‚å¾ˆæ˜¾ç„¶ï¼Œå¦‚æœæ²¡æœ‰å¤–åŠ›çš„ä½œç”¨ï¼Œé‚£ä¹ˆæ­»é”æ¶‰åŠåˆ°çš„å„ä¸ªè¿›ç¨‹éƒ½å°†æ°¸è¿œå¤„äºå°é”çŠ¶æ€ã€‚</p>
<p>ç³»ç»Ÿå‘ç”Ÿæ­»é”ç°è±¡ä¸ä»…æµªè´¹å¤§é‡çš„ç³»ç»Ÿèµ„æºï¼Œç”šè‡³å¯¼è‡´æ•´ä¸ªç³»ç»Ÿå´©æºƒï¼Œå¸¦æ¥ç¾éš¾æ€§åæœã€‚æ‰€ä»¥ï¼Œå¯¹äºæ­»é”é—®é¢˜åœ¨ç†è®ºä¸Šå’ŒæŠ€æœ¯ä¸Šéƒ½å¿…é¡»äºˆä»¥é«˜åº¦é‡è§†ã€‚</p>
<h2><a id="user-content-é“¶è¡Œå®¶ç®—æ³•" class="anchor" aria-hidden="true" href="#é“¶è¡Œå®¶ç®—æ³•"><span aria-hidden="true" class="octicon octicon-link"></span></a>é“¶è¡Œå®¶ç®—æ³•</h2>
<p>ä¸€ä¸ªé“¶è¡Œå®¶å¦‚ä½•å°†ä¸€å®šæ•°ç›®çš„èµ„é‡‘å®‰å…¨åœ°å€Ÿç»™è‹¥å¹²ä¸ªå®¢æˆ·ï¼Œä½¿è¿™äº›å®¢æˆ·æ—¢èƒ½å€Ÿåˆ°é’±å®Œæˆè¦å¹²çš„äº‹ï¼ŒåŒæ—¶é“¶è¡Œå®¶åˆèƒ½æ”¶å›å…¨éƒ¨èµ„é‡‘è€Œä¸è‡³äºç ´äº§ã€‚é“¶è¡Œå®¶å°±åƒä¸€ä¸ªæ“ä½œç³»ç»Ÿï¼Œå®¢æˆ·å°±åƒè¿è¡Œçš„è¿›ç¨‹ï¼Œé“¶è¡Œå®¶çš„èµ„é‡‘å°±æ˜¯ç³»ç»Ÿçš„èµ„æºã€‚</p>
<p>é“¶è¡Œå®¶ç®—æ³•éœ€è¦ç¡®ä¿ä»¥ä¸‹å››ç‚¹ï¼š</p>
<p>å½“ä¸€ä¸ªé¡¾å®¢å¯¹èµ„é‡‘çš„æœ€å¤§éœ€æ±‚é‡ä¸è¶…è¿‡é“¶è¡Œå®¶ç°æœ‰çš„èµ„é‡‘æ—¶å°±å¯æ¥çº³è¯¥é¡¾å®¢ï¼›
é¡¾å®¢å¯ä»¥åˆ†æœŸè´·æ¬¾, ä½†è´·æ¬¾çš„æ€»æ•°ä¸èƒ½è¶…è¿‡æœ€å¤§éœ€æ±‚é‡ï¼›
å½“é“¶è¡Œå®¶ç°æœ‰çš„èµ„é‡‘ä¸èƒ½æ»¡è¶³é¡¾å®¢å°šéœ€çš„è´·æ¬¾æ•°é¢æ—¶ï¼Œå¯¹é¡¾å®¢çš„è´·æ¬¾å¯æ¨è¿Ÿæ”¯ä»˜ï¼Œä½†æ€»èƒ½ä½¿é¡¾å®¢åœ¨æœ‰é™çš„æ—¶é—´é‡Œå¾—åˆ°è´·æ¬¾ï¼›
å½“é¡¾å®¢å¾—åˆ°æ‰€éœ€çš„å…¨éƒ¨èµ„é‡‘åï¼Œä¸€å®šèƒ½åœ¨æœ‰é™çš„æ—¶é—´é‡Œå½’è¿˜æ‰€æœ‰çš„èµ„é‡‘ã€‚</p>
<h3><a id="user-content-æ¸…å•-1-é“¶è¡Œå®¶ç®—æ³•å®ç°" class="anchor" aria-hidden="true" href="#æ¸…å•-1-é“¶è¡Œå®¶ç®—æ³•å®ç°"><span aria-hidden="true" class="octicon octicon-link"></span></a>æ¸…å• 1. é“¶è¡Œå®¶ç®—æ³•å®ç°</h3>
<div class="highlight highlight-source-java"><pre><span class="pl-c">/*ä¸€å…±æœ‰ï¼•ä¸ªè¿›ç¨‹éœ€è¦è¯·æ±‚èµ„æºï¼Œæœ‰ï¼“ç±»èµ„æº*/</span>
<span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-smi">BankDemo</span> {
    <span class="pl-c">// æ¯ä¸ªè¿›ç¨‹æ‰€éœ€è¦çš„æœ€å¤§èµ„æºæ•° </span>
    <span class="pl-k">public</span> <span class="pl-k">static</span> <span class="pl-smi">int</span>[][] <span class="pl-c1">MAX</span> = {{<span class="pl-c1">7</span>, <span class="pl-c1">5</span>, <span class="pl-c1">3</span>}, {<span class="pl-c1">3</span>, <span class="pl-c1">2</span>, <span class="pl-c1">2</span>}, {<span class="pl-c1">9</span>, <span class="pl-c1">0</span>, <span class="pl-c1">2</span>},
            {<span class="pl-c1">2</span>, <span class="pl-c1">2</span>, <span class="pl-c1">2</span>}, {<span class="pl-c1">4</span>, <span class="pl-c1">3</span>, <span class="pl-c1">3</span>}};
    <span class="pl-c">// ç³»ç»Ÿæ‹¥æœ‰çš„åˆå§‹èµ„æºæ•° </span>
    <span class="pl-k">public</span> <span class="pl-k">static</span> <span class="pl-smi">int</span>[] <span class="pl-c1">AVAILABLE</span> = {<span class="pl-c1">10</span>, <span class="pl-c1">5</span>, <span class="pl-c1">7</span>};
    <span class="pl-c">// ç³»ç»Ÿå·²ç»™æ¯ä¸ªè¿›ç¨‹åˆ†é…çš„èµ„æºæ•° </span>
    <span class="pl-k">public</span> <span class="pl-k">static</span> <span class="pl-smi">int</span>[][] <span class="pl-c1">ALLOCATION</span> = {{<span class="pl-c1">0</span>, <span class="pl-c1">0</span>, <span class="pl-c1">0</span>}, {<span class="pl-c1">0</span>, <span class="pl-c1">0</span>, <span class="pl-c1">0</span>}, {<span class="pl-c1">0</span>, <span class="pl-c1">0</span>, <span class="pl-c1">0</span>},
            {<span class="pl-c1">0</span>, <span class="pl-c1">0</span>, <span class="pl-c1">0</span>}, {<span class="pl-c1">0</span>, <span class="pl-c1">0</span>, <span class="pl-c1">0</span>}};
    <span class="pl-c">// æ¯ä¸ªè¿›ç¨‹è¿˜éœ€è¦çš„èµ„æºæ•° </span>
    <span class="pl-k">public</span> <span class="pl-k">static</span> <span class="pl-smi">int</span>[][] <span class="pl-c1">NEED</span> = {{<span class="pl-c1">7</span>, <span class="pl-c1">5</span>, <span class="pl-c1">3</span>}, {<span class="pl-c1">3</span>, <span class="pl-c1">2</span>, <span class="pl-c1">2</span>}, {<span class="pl-c1">9</span>, <span class="pl-c1">0</span>, <span class="pl-c1">2</span>},
            {<span class="pl-c1">2</span>, <span class="pl-c1">2</span>, <span class="pl-c1">2</span>}, {<span class="pl-c1">4</span>, <span class="pl-c1">3</span>, <span class="pl-c1">3</span>}};
    <span class="pl-c">// æ¯æ¬¡ç”³è¯·çš„èµ„æºæ•° </span>
    <span class="pl-k">public</span> <span class="pl-k">static</span> <span class="pl-smi">int</span>[] <span class="pl-s1">Request</span> = {<span class="pl-c1">0</span>, <span class="pl-c1">0</span>, <span class="pl-c1">0</span>};
    <span class="pl-c">// è¿›ç¨‹æ•°ä¸èµ„æºæ•° </span>
    <span class="pl-k">public</span> <span class="pl-k">static</span> <span class="pl-smi">int</span> <span class="pl-s1">M</span> = <span class="pl-c1">5</span>, <span class="pl-s1">N</span> = <span class="pl-c1">3</span>;
    <span class="pl-smi">int</span> <span class="pl-c1">FALSE</span> = <span class="pl-c1">0</span>;
    <span class="pl-smi">int</span> <span class="pl-c1">TRUE</span> = <span class="pl-c1">1</span>;

    <span class="pl-k">public</span> <span class="pl-smi">void</span> <span class="pl-en">showdata</span>() {
        <span class="pl-smi">int</span> <span class="pl-s1">i</span>, <span class="pl-s1">j</span>;
        <span class="pl-smi">System</span>.<span class="pl-s1">out</span>.<span class="pl-en">print</span>(<span class="pl-s">"ç³»ç»Ÿå¯ç”¨çš„èµ„æºæ•°ä¸º:/n"</span>);
        <span class="pl-k">for</span> (<span class="pl-s1">j</span> = <span class="pl-c1">0</span>; <span class="pl-s1">j</span> &lt; <span class="pl-s1">N</span>; <span class="pl-s1">j</span>++) {
            <span class="pl-smi">System</span>.<span class="pl-s1">out</span>.<span class="pl-en">print</span>(<span class="pl-s">"èµ„æº"</span> + <span class="pl-s1">j</span> + <span class="pl-s">":"</span> + <span class="pl-c1">AVAILABLE</span>[<span class="pl-s1">j</span>] + <span class="pl-s">" "</span>);
        }
        <span class="pl-smi">System</span>.<span class="pl-s1">out</span>.<span class="pl-en">println</span>();
        <span class="pl-smi">System</span>.<span class="pl-s1">out</span>.<span class="pl-en">println</span>(<span class="pl-s">"å„è¿›ç¨‹è¿˜éœ€è¦çš„èµ„æºé‡:"</span>);
        <span class="pl-k">for</span> (<span class="pl-s1">i</span> = <span class="pl-c1">0</span>; <span class="pl-s1">i</span> &lt; <span class="pl-s1">M</span>; <span class="pl-s1">i</span>++) {
            <span class="pl-smi">System</span>.<span class="pl-s1">out</span>.<span class="pl-en">print</span>(<span class="pl-s">"è¿›ç¨‹"</span> + <span class="pl-s1">i</span> + <span class="pl-s">":"</span>);
            <span class="pl-k">for</span> (<span class="pl-s1">j</span> = <span class="pl-c1">0</span>; <span class="pl-s1">j</span> &lt; <span class="pl-s1">N</span>; <span class="pl-s1">j</span>++) {
                <span class="pl-smi">System</span>.<span class="pl-s1">out</span>.<span class="pl-en">print</span>(<span class="pl-s">"èµ„æº"</span> + <span class="pl-s1">j</span> + <span class="pl-s">":"</span> + <span class="pl-c1">NEED</span>[<span class="pl-s1">i</span>][<span class="pl-s1">j</span>] + <span class="pl-s">" "</span>);
            }
            <span class="pl-smi">System</span>.<span class="pl-s1">out</span>.<span class="pl-en">print</span>(<span class="pl-s">"/n"</span>);
        }
        <span class="pl-smi">System</span>.<span class="pl-s1">out</span>.<span class="pl-en">print</span>(<span class="pl-s">"å„è¿›ç¨‹å·²ç»å¾—åˆ°çš„èµ„æºé‡: /n"</span>);
        <span class="pl-k">for</span> (<span class="pl-s1">i</span> = <span class="pl-c1">0</span>; <span class="pl-s1">i</span> &lt; <span class="pl-s1">M</span>; <span class="pl-s1">i</span>++) {
            <span class="pl-smi">System</span>.<span class="pl-s1">out</span>.<span class="pl-en">print</span>(<span class="pl-s">"è¿›ç¨‹"</span>);
            <span class="pl-smi">System</span>.<span class="pl-s1">out</span>.<span class="pl-en">print</span>(<span class="pl-s1">i</span>);
            <span class="pl-k">for</span> (<span class="pl-s1">j</span> = <span class="pl-c1">0</span>; <span class="pl-s1">j</span> &lt; <span class="pl-s1">N</span>; <span class="pl-s1">j</span>++) {
                <span class="pl-smi">System</span>.<span class="pl-s1">out</span>.<span class="pl-en">print</span>(<span class="pl-s">"èµ„æº"</span> + <span class="pl-s1">j</span> + <span class="pl-s">":"</span> + <span class="pl-c1">ALLOCATION</span>[<span class="pl-s1">i</span>][<span class="pl-s1">j</span>] + <span class="pl-s">" "</span>);
            }
            <span class="pl-smi">System</span>.<span class="pl-s1">out</span>.<span class="pl-en">print</span>(<span class="pl-s">"/n"</span>);
        }
    }

    <span class="pl-c">// åˆ†é…èµ„æºï¼Œå¹¶é‡æ–°æ›´æ–°å„ç§çŠ¶æ€ </span>
    <span class="pl-k">public</span> <span class="pl-smi">void</span> <span class="pl-en">changdata</span>(<span class="pl-smi">int</span> <span class="pl-s1">k</span>) {
        <span class="pl-smi">int</span> <span class="pl-s1">j</span>;
        <span class="pl-k">for</span> (<span class="pl-s1">j</span> = <span class="pl-c1">0</span>; <span class="pl-s1">j</span> &lt; <span class="pl-s1">N</span>; <span class="pl-s1">j</span>++) {
            <span class="pl-c1">AVAILABLE</span>[<span class="pl-s1">j</span>] = <span class="pl-c1">AVAILABLE</span>[<span class="pl-s1">j</span>] - <span class="pl-s1">Request</span>[<span class="pl-s1">j</span>];
            <span class="pl-c1">ALLOCATION</span>[<span class="pl-s1">k</span>][<span class="pl-s1">j</span>] = <span class="pl-c1">ALLOCATION</span>[<span class="pl-s1">k</span>][<span class="pl-s1">j</span>] + <span class="pl-s1">Request</span>[<span class="pl-s1">j</span>];
            <span class="pl-c1">NEED</span>[<span class="pl-s1">k</span>][<span class="pl-s1">j</span>] = <span class="pl-c1">NEED</span>[<span class="pl-s1">k</span>][<span class="pl-s1">j</span>] - <span class="pl-s1">Request</span>[<span class="pl-s1">j</span>];
        }
    }

 <span class="pl-c">// å›æ”¶èµ„æºï¼Œå¹¶é‡æ–°æ›´æ–°å„ç§çŠ¶æ€ </span>
    <span class="pl-k">public</span> <span class="pl-smi">void</span> <span class="pl-en">rstordata</span>(<span class="pl-smi">int</span> <span class="pl-s1">k</span>) {
        <span class="pl-smi">int</span> <span class="pl-s1">j</span>;
        <span class="pl-k">for</span> (<span class="pl-s1">j</span> = <span class="pl-c1">0</span>; <span class="pl-s1">j</span> &lt; <span class="pl-s1">N</span>; <span class="pl-s1">j</span>++) {
            <span class="pl-c1">AVAILABLE</span>[<span class="pl-s1">j</span>] = <span class="pl-c1">AVAILABLE</span>[<span class="pl-s1">j</span>] + <span class="pl-s1">Request</span>[<span class="pl-s1">j</span>];
            <span class="pl-c1">ALLOCATION</span>[<span class="pl-s1">k</span>][<span class="pl-s1">j</span>] = <span class="pl-c1">ALLOCATION</span>[<span class="pl-s1">k</span>][<span class="pl-s1">j</span>] - <span class="pl-s1">Request</span>[<span class="pl-s1">j</span>];
            <span class="pl-c1">NEED</span>[<span class="pl-s1">k</span>][<span class="pl-s1">j</span>] = <span class="pl-c1">NEED</span>[<span class="pl-s1">k</span>][<span class="pl-s1">j</span>] + <span class="pl-s1">Request</span>[<span class="pl-s1">j</span>];
        }
    }

 <span class="pl-c">// é‡Šæ”¾èµ„æº </span>
    <span class="pl-k">public</span> <span class="pl-smi">void</span> <span class="pl-en">free</span>(<span class="pl-smi">int</span> <span class="pl-s1">k</span>) {
        <span class="pl-k">for</span> (<span class="pl-smi">int</span> <span class="pl-s1">j</span> = <span class="pl-c1">0</span>; <span class="pl-s1">j</span> &lt; <span class="pl-s1">N</span>; <span class="pl-s1">j</span>++) {
            <span class="pl-c1">AVAILABLE</span>[<span class="pl-s1">j</span>] = <span class="pl-c1">AVAILABLE</span>[<span class="pl-s1">j</span>] + <span class="pl-c1">ALLOCATION</span>[<span class="pl-s1">k</span>][<span class="pl-s1">j</span>];
            <span class="pl-smi">System</span>.<span class="pl-s1">out</span>.<span class="pl-en">print</span>(<span class="pl-s">"é‡Šæ”¾"</span> + <span class="pl-s1">k</span> + <span class="pl-s">"å·è¿›ç¨‹çš„"</span> + <span class="pl-s1">j</span> + <span class="pl-s">"èµ„æº!/n"</span>);
        }
    }

    <span class="pl-k">public</span> <span class="pl-smi">int</span> <span class="pl-en">check0</span>(<span class="pl-smi">int</span> <span class="pl-s1">k</span>) {
        <span class="pl-smi">int</span> <span class="pl-s1">j</span>, <span class="pl-s1">n</span> = <span class="pl-c1">0</span>;
        <span class="pl-k">for</span> (<span class="pl-s1">j</span> = <span class="pl-c1">0</span>; <span class="pl-s1">j</span> &lt; <span class="pl-s1">N</span>; <span class="pl-s1">j</span>++) {
            <span class="pl-k">if</span> (<span class="pl-c1">NEED</span>[<span class="pl-s1">k</span>][<span class="pl-s1">j</span>] == <span class="pl-c1">0</span>)
                <span class="pl-s1">n</span>++;
        }
        <span class="pl-k">if</span> (<span class="pl-s1">n</span> == <span class="pl-c1">3</span>)
            <span class="pl-k">return</span> <span class="pl-c1">1</span>;
        <span class="pl-k">else</span>
            <span class="pl-k">return</span> <span class="pl-c1">0</span>;
    }

    <span class="pl-c">// æ£€æŸ¥å®‰å…¨æ€§å‡½æ•° </span>
    <span class="pl-c">//æ‰€ä»¥é“¶è¡Œå®¶ç®—æ³•å…¶æ ¸å¿ƒæ˜¯ï¼šä¿è¯é“¶è¡Œå®¶ç³»ç»Ÿçš„èµ„æºæ•°è‡³å°‘ä¸å°äºä¸€ä¸ªå®¢æˆ·çš„æ‰€éœ€è¦çš„èµ„æºæ•°ã€‚åœ¨å®‰å…¨æ€§æ£€æŸ¥å‡½æ•° chkerr() ä¸Šç”±è¿™ä¸ªæ–¹æ³•æ¥å®ç°</span>
    <span class="pl-c">//è¿™ä¸ªå¾ªç¯æ¥è¿›è¡Œæ ¸å¿ƒåˆ¤æ–­ï¼Œä»è€Œå®Œæˆäº†é“¶è¡Œå®¶ç®—æ³•çš„å®‰å…¨æ€§æ£€æŸ¥å·¥ä½œã€‚</span>
    <span class="pl-k">public</span> <span class="pl-smi">int</span> <span class="pl-en">chkerr</span>(<span class="pl-smi">int</span> <span class="pl-s1">s</span>) {
        <span class="pl-smi">int</span> <span class="pl-c1">WORK</span>;
        <span class="pl-smi">int</span>[] <span class="pl-c1">FINISH</span> = <span class="pl-k">new</span> <span class="pl-smi">int</span>[<span class="pl-s1">M</span>], <span class="pl-s1">temp</span> = <span class="pl-k">new</span> <span class="pl-smi">int</span>[<span class="pl-s1">M</span>];<span class="pl-c">// ä¿å­˜ä¸´æ—¶çš„å®‰å…¨è¿›ç¨‹åºåˆ— </span>
        <span class="pl-smi">int</span> <span class="pl-s1">i</span>, <span class="pl-s1">j</span>, <span class="pl-s1">k</span> = <span class="pl-c1">0</span>;
        <span class="pl-k">for</span> (<span class="pl-s1">i</span> = <span class="pl-c1">0</span>; <span class="pl-s1">i</span> &lt; <span class="pl-s1">M</span>; <span class="pl-s1">i</span>++)
            <span class="pl-c1">FINISH</span>[<span class="pl-s1">i</span>] = <span class="pl-c1">FALSE</span>;
        <span class="pl-k">for</span> (<span class="pl-s1">j</span> = <span class="pl-c1">0</span>; <span class="pl-s1">j</span> &lt; <span class="pl-s1">N</span>; <span class="pl-s1">j</span>++) {
            <span class="pl-c1">WORK</span> = <span class="pl-c1">AVAILABLE</span>[<span class="pl-s1">j</span>]; <span class="pl-c">// ç¬¬ j ä¸ªèµ„æºå¯ç”¨æ•° </span>
            <span class="pl-s1">i</span> = <span class="pl-s1">s</span>;
            <span class="pl-c">// åˆ¤æ–­ç¬¬ i ä¸ªè¿›ç¨‹æ˜¯å¦æ»¡è¶³æ¡ä»¶ </span>
            <span class="pl-k">while</span> (<span class="pl-s1">i</span> &lt; <span class="pl-s1">M</span>) {
                <span class="pl-k">if</span> (<span class="pl-c1">FINISH</span>[<span class="pl-s1">i</span>] == <span class="pl-c1">FALSE</span> &amp;&amp; <span class="pl-c1">NEED</span>[<span class="pl-s1">i</span>][<span class="pl-s1">j</span>] &lt;= <span class="pl-c1">WORK</span>) {
                    <span class="pl-c1">WORK</span> = <span class="pl-c1">WORK</span> + <span class="pl-c1">ALLOCATION</span>[<span class="pl-s1">i</span>][<span class="pl-s1">j</span>];
                    <span class="pl-c1">FINISH</span>[<span class="pl-s1">i</span>] = <span class="pl-c1">TRUE</span>;
                    <span class="pl-s1">temp</span>[<span class="pl-s1">k</span>] = <span class="pl-s1">i</span>;
                    <span class="pl-s1">k</span>++;
                    <span class="pl-s1">i</span> = <span class="pl-c1">0</span>;
                } <span class="pl-k">else</span> {
                    <span class="pl-s1">i</span>++;
                }
            }
            <span class="pl-k">for</span> (<span class="pl-s1">i</span> = <span class="pl-c1">0</span>; <span class="pl-s1">i</span> &lt; <span class="pl-s1">M</span>; <span class="pl-s1">i</span>++)
                <span class="pl-k">if</span> (<span class="pl-c1">FINISH</span>[<span class="pl-s1">i</span>] == <span class="pl-c1">FALSE</span>) {
                    <span class="pl-smi">System</span>.<span class="pl-s1">out</span>.<span class="pl-en">print</span>(<span class="pl-s">"/n ç³»ç»Ÿä¸å®‰å…¨!!! æœ¬æ¬¡èµ„æºç”³è¯·ä¸æˆåŠŸ!/n"</span>);
                    <span class="pl-k">return</span> <span class="pl-c1">1</span>;
                }
        }
        <span class="pl-smi">System</span>.<span class="pl-s1">out</span>.<span class="pl-en">print</span>(<span class="pl-s">"/n ç»å®‰å…¨æ€§æ£€æŸ¥ï¼Œç³»ç»Ÿå®‰å…¨ï¼Œæœ¬æ¬¡åˆ†é…æˆåŠŸã€‚/n"</span>);
        <span class="pl-smi">System</span>.<span class="pl-s1">out</span>.<span class="pl-en">print</span>(<span class="pl-s">"æœ¬æ¬¡å®‰å…¨åºåˆ—ï¼š"</span>);
        <span class="pl-k">for</span> (<span class="pl-s1">i</span> = <span class="pl-c1">0</span>; <span class="pl-s1">i</span> &lt; <span class="pl-s1">M</span> - <span class="pl-c1">1</span>; <span class="pl-s1">i</span>++) {
            <span class="pl-smi">System</span>.<span class="pl-s1">out</span>.<span class="pl-en">print</span>(<span class="pl-s">"è¿›ç¨‹"</span> + <span class="pl-s1">temp</span>[<span class="pl-s1">i</span>] + <span class="pl-s">"-&gt;"</span>);
        }
        <span class="pl-smi">System</span>.<span class="pl-s1">out</span>.<span class="pl-en">print</span>(<span class="pl-s">"è¿›ç¨‹"</span> + <span class="pl-s1">temp</span>[<span class="pl-s1">M</span> - <span class="pl-c1">1</span>]);
        <span class="pl-smi">System</span>.<span class="pl-s1">out</span>.<span class="pl-en">println</span>(<span class="pl-s">"/n"</span>);
        <span class="pl-k">return</span> <span class="pl-c1">0</span>;
    }
}</pre></div>
<h2><a id="user-content-æ­»é”ç¤ºä¾‹" class="anchor" aria-hidden="true" href="#æ­»é”ç¤ºä¾‹"><span aria-hidden="true" class="octicon octicon-link"></span></a>æ­»é”ç¤ºä¾‹</h2>
<p>æ­»é”é—®é¢˜æ˜¯å¤šçº¿ç¨‹ç‰¹æœ‰çš„é—®é¢˜ï¼Œå®ƒå¯ä»¥è¢«è®¤ä¸ºæ˜¯çº¿ç¨‹é—´åˆ‡æ¢æ¶ˆè€—ç³»ç»Ÿæ€§èƒ½çš„ä¸€ç§æç«¯æƒ…å†µã€‚åœ¨æ­»é”æ—¶ï¼Œçº¿ç¨‹é—´ç›¸äº’ç­‰å¾…èµ„æºï¼Œè€Œåˆä¸é‡Šæ”¾è‡ªèº«çš„èµ„æºï¼Œå¯¼è‡´æ— ç©·æ— å°½çš„ç­‰å¾…ï¼Œå…¶ç»“æœæ˜¯ç³»ç»Ÿä»»åŠ¡æ°¸è¿œæ— æ³•æ‰§è¡Œå®Œæˆã€‚æ­»é”é—®é¢˜æ˜¯åœ¨å¤šçº¿ç¨‹å¼€å‘ä¸­åº”è¯¥åšå†³é¿å…å’Œæœç»çš„é—®é¢˜ã€‚</p>
<p>ä¸€èˆ¬æ¥è¯´ï¼Œè¦å‡ºç°æ­»é”é—®é¢˜éœ€è¦æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š</p>
<ol>
<li>
<strong>äº’æ–¥æ¡ä»¶</strong>ï¼šä¸€ä¸ªèµ„æºæ¯æ¬¡åªèƒ½è¢«ä¸€ä¸ªçº¿ç¨‹ä½¿ç”¨ã€‚</li>
<li>
<strong>è¯·æ±‚ä¸ä¿æŒæ¡ä»¶</strong>ï¼šä¸€ä¸ªè¿›ç¨‹å› è¯·æ±‚èµ„æºè€Œé˜»å¡æ—¶ï¼Œå¯¹å·²è·å¾—çš„èµ„æºä¿æŒä¸æ”¾ã€‚</li>
<li>
<strong>ä¸å‰¥å¤ºæ¡ä»¶</strong>ï¼šè¿›ç¨‹å·²è·å¾—çš„èµ„æºï¼Œåœ¨æœªä½¿ç”¨å®Œä¹‹å‰ï¼Œä¸èƒ½å¼ºè¡Œå‰¥å¤ºã€‚</li>
<li>
<strong>å¾ªç¯ç­‰å¾…æ¡ä»¶</strong>ï¼šè‹¥å¹²è¿›ç¨‹ä¹‹é—´å½¢æˆä¸€ç§å¤´å°¾ç›¸æ¥çš„å¾ªç¯ç­‰å¾…èµ„æºå…³ç³»ã€‚</li>
</ol>
<p>åªè¦ç ´åæ­»é” 4 ä¸ªå¿…è¦æ¡ä»¶ä¹‹ä¸€ä¸­çš„ä»»ä½•ä¸€ä¸ªï¼Œæ­»é”é—®é¢˜å°±èƒ½è¢«è§£å†³ã€‚</p>
<p>æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸ªç¤ºä¾‹ï¼Œå‰é¢è¯´è¿‡ï¼Œæ­»é”æ˜¯ä¸¤ä¸ªç”šè‡³å¤šä¸ªçº¿ç¨‹è¢«æ°¸ä¹…é˜»å¡æ—¶çš„ä¸€ç§è¿è¡Œå±€é¢ï¼Œè¿™ç§å±€é¢çš„ç”Ÿæˆä¼´éšç€è‡³å°‘ä¸¤ä¸ªçº¿ç¨‹å’Œä¸¤ä¸ªæˆ–è€…å¤šä¸ªèµ„æºã€‚ä»£ç æ¸…å• 2 æ‰€ç¤ºçš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬ç¼–å†™äº†ä¸€ä¸ªç®€å•çš„ç¨‹åºï¼Œå®ƒå°†ä¼šå¼•èµ·æ­»é”å‘ç”Ÿï¼Œç„¶åæˆ‘ä»¬å°±ä¼šæ˜ç™½å¦‚ä½•åˆ†æå®ƒã€‚</p>
<h3><a id="user-content-æ¸…å•-2-æ­»é”ç¤ºä¾‹" class="anchor" aria-hidden="true" href="#æ¸…å•-2-æ­»é”ç¤ºä¾‹"><span aria-hidden="true" class="octicon octicon-link"></span></a>æ¸…å• 2. æ­»é”ç¤ºä¾‹</h3>
<div class="highlight highlight-source-java"><pre><span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-smi">ThreadDeadlock</span> {

    <span class="pl-k">public</span> <span class="pl-k">static</span> <span class="pl-smi">void</span> <span class="pl-en">main</span>(<span class="pl-smi">String</span>[] <span class="pl-s1">args</span>) <span class="pl-k">throws</span> <span class="pl-smi">InterruptedException</span> {
        <span class="pl-smi">Object</span> <span class="pl-s1">obj1</span> = <span class="pl-k">new</span> <span class="pl-smi">Object</span>();
        <span class="pl-smi">Object</span> <span class="pl-s1">obj2</span> = <span class="pl-k">new</span> <span class="pl-smi">Object</span>();
        <span class="pl-smi">Object</span> <span class="pl-s1">obj3</span> = <span class="pl-k">new</span> <span class="pl-smi">Object</span>();

        <span class="pl-smi">Thread</span> <span class="pl-s1">t1</span> = <span class="pl-k">new</span> <span class="pl-smi">Thread</span>(<span class="pl-k">new</span> <span class="pl-smi">SyncThread</span>(<span class="pl-s1">obj1</span>, <span class="pl-s1">obj2</span>), <span class="pl-s">"t1"</span>);
        <span class="pl-smi">Thread</span> <span class="pl-s1">t2</span> = <span class="pl-k">new</span> <span class="pl-smi">Thread</span>(<span class="pl-k">new</span> <span class="pl-smi">SyncThread</span>(<span class="pl-s1">obj2</span>, <span class="pl-s1">obj3</span>), <span class="pl-s">"t2"</span>);
        <span class="pl-smi">Thread</span> <span class="pl-s1">t3</span> = <span class="pl-k">new</span> <span class="pl-smi">Thread</span>(<span class="pl-k">new</span> <span class="pl-smi">SyncThread</span>(<span class="pl-s1">obj3</span>, <span class="pl-s1">obj1</span>), <span class="pl-s">"t3"</span>);

        <span class="pl-s1">t1</span>.<span class="pl-en">start</span>();
        <span class="pl-s1">Thread</span>.<span class="pl-en">sleep</span>(<span class="pl-c1">5000</span>);
        <span class="pl-s1">t2</span>.<span class="pl-en">start</span>();
        <span class="pl-s1">Thread</span>.<span class="pl-en">sleep</span>(<span class="pl-c1">5000</span>);
        <span class="pl-s1">t3</span>.<span class="pl-en">start</span>();

    }

}

<span class="pl-k">class</span> <span class="pl-smi">SyncThread</span> <span class="pl-k">implements</span> <span class="pl-smi">Runnable</span> {
    <span class="pl-k">private</span> <span class="pl-k">final</span> <span class="pl-smi">Object</span> <span class="pl-s1">obj1</span>;
    <span class="pl-k">private</span> <span class="pl-k">final</span> <span class="pl-smi">Object</span> <span class="pl-s1">obj2</span>;

    <span class="pl-k">public</span> <span class="pl-smi">SyncThread</span>(<span class="pl-smi">Object</span> <span class="pl-s1">o1</span>, <span class="pl-smi">Object</span> <span class="pl-s1">o2</span>) {
        <span class="pl-smi">this</span>.<span class="pl-s1">obj1</span> = <span class="pl-s1">o1</span>;
        <span class="pl-smi">this</span>.<span class="pl-s1">obj2</span> = <span class="pl-s1">o2</span>;
    }

    <span class="pl-c1">@</span><span class="pl-c1">Override</span>
    <span class="pl-k">public</span> <span class="pl-smi">void</span> <span class="pl-en">run</span>() {
        <span class="pl-smi">String</span> <span class="pl-s1">name</span> = <span class="pl-s1">Thread</span>.<span class="pl-en">currentThread</span>().<span class="pl-en">getName</span>();
        <span class="pl-smi">System</span>.<span class="pl-s1">out</span>.<span class="pl-en">println</span>(<span class="pl-s1">name</span> + <span class="pl-s">" acquiring lock on "</span> + <span class="pl-s1">obj1</span>);
        <span class="pl-k">synchronized</span> (<span class="pl-s1">obj1</span>) {
            <span class="pl-smi">System</span>.<span class="pl-s1">out</span>.<span class="pl-en">println</span>(<span class="pl-s1">name</span> + <span class="pl-s">" acquired lock on "</span> + <span class="pl-s1">obj1</span>);
            <span class="pl-en">work</span>();
            <span class="pl-smi">System</span>.<span class="pl-s1">out</span>.<span class="pl-en">println</span>(<span class="pl-s1">name</span> + <span class="pl-s">" acquiring lock on "</span> + <span class="pl-s1">obj2</span>);
            <span class="pl-k">synchronized</span> (<span class="pl-s1">obj2</span>) {
                <span class="pl-smi">System</span>.<span class="pl-s1">out</span>.<span class="pl-en">println</span>(<span class="pl-s1">name</span> + <span class="pl-s">" acquired lock on "</span> + <span class="pl-s1">obj2</span>);
                <span class="pl-en">work</span>();
            }
            <span class="pl-smi">System</span>.<span class="pl-s1">out</span>.<span class="pl-en">println</span>(<span class="pl-s1">name</span> + <span class="pl-s">" released lock on "</span> + <span class="pl-s1">obj2</span>);
        }
        <span class="pl-smi">System</span>.<span class="pl-s1">out</span>.<span class="pl-en">println</span>(<span class="pl-s1">name</span> + <span class="pl-s">" released lock on "</span> + <span class="pl-s1">obj1</span>);
        <span class="pl-smi">System</span>.<span class="pl-s1">out</span>.<span class="pl-en">println</span>(<span class="pl-s1">name</span> + <span class="pl-s">" finished execution."</span>);
    }

    <span class="pl-k">private</span> <span class="pl-smi">void</span> <span class="pl-en">work</span>() {
        <span class="pl-k">try</span> {
            <span class="pl-s1">Thread</span>.<span class="pl-en">sleep</span>(<span class="pl-c1">30000</span>);
        } <span class="pl-k">catch</span> (<span class="pl-smi">InterruptedException</span> <span class="pl-s1">e</span>) {
            <span class="pl-s1">e</span>.<span class="pl-en">printStackTrace</span>();
        }
    }
}</pre></div>
<p>åœ¨ä¸Šé¢çš„ç¨‹åºä¸­åŒæ­¥çº¿ç¨‹æ­£å®Œæˆ Runnable çš„æ¥å£ï¼Œå®ƒå·¥ä½œçš„æ˜¯ä¸¤ä¸ªå¯¹è±¡ï¼Œè¿™ä¸¤ä¸ªå¯¹è±¡å‘å¯¹æ–¹å¯»æ±‚æ­»é”è€Œä¸”éƒ½åœ¨ä½¿ç”¨åŒæ­¥é˜»å¡ã€‚åœ¨ä¸»å‡½æ•°ä¸­ï¼Œæˆ‘ä½¿ç”¨äº†ä¸‰ä¸ªä¸ºåŒæ­¥çº¿ç¨‹è¿è¡Œçš„çº¿ç¨‹ï¼Œè€Œä¸”åœ¨å…¶ä¸­æ¯ä¸ªçº¿ç¨‹ä¸­éƒ½æœ‰ä¸€ä¸ªå¯å…±äº«çš„èµ„æºã€‚è¿™äº›çº¿ç¨‹ä»¥å‘ç¬¬ä¸€ä¸ªå¯¹è±¡è·å–å°é”è¿™ç§æ–¹å¼è¿è¡Œã€‚ä½†æ˜¯å½“å®ƒè¯•ç€å‘ç¬¬äºŒä¸ªå¯¹è±¡è·å–å°é”æ—¶ï¼Œå®ƒå°±ä¼šè¿›å…¥ç­‰å¾…çŠ¶æ€ï¼Œå› ä¸ºå®ƒå·²ç»è¢«å¦ä¸€ä¸ªçº¿ç¨‹å°é”ä½äº†ã€‚è¿™æ ·ï¼Œåœ¨çº¿ç¨‹å¼•èµ·æ­»é”çš„è¿‡ç¨‹ä¸­ï¼Œå°±å½¢æˆäº†ä¸€ä¸ªä¾èµ–äºèµ„æºçš„å¾ªç¯ã€‚å½“æˆ‘æ‰§è¡Œä¸Šé¢çš„ç¨‹åºæ—¶ï¼Œå°±äº§ç”Ÿäº†è¾“å‡ºï¼Œä½†æ˜¯ç¨‹åºå´å› ä¸ºæ­»é”æ— æ³•åœæ­¢ã€‚è¾“å‡ºå¦‚æ¸…å• 3 æ‰€ç¤ºã€‚</p>
<p>æ¸…å• 3. æ¸…å• 2 è¿è¡Œè¾“å‡º</p>
<pre><code>t1 acquiring lock on java.lang.Object@1dd3812
t1 acquired lock on java.lang.Object@1dd3812
t2 acquiring lock on java.lang.Object@c791b9
t2 acquired lock on java.lang.Object@c791b9
t3 acquiring lock on java.lang.Object@1aa9f99
t3 acquired lock on java.lang.Object@1aa9f99
t1 acquiring lock on java.lang.Object@c791b9
t2 acquiring lock on java.lang.Object@1aa9f99
</code></pre>
<p>åœ¨æ­¤æˆ‘ä»¬å¯ä»¥æ¸…æ¥šåœ°åœ¨è¾“å‡ºç»“æœä¸­è¾¨è®¤å‡ºæ­»é”å±€é¢ï¼Œä½†æ˜¯åœ¨æˆ‘ä»¬å®é™…æ‰€ç”¨çš„åº”ç”¨ä¸­ï¼Œå‘ç°æ­»é”å¹¶å°†å®ƒæ’é™¤æ˜¯éå¸¸éš¾çš„ã€‚</p>
<h1><a id="user-content-æ­»é”æƒ…å†µè¯Šæ–­" class="anchor" aria-hidden="true" href="#æ­»é”æƒ…å†µè¯Šæ–­"><span aria-hidden="true" class="octicon octicon-link"></span></a>æ­»é”æƒ…å†µè¯Šæ–­</h1>
<p>JVM æä¾›äº†ä¸€äº›å·¥å…·å¯ä»¥æ¥å¸®åŠ©è¯Šæ–­æ­»é”çš„å‘ç”Ÿï¼Œå¦‚ä¸‹é¢ç¨‹åºæ¸…å• 4 æ‰€ç¤ºï¼Œæˆ‘ä»¬å®ç°äº†ä¸€ä¸ªæ­»é”ï¼Œç„¶åå°è¯•é€šè¿‡ jstack å‘½ä»¤è¿½è¸ªã€åˆ†ææ­»é”å‘ç”Ÿã€‚</p>
<h3><a id="user-content-æ¸…å•-4-æ­»é”ä»£ç " class="anchor" aria-hidden="true" href="#æ¸…å•-4-æ­»é”ä»£ç "><span aria-hidden="true" class="octicon octicon-link"></span></a>æ¸…å• 4. æ­»é”ä»£ç </h3>
<div class="highlight highlight-source-java"><pre><span class="pl-smi">iimport</span> <span class="pl-s1">java</span>.<span class="pl-s1">util</span>.<span class="pl-s1">concurrent</span>.<span class="pl-s1">locks</span>.<span class="pl-s1">ReentrantLock</span>;

<span class="pl-c">//ä¸‹é¢æ¼”ç¤ºä¸€ä¸ªç®€å•çš„æ­»é”ï¼Œä¸¤ä¸ªçº¿ç¨‹åˆ†åˆ«å ç”¨ south é”å’Œ north é”ï¼Œå¹¶åŒæ—¶è¯·æ±‚å¯¹æ–¹å ç”¨çš„é”ï¼Œå¯¼è‡´æ­»é”</span>
<span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-smi">DeadLock</span> <span class="pl-k">extends</span> <span class="pl-smi">Thread</span> {
    <span class="pl-k">static</span> <span class="pl-smi">ReentrantLock</span> <span class="pl-s1">south</span> = <span class="pl-k">new</span> <span class="pl-smi">ReentrantLock</span>();
    <span class="pl-k">static</span> <span class="pl-smi">ReentrantLock</span> <span class="pl-s1">north</span> = <span class="pl-k">new</span> <span class="pl-smi">ReentrantLock</span>();
    <span class="pl-k">protected</span> <span class="pl-smi">Object</span> <span class="pl-s1">myDirect</span>;

    <span class="pl-k">public</span> <span class="pl-smi">DeadLock</span>(<span class="pl-smi">Object</span> <span class="pl-s1">obj</span>) {
        <span class="pl-smi">this</span>.<span class="pl-s1">myDirect</span> = <span class="pl-s1">obj</span>;
        <span class="pl-k">if</span> (<span class="pl-s1">myDirect</span> == <span class="pl-s1">south</span>) {
            <span class="pl-smi">this</span>.<span class="pl-en">setName</span>(<span class="pl-s">"south"</span>);
        } <span class="pl-k">else</span> {
            <span class="pl-smi">this</span>.<span class="pl-en">setName</span>(<span class="pl-s">"north"</span>);
        }
    }

    <span class="pl-k">public</span> <span class="pl-k">static</span> <span class="pl-smi">void</span> <span class="pl-en">main</span>(<span class="pl-smi">String</span>[] <span class="pl-s1">args</span>) <span class="pl-k">throws</span> <span class="pl-smi">InterruptedException</span> {
        <span class="pl-smi">DeadLock</span> <span class="pl-s1">car2south</span> = <span class="pl-k">new</span> <span class="pl-smi">DeadLock</span>(<span class="pl-s1">south</span>);
        <span class="pl-smi">DeadLock</span> <span class="pl-s1">car2north</span> = <span class="pl-k">new</span> <span class="pl-smi">DeadLock</span>(<span class="pl-s1">north</span>);
        <span class="pl-s1">car2south</span>.<span class="pl-en">start</span>();
        <span class="pl-s1">car2north</span>.<span class="pl-en">start</span>();
    }

    <span class="pl-c1">@</span><span class="pl-c1">Override</span>
    <span class="pl-k">public</span> <span class="pl-smi">void</span> <span class="pl-en">run</span>() {
        <span class="pl-k">if</span> (<span class="pl-s1">myDirect</span> == <span class="pl-s1">south</span>) {
            <span class="pl-k">try</span> {
                <span class="pl-s1">north</span>.<span class="pl-en">lockInterruptibly</span>();<span class="pl-c">//å ç”¨ north</span>
                <span class="pl-k">try</span> {
                    <span class="pl-s1">Thread</span>.<span class="pl-en">sleep</span>(<span class="pl-c1">500</span>);
                } <span class="pl-k">catch</span> (<span class="pl-smi">Exception</span> <span class="pl-s1">ex</span>) {
                    <span class="pl-s1">ex</span>.<span class="pl-en">printStackTrace</span>();
                }
                <span class="pl-s1">south</span>.<span class="pl-en">lockInterruptibly</span>();
                <span class="pl-smi">System</span>.<span class="pl-s1">out</span>.<span class="pl-en">println</span>(<span class="pl-s">"car to south has passed"</span>);
            } <span class="pl-k">catch</span> (<span class="pl-smi">InterruptedException</span> <span class="pl-s1">ex</span>) {
                <span class="pl-smi">System</span>.<span class="pl-s1">out</span>.<span class="pl-en">println</span>(<span class="pl-s">"car to south is killed"</span>);
                <span class="pl-s1">ex</span>.<span class="pl-en">printStackTrace</span>();
            } <span class="pl-k">finally</span> {
                <span class="pl-k">if</span> (<span class="pl-s1">north</span>.<span class="pl-en">isHeldByCurrentThread</span>()) {
                    <span class="pl-s1">north</span>.<span class="pl-en">unlock</span>();
                }
                <span class="pl-k">if</span> (<span class="pl-s1">south</span>.<span class="pl-en">isHeldByCurrentThread</span>()) {
                    <span class="pl-s1">south</span>.<span class="pl-en">unlock</span>();
                }
            }
        }
        <span class="pl-k">if</span> (<span class="pl-s1">myDirect</span> == <span class="pl-s1">north</span>) {
            <span class="pl-k">try</span> {
                <span class="pl-s1">south</span>.<span class="pl-en">lockInterruptibly</span>();<span class="pl-c">//å ç”¨ south</span>
                <span class="pl-k">try</span> {
                    <span class="pl-s1">Thread</span>.<span class="pl-en">sleep</span>(<span class="pl-c1">500</span>);
                } <span class="pl-k">catch</span> (<span class="pl-smi">Exception</span> <span class="pl-s1">ex</span>) {
                    <span class="pl-s1">ex</span>.<span class="pl-en">printStackTrace</span>();
                }
                <span class="pl-s1">north</span>.<span class="pl-en">lockInterruptibly</span>();
                <span class="pl-smi">System</span>.<span class="pl-s1">out</span>.<span class="pl-en">println</span>(<span class="pl-s">"car to north has passed"</span>);
            } <span class="pl-k">catch</span> (<span class="pl-smi">InterruptedException</span> <span class="pl-s1">ex</span>) {
                <span class="pl-smi">System</span>.<span class="pl-s1">out</span>.<span class="pl-en">println</span>(<span class="pl-s">"car to north is killed"</span>);
                <span class="pl-s1">ex</span>.<span class="pl-en">printStackTrace</span>();
            } <span class="pl-k">finally</span> {
                <span class="pl-k">if</span> (<span class="pl-s1">north</span>.<span class="pl-en">isHeldByCurrentThread</span>()) {
                    <span class="pl-s1">north</span>.<span class="pl-en">unlock</span>();
                }
                <span class="pl-k">if</span> (<span class="pl-s1">south</span>.<span class="pl-en">isHeldByCurrentThread</span>()) {
                    <span class="pl-s1">south</span>.<span class="pl-en">unlock</span>();
                }
            }
        }
    }
}</pre></div>
<p>jstack å¯ç”¨äºå¯¼å‡º Java åº”ç”¨ç¨‹åºçš„çº¿ç¨‹å †æ ˆï¼Œ-l é€‰é¡¹ç”¨äºæ‰“å°é”çš„é™„åŠ ä¿¡æ¯ã€‚æˆ‘ä»¬è¿è¡Œ jstack å‘½ä»¤ï¼Œè¾“å‡ºå…¥æ¸…å• 5 å’Œ 6 æ‰€ç¤ºï¼Œå…¶ä¸­æ¸…å• 5 é‡Œé¢å¯ä»¥çœ‹åˆ°çº¿ç¨‹å¤„äºè¿è¡ŒçŠ¶æ€ï¼Œä»£ç ä¸­è°ƒç”¨äº†æ‹¥æœ‰é”æŠ•ç¥¨ã€å®šæ—¶é”ç­‰å€™å’Œå¯ä¸­æ–­é”ç­‰å€™ç­‰ç‰¹æ€§çš„ ReentrantLock é”æœºåˆ¶ã€‚æ¸…å• 6 ç›´æ¥æ‰“å°å‡ºå‡ºç°æ­»é”æƒ…å†µï¼ŒæŠ¥å‘Š north å’Œ sourth ä¸¤ä¸ªçº¿ç¨‹äº’ç›¸ç­‰å¾…èµ„æºï¼Œå‡ºç°äº†æ­»é”ã€‚</p>
<h3><a id="user-content-æ¸…å•-5-jstack-è¿è¡Œè¾“å‡º-1" class="anchor" aria-hidden="true" href="#æ¸…å•-5-jstack-è¿è¡Œè¾“å‡º-1"><span aria-hidden="true" class="octicon octicon-link"></span></a>æ¸…å• 5. jstack è¿è¡Œè¾“å‡º 1</h3>
<pre><code>[root@facenode4 ~]# jstack -l 31274
2015-01-29 12:40:27
Full thread dump Java HotSpot(TM) 64-Bit Server VM (20.45-b01 mixed mode):

"Attach Listener" daemon prio=10 tid=0x00007f6d3c001000 nid=
            0x7a87 waiting on condition [0x0000000000000000]
 java.lang.Thread.State: RUNNABLE

 Locked ownable synchronizers:
 - None

"DestroyJavaVM" prio=10 tid=0x00007f6da4006800 nid=
            0x7a2b waiting on condition [0x0000000000000000]
 java.lang.Thread.State: RUNNABLE

 Locked ownable synchronizers:
 - None

"north" prio=10 tid=0x00007f6da4101800 nid=
            0x7a47 waiting on condition [0x00007f6d8963b000]
 java.lang.Thread.State: WAITING (parking)
 at sun.misc.Unsafe.park(Native Method)
 - parking to wait for &lt;0x000000075903c7c8&gt; (
                            a java.util.concurrent.locks.ReentrantLock$NonfairSync)
 at java.util.concurrent.locks.LockSupport.park(LockSupport.java:156)
 at java.util.concurrent.locks.AbstractQueuedSynchronizer.
                            parkAndCheckInterrupt(AbstractQueuedSynchronizer.java:811)
 at java.util.concurrent.locks.AbstractQueuedSynchronizer.
                            doAcquireInterruptibly(AbstractQueuedSynchronizer.java:867)
 at java.util.concurrent.locks.AbstractQueuedSynchronizer.
                            acquireInterruptibly(AbstractQueuedSynchronizer.java:1201)
 at java.util.concurrent.locks.ReentrantLock.lockInterruptibly(ReentrantLock.java:312)
 at DeadLock.run(DeadLock.java:50)

 Locked ownable synchronizers:
 - &lt;0x000000075903c798&gt; (a java.util.concurrent.locks.ReentrantLock$NonfairSync)

"south" prio=10 tid=0x00007f6da4100000 nid=
                        0x7a46 waiting on condition [0x00007f6d8973c000]
 java.lang.Thread.State: WAITING (parking)
 at sun.misc.Unsafe.park(Native Method)
 - parking to wait for &lt;0x000000075903c798&gt; (
                                        a java.util.concurrent.locks.ReentrantLock$NonfairSync)
 at java.util.concurrent.locks.LockSupport.park(LockSupport.java:156)
 at java.util.concurrent.locks.AbstractQueuedSynchronizer.
                                    parkAndCheckInterrupt(AbstractQueuedSynchronizer.java:811)
 at java.util.concurrent.locks.AbstractQueuedSynchronizer.
                                    doAcquireInterruptibly(AbstractQueuedSynchronizer.java:867)
 at java.util.concurrent.locks.AbstractQueuedSynchronizer.
                                     acquireInterruptibly(AbstractQueuedSynchronizer.java:1201)
 at java.util.concurrent.locks.ReentrantLock.lockInterruptibly(ReentrantLock.java:312)
 at DeadLock.run(DeadLock.java:28)

 Locked ownable synchronizers:
 - &lt;0x000000075903c7c8&gt; (a java.util.concurrent.locks.ReentrantLock$NonfairSync)

"Low Memory Detector" daemon prio=10 tid=0x00007f6da40d2800 nid=
                                    0x7a44 runnable [0x0000000000000000]
 java.lang.Thread.State: RUNNABLE

 Locked ownable synchronizers:
 - None

"C2 CompilerThread1" daemon prio=10 tid=0x00007f6da40d0000 nid=
                                    0x7a43 waiting on condition [0x0000000000000000]
 java.lang.Thread.State: RUNNABLE

 Locked ownable synchronizers:
 - None

"C2 CompilerThread0" daemon prio=10 tid=0x00007f6da40cd000 nid=
                                    0x7a42 waiting on condition [0x0000000000000000]
 java.lang.Thread.State: RUNNABLE

 Locked ownable synchronizers:
 - None

"Signal Dispatcher" daemon prio=10 tid=0x00007f6da40cb000 nid=
                                    0x7a41 runnable [0x0000000000000000]
 java.lang.Thread.State: RUNNABLE

 Locked ownable synchronizers:
 - None

"Finalizer" daemon prio=10 tid=0x00007f6da40af000 nid=
                                      0x7a40 in Object.wait() [0x00007f6d89d44000]
 java.lang.Thread.State: WAITING (on object monitor)
 at java.lang.Object.wait(Native Method)
 - waiting on &lt;0x0000000759001300&gt; (a java.lang.ref.ReferenceQueue$Lock)
 at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:118)
 - locked &lt;0x0000000759001300&gt; (a java.lang.ref.ReferenceQueue$Lock)
 at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:134)
 at java.lang.ref.Finalizer$FinalizerThread.run(Finalizer.java:171)

 Locked ownable synchronizers:
 - None

"Reference Handler" daemon prio=10 tid=0x00007f6da40ad000 nid=
                                       0x7a3f in Object.wait() [0x00007f6d89e45000]
 java.lang.Thread.State: WAITING (on object monitor)
 at java.lang.Object.wait(Native Method)
 - waiting on &lt;0x00000007590011d8&gt; (a java.lang.ref.Reference$Lock)
 at java.lang.Object.wait(Object.java:485)
 at java.lang.ref.Reference$ReferenceHandler.run(Reference.java:116)
 - locked &lt;0x00000007590011d8&gt; (a java.lang.ref.Reference$Lock)

 Locked ownable synchronizers:
 - None

"VM Thread" prio=10 tid=0x00007f6da40a6000 nid=0x7a3e runnable 

"GC task thread#0 (ParallelGC)" prio=10 tid=0x00007f6da4019800 nid=0x7a2c runnable 

"GC task thread#1 (ParallelGC)" prio=10 tid=0x00007f6da401b000 nid=0x7a2d runnable 

"GC task thread#2 (ParallelGC)" prio=10 tid=0x00007f6da401d000 nid=0x7a2e runnable 

"GC task thread#3 (ParallelGC)" prio=10 tid=0x00007f6da401f000 nid=0x7a2f runnable 

"GC task thread#4 (ParallelGC)" prio=10 tid=0x00007f6da4020800 nid=0x7a30 runnable 

"GC task thread#5 (ParallelGC)" prio=10 tid=0x00007f6da4022800 nid=0x7a31 runnable 

"GC task thread#6 (ParallelGC)" prio=10 tid=0x00007f6da4024800 nid=0x7a32 runnable 

"GC task thread#7 (ParallelGC)" prio=10 tid=0x00007f6da4026000 nid=0x7a33 runnable 

"GC task thread#8 (ParallelGC)" prio=10 tid=0x00007f6da4028000 nid=0x7a34 runnable 

"GC task thread#9 (ParallelGC)" prio=10 tid=0x00007f6da402a000 nid=0x7a35 runnable 

"GC task thread#10 (ParallelGC)" prio=10 tid=0x00007f6da402b800 nid=0x7a36 runnable 

"GC task thread#11 (ParallelGC)" prio=10 tid=0x00007f6da402d800 nid=0x7a37 runnable 

"GC task thread#12 (ParallelGC)" prio=10 tid=0x00007f6da402f800 nid=0x7a38 runnable 

"GC task thread#13 (ParallelGC)" prio=10 tid=0x00007f6da4031000 nid=0x7a39 runnable 

"GC task thread#14 (ParallelGC)" prio=10 tid=0x00007f6da4033000 nid=0x7a3a runnable 

"GC task thread#15 (ParallelGC)" prio=10 tid=0x00007f6da4035000 nid=0x7a3b runnable 

"GC task thread#16 (ParallelGC)" prio=10 tid=0x00007f6da4036800 nid=0x7a3c runnable 

"GC task thread#17 (ParallelGC)" prio=10 tid=0x00007f6da4038800 nid=0x7a3d runnable 

"VM Periodic Task Thread" prio=10 tid=0x00007f6da40dd000 nid=0x7a45 waiting on condition 

JNI global references: 886
</code></pre>
<h3><a id="user-content-æ¸…å•-6-jstack-è¿è¡Œè¾“å‡ºç‰‡æ®µ-2" class="anchor" aria-hidden="true" href="#æ¸…å•-6-jstack-è¿è¡Œè¾“å‡ºç‰‡æ®µ-2"><span aria-hidden="true" class="octicon octicon-link"></span></a>æ¸…å• 6. jstack è¿è¡Œè¾“å‡ºç‰‡æ®µ 2</h3>
<pre><code>Found one Java-level deadlock:
=============================
"north":
 waiting for ownable synchronizer 0x000000075903c7c8, (
                                a java.util.concurrent.locks.ReentrantLock$NonfairSync),
 which is held by "south"
"south":
 waiting for ownable synchronizer 0x000000075903c798, (
                                a java.util.concurrent.locks.ReentrantLock$NonfairSync),
 which is held by "north"

Java stack information for the threads listed above:
===================================================
"north":
 at sun.misc.Unsafe.park(Native Method)
 - parking to wait for &lt;0x000000075903c7c8&gt; (
                                 a java.util.concurrent.locks.ReentrantLock$NonfairSync)
 at java.util.concurrent.locks.LockSupport.park(LockSupport.java:156)
 at java.util.concurrent.locks.AbstractQueuedSynchronizer.
                                    parkAndCheckInterrupt(AbstractQueuedSynchronizer.java:811)
 at java.util.concurrent.locks.AbstractQueuedSynchronizer.
                                    doAcquireInterruptibly(AbstractQueuedSynchronizer.java:867)
 at java.util.concurrent.locks.AbstractQueuedSynchronizer.
                                    acquireInterruptibly(AbstractQueuedSynchronizer.java:1201)
 at java.util.concurrent.locks.ReentrantLock.lockInterruptibly(ReentrantLock.java:312)
 at DeadLock.run(DeadLock.java:50)
"south":
 at sun.misc.Unsafe.park(Native Method)
 - parking to wait for &lt;0x000000075903c798&gt; (
                                     a java.util.concurrent.locks.ReentrantLock$NonfairSync)
 at java.util.concurrent.locks.LockSupport.park(LockSupport.java:156)
 at java.util.concurrent.locks.AbstractQueuedSynchronizer.
                                     parkAndCheckInterrupt(AbstractQueuedSynchronizer.java:811)
 at java.util.concurrent.locks.AbstractQueuedSynchronizer.
                                     doAcquireInterruptibly(AbstractQueuedSynchronizer.java:867)
 at java.util.concurrent.locks.AbstractQueuedSynchronizer.
                                     acquireInterruptibly(AbstractQueuedSynchronizer.java:1201)
 at java.util.concurrent.locks.ReentrantLock.lockInterruptibly(ReentrantLock.java:312)
 at DeadLock.run(DeadLock.java:28)

Found 1 deadlock.
</code></pre>
<h1><a id="user-content-æ­»é”è§£å†³æ–¹æ¡ˆ" class="anchor" aria-hidden="true" href="#æ­»é”è§£å†³æ–¹æ¡ˆ"><span aria-hidden="true" class="octicon octicon-link"></span></a>æ­»é”è§£å†³æ–¹æ¡ˆ</h1>
<p>æ­»é”æ˜¯ç”±å››ä¸ªå¿…è¦æ¡ä»¶å¯¼è‡´çš„ï¼Œæ‰€ä»¥ä¸€èˆ¬æ¥è¯´ï¼Œåªè¦ç ´åè¿™å››ä¸ªå¿…è¦æ¡ä»¶ä¸­çš„ä¸€ä¸ªæ¡ä»¶ï¼Œæ­»é”æƒ…å†µå°±åº”è¯¥ä¸ä¼šå‘ç”Ÿã€‚</p>
<p>å¦‚æœæƒ³è¦æ‰“ç ´äº’æ–¥æ¡ä»¶ï¼Œæˆ‘ä»¬éœ€è¦å…è®¸è¿›ç¨‹åŒæ—¶è®¿é—®æŸäº›èµ„æºï¼Œè¿™ç§æ–¹æ³•å—åˆ¶äºå®é™…åœºæ™¯ï¼Œä¸å¤ªå®¹æ˜“å®ç°æ¡ä»¶ï¼›
æ‰“ç ´ä¸å¯æŠ¢å æ¡ä»¶ï¼Œè¿™æ ·éœ€è¦å…è®¸è¿›ç¨‹å¼ºè¡Œä»å æœ‰è€…é‚£é‡Œå¤ºå–æŸäº›èµ„æºï¼Œæˆ–è€…ç®€å•ä¸€ç‚¹ç†è§£ï¼Œå æœ‰èµ„æºçš„è¿›ç¨‹ä¸èƒ½å†ç”³è¯·å æœ‰å…¶ä»–èµ„æºï¼Œå¿…é¡»é‡Šæ”¾æ‰‹ä¸Šçš„èµ„æºä¹‹åæ‰èƒ½å‘èµ·ç”³è¯·ï¼Œè¿™ä¸ªå…¶å®ä¹Ÿå¾ˆéš¾æ‰¾åˆ°é€‚ç”¨åœºæ™¯ï¼›
è¿›ç¨‹åœ¨è¿è¡Œå‰ç”³è¯·å¾—åˆ°æ‰€æœ‰çš„èµ„æºï¼Œå¦åˆ™è¯¥è¿›ç¨‹ä¸èƒ½è¿›å…¥å‡†å¤‡æ‰§è¡ŒçŠ¶æ€ã€‚è¿™ä¸ªæ–¹æ³•çœ‹ä¼¼æœ‰ç‚¹ç”¨å¤„ï¼Œä½†æ˜¯å®ƒçš„ç¼ºç‚¹æ˜¯å¯èƒ½å¯¼è‡´èµ„æºåˆ©ç”¨ç‡å’Œè¿›ç¨‹å¹¶å‘æ€§é™ä½ï¼›
é¿å…å‡ºç°èµ„æºç”³è¯·ç¯è·¯ï¼Œå³å¯¹èµ„æºäº‹å…ˆåˆ†ç±»ç¼–å·ï¼ŒæŒ‰å·åˆ†é…ã€‚è¿™ç§æ–¹å¼å¯ä»¥æœ‰æ•ˆæé«˜èµ„æºçš„åˆ©ç”¨ç‡å’Œç³»ç»Ÿååé‡ï¼Œä½†æ˜¯å¢åŠ äº†ç³»ç»Ÿå¼€é”€ï¼Œå¢å¤§äº†è¿›ç¨‹å¯¹èµ„æºçš„å ç”¨æ—¶é—´ã€‚
å¦‚æœæˆ‘ä»¬åœ¨æ­»é”æ£€æŸ¥æ—¶å‘ç°äº†æ­»é”æƒ…å†µï¼Œé‚£ä¹ˆå°±è¦åŠªåŠ›æ¶ˆé™¤æ­»é”ï¼Œä½¿ç³»ç»Ÿä»æ­»é”çŠ¶æ€ä¸­æ¢å¤è¿‡æ¥ã€‚æ¶ˆé™¤æ­»é”çš„å‡ ç§æ–¹å¼ï¼š</p>
<ol>
<li>
<p>æœ€ç®€å•ã€æœ€å¸¸ç”¨çš„æ–¹æ³•å°±æ˜¯è¿›è¡Œç³»ç»Ÿçš„é‡æ–°å¯åŠ¨ï¼Œä¸è¿‡è¿™ç§æ–¹æ³•ä»£ä»·å¾ˆå¤§ï¼Œå®ƒæ„å‘³ç€åœ¨è¿™ä¹‹å‰æ‰€æœ‰çš„è¿›ç¨‹å·²ç»å®Œæˆçš„è®¡ç®—å·¥ä½œéƒ½å°†ä»˜ä¹‹ä¸œæµï¼ŒåŒ…æ‹¬å‚ä¸æ­»é”çš„é‚£äº›è¿›ç¨‹ï¼Œä»¥åŠæœªå‚ä¸æ­»é”çš„è¿›ç¨‹ï¼›</p>
</li>
<li>
<p>æ’¤æ¶ˆè¿›ç¨‹ï¼Œå‰¥å¤ºèµ„æºã€‚ç»ˆæ­¢å‚ä¸æ­»é”çš„è¿›ç¨‹ï¼Œæ”¶å›å®ƒä»¬å æœ‰çš„èµ„æºï¼Œä»è€Œè§£é™¤æ­»é”ã€‚è¿™æ—¶åˆåˆ†ä¸¤ç§æƒ…å†µï¼šä¸€æ¬¡æ€§æ’¤æ¶ˆå‚ä¸æ­»é”çš„å…¨éƒ¨è¿›ç¨‹ï¼Œå‰¥å¤ºå…¨éƒ¨èµ„æºï¼›æˆ–è€…é€æ­¥æ’¤æ¶ˆå‚ä¸æ­»é”çš„è¿›ç¨‹ï¼Œé€æ­¥æ”¶å›æ­»é”è¿›ç¨‹å æœ‰çš„èµ„æºã€‚ä¸€èˆ¬æ¥è¯´ï¼Œé€‰æ‹©é€æ­¥æ’¤æ¶ˆçš„è¿›ç¨‹æ—¶è¦æŒ‰ç…§ä¸€å®šçš„åŸåˆ™è¿›è¡Œï¼Œç›®çš„æ˜¯æ’¤æ¶ˆé‚£äº›ä»£ä»·æœ€å°çš„è¿›ç¨‹ï¼Œæ¯”å¦‚æŒ‰è¿›ç¨‹çš„ä¼˜å…ˆçº§ç¡®å®šè¿›ç¨‹çš„ä»£ä»·ï¼›è€ƒè™‘è¿›ç¨‹è¿è¡Œæ—¶çš„ä»£ä»·å’Œä¸æ­¤è¿›ç¨‹ç›¸å…³çš„å¤–éƒ¨ä½œä¸šçš„ä»£ä»·ç­‰å› ç´ ï¼›</p>
</li>
<li>
<p>è¿›ç¨‹å›é€€ç­–ç•¥ï¼Œå³è®©å‚ä¸æ­»é”çš„è¿›ç¨‹å›é€€åˆ°æ²¡æœ‰å‘ç”Ÿæ­»é”å‰æŸä¸€ç‚¹å¤„ï¼Œå¹¶ç”±æ­¤ç‚¹å¤„ç»§ç»­æ‰§è¡Œï¼Œä»¥æ±‚å†æ¬¡æ‰§è¡Œæ—¶ä¸å†å‘ç”Ÿæ­»é”ã€‚è™½ç„¶è¿™æ˜¯ä¸ªè¾ƒç†æƒ³çš„åŠæ³•ï¼Œä½†æ˜¯æ“ä½œèµ·æ¥ç³»ç»Ÿå¼€é”€æå¤§ï¼Œè¦æœ‰å †æ ˆè¿™æ ·çš„æœºæ„è®°å½•è¿›ç¨‹çš„æ¯ä¸€æ­¥å˜åŒ–ï¼Œä»¥ä¾¿ä»Šåçš„å›é€€ï¼Œæœ‰æ—¶è¿™æ˜¯æ— æ³•åšåˆ°çš„ã€‚</p>
</li>
</ol>
<p>å…¶å®å³ä¾¿æ˜¯å•†ä¸šäº§å“ï¼Œä¾ç„¶ä¼šæœ‰å¾ˆå¤šæ­»é”æƒ…å†µçš„å‘ç”Ÿï¼Œä¾‹å¦‚ MySQL æ•°æ®åº“ï¼Œå®ƒä¹Ÿç»å¸¸å®¹æ˜“å‡ºç°æ­»é”æ¡ˆä¾‹ã€‚</p>
<h2><a id="user-content-mysql-æ­»é”æƒ…å†µè§£å†³æ–¹æ³•" class="anchor" aria-hidden="true" href="#mysql-æ­»é”æƒ…å†µè§£å†³æ–¹æ³•"><span aria-hidden="true" class="octicon octicon-link"></span></a>MySQL æ­»é”æƒ…å†µè§£å†³æ–¹æ³•</h2>
<p>å‡è®¾æˆ‘ä»¬ç”¨ Show innodb status æ£€æŸ¥å¼•æ“çŠ¶æ€æ—¶å‘ç°äº†æ­»é”æƒ…å†µï¼Œå¦‚æ¸…å• 7 æ‰€ç¤ºã€‚</p>
<h3><a id="user-content-æ¸…å•-7-mysql-æ­»é”" class="anchor" aria-hidden="true" href="#æ¸…å•-7-mysql-æ­»é”"><span aria-hidden="true" class="octicon octicon-link"></span></a>æ¸…å• 7. MySQL æ­»é”</h3>
<pre><code>WAITING FOR THIS LOCK TO BE GRANTED:
RECORD LOCKS space id 0 page no 843102 n bits 600 index `KEY_TSKTASK_MONTIME2` of table
        `dcnet_db/TSK_TASK` trx id 0 677833454 lock_mode X locks rec but not gap waiting
Record lock, heap no 395 PHYSICAL RECORD: n_fields 3; compact format; info bits 0
0: len 8; hex 8000000000000425; asc %;; 1: len 8; hex 800012412c66d29c; 
                    asc A,f ;; 2: len 8; hex 800000000097629c; asc b ;;

*** WE ROLL BACK TRANSACTION (1)
</code></pre>
<p>æˆ‘ä»¬å‡è®¾æ¶‰äº‹çš„æ•°æ®è¡¨ä¸Šé¢æœ‰ä¸€ä¸ªç´¢å¼•ï¼Œè¿™æ¬¡çš„æ­»é”å°±æ˜¯ç”±äºä¸¤æ¡è®°å½•åŒæ—¶è®¿é—®åˆ°äº†ç›¸åŒçš„ç´¢å¼•é€ æˆçš„ã€‚</p>
<p>æˆ‘ä»¬é¦–å…ˆæ¥çœ‹çœ‹ InnoDB ç±»å‹çš„æ•°æ®è¡¨ï¼Œåªè¦èƒ½å¤Ÿè§£å†³ç´¢å¼•é—®é¢˜ï¼Œå°±å¯ä»¥è§£å†³æ­»é”é—®é¢˜ã€‚MySQL çš„ InnoDB å¼•æ“æ˜¯è¡Œçº§é”ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸æ˜¯å¯¹è®°å½•è¿›è¡Œé”å®šï¼Œè€Œæ˜¯å¯¹ç´¢å¼•è¿›è¡Œé”å®šã€‚åœ¨ UPDATEã€DELETE æ“ä½œæ—¶ï¼ŒMySQL ä¸ä»…é”å®š WHERE æ¡ä»¶æ‰«æè¿‡çš„æ‰€æœ‰ç´¢å¼•è®°å½•ï¼Œè€Œä¸”ä¼šé”å®šç›¸é‚»çš„é”®å€¼ï¼Œå³æ‰€è°“çš„ next-key lockingï¼›</p>
<p>å¦‚è¯­å¥ <code>UPDATE TSK_TASK SET UPDATE_TIME = NOW() WHERE ID &gt; 10000</code> ä¼šé”å®šæ‰€æœ‰ä¸»é”®å¤§äºç­‰äº 1000 çš„æ‰€æœ‰è®°å½•ï¼Œåœ¨è¯¥è¯­å¥å®Œæˆä¹‹å‰ï¼Œä½ å°±ä¸èƒ½å¯¹ä¸»é”®ç­‰äº 10000 çš„è®°å½•è¿›è¡Œæ“ä½œï¼›å½“éç°‡ç´¢å¼• (non-cluster index) è®°å½•è¢«é”å®šæ—¶ï¼Œç›¸å…³çš„ç°‡ç´¢å¼• (cluster index) è®°å½•ä¹Ÿéœ€è¦è¢«é”å®šæ‰èƒ½å®Œæˆç›¸åº”çš„æ“ä½œã€‚</p>
<p>å†åˆ†æä¸€ä¸‹å‘ç”Ÿé—®é¢˜çš„ä¸¤æ¡ SQL è¯­å¥ï¼š</p>
<p>å½“â€œ<code>update TSK_TASK set STATUS_ID=1064,UPDATE_TIME=now () where STATUS_ID=1061 and MON_TIME&lt;date_sub(now(), INTERVAL 30 minute)</code>â€æ‰§è¡Œæ—¶ï¼ŒMySQL ä¼šä½¿ç”¨<code> KEY_TSKTASK_MONTIME2</code> ç´¢å¼•ï¼Œå› æ­¤é¦–å…ˆé”å®šç›¸å…³çš„ç´¢å¼•è®°å½•ï¼Œå› ä¸º KEY_TSKTASK_MONTIME2 æ˜¯éç°‡ç´¢å¼•ï¼Œä¸ºæ‰§è¡Œè¯¥è¯­å¥ï¼ŒMySQL è¿˜ä¼šé”å®šç°‡ç´¢å¼•ï¼ˆä¸»é”®ç´¢å¼•ï¼‰ã€‚</p>
<p>å‡è®¾â€œ<code>update TSK_TASK set STATUS_ID=1067,UPDATE_TIME=now () where ID in (9921180)</code>â€å‡ ä¹åŒæ—¶æ‰§è¡Œæ—¶ï¼Œæœ¬è¯­å¥é¦–å…ˆé”å®šç°‡ç´¢å¼• (ä¸»é”®)ï¼Œç”±äºéœ€è¦æ›´æ–° STATUS_ID çš„å€¼ï¼Œæ‰€ä»¥è¿˜éœ€è¦é”å®š KEY_TSKTASK_MONTIME2 çš„æŸäº›ç´¢å¼•è®°å½•ã€‚</p>
<p>è¿™æ ·ç¬¬ä¸€æ¡è¯­å¥é”å®šäº† KEY_TSKTASK_MONTIME2 çš„è®°å½•ï¼Œç­‰å¾…ä¸»é”®ç´¢å¼•ï¼Œè€Œç¬¬äºŒæ¡è¯­å¥åˆ™é”å®šäº†ä¸»é”®ç´¢å¼•è®°å½•ï¼Œè€Œç­‰å¾… KEY_TSKTASK_MONTIME2 çš„è®°å½•ï¼Œè¿™æ ·æ­»é”å°±äº§ç”Ÿäº†ã€‚</p>
<p>æˆ‘ä»¬é€šè¿‡æ‹†åˆ†ç¬¬ä¸€æ¡è¯­å¥è§£å†³äº†æ­»é”é—®é¢˜ï¼šå³å…ˆæŸ¥å‡ºç¬¦åˆæ¡ä»¶çš„ <code>IDï¼šselect ID from TSK_TASK where STATUS_ID=1061 and MON_TIME &lt; date_sub(now(), INTERVAL 30 minute)ï¼›</code>ç„¶åå†æ›´æ–°çŠ¶æ€ï¼š<code>update TSK_TASK set STATUS_ID=1064 where ID in (â€¦.)</code>ã€‚</p>
]]></description>
                    <pubDate>Thu, 30 Dec 2021 11:37:25 GMT</pubDate>
                        <guid isPermaLink="false">/2021/12/6</guid>
                <link>/2021/12/6</link>
                    <author><![CDATA[bxb100]]></author>
                        <category>Archive</category>
            </item>
            <item>
                <title><![CDATA[é›„ç‹®å°‘å¹´æ‚æ„Ÿ]]></title>
                    <description><![CDATA[<p><a href="http://jandan.net/t/5118460" rel="nofollow">ç…è›‹</a>è¿™å›¾ç‰‡é“å°½äº†æˆ‘æ‰€æœ‰çš„æƒ³æ³• <g-emoji class="g-emoji" alias="rofl" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f923.png">ğŸ¤£</g-emoji></p>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://user-images.githubusercontent.com/20685961/147487831-a8feebcf-f0ea-4816-b9ce-9ef6a1d8c895.jpg"><img src="https://user-images.githubusercontent.com/20685961/147487831-a8feebcf-f0ea-4816-b9ce-9ef6a1d8c895.jpg" alt="88520f6bly1gxshpjo4j1j20c81br0vp" style="max-width: 100%;"></a></p>
]]></description>
                    <pubDate>Mon, 27 Dec 2021 16:06:21 GMT</pubDate>
                        <guid isPermaLink="false">/2021/12/5</guid>
                <link>/2021/12/5</link>
                    <author><![CDATA[bxb100]]></author>
                        <category>æ‚æ„Ÿ</category>
                        <category>ç…è›‹</category>
            </item>
    </channel>
</rss>
